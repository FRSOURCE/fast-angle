import{d as dt,q as H,s as st,v as me,x as In,y as Dn,u as Mt,o as E,c as lt,b as G,w as Q,a as u,z as Ct,A as ot,j as K,B as Pt,n as O,l as it,k as r,T as An,m as ct,C as Et,e as $t,E as It,h as N,F as Rn,G as On,i as z,H as Yt,I as je,J as wt,K as Ot,L as xt,M as Te,N as vt,O as At,P as ge,Q as be,r as zn,R as Fn,S as Pn,U as Me,V as Ln,W as Jt,X as Bn,Y as Gn,Z as Nn,$ as Hn,a0 as Un,a1 as Vn,a2 as Wn,a3 as Kn,a4 as Ze,a5 as Yn,a6 as de,a7 as Ee,a8 as qn,a9 as Xn,aa as jn,ab as jt,ac as Zn,ad as Jn,ae as Qn}from"./app.6590e3f2.js";/*!
* tabbable 6.0.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Je=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],Qt=Je.join(","),Qe=typeof Element>"u",Tt=Qe?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,te=!Qe&&Element.prototype.getRootNode?function(e){return e.getRootNode()}:function(e){return e.ownerDocument},tn=function(t,n,s){var a=Array.prototype.slice.apply(t.querySelectorAll(Qt));return n&&Tt.call(t,Qt)&&a.unshift(t),a=a.filter(s),a},en=function e(t,n,s){for(var a=[],i=Array.from(t);i.length;){var o=i.shift();if(o.tagName==="SLOT"){var l=o.assignedElements(),d=l.length?l:o.children,p=e(d,!0,s);s.flatten?a.push.apply(a,p):a.push({scope:o,candidates:p})}else{var m=Tt.call(o,Qt);m&&s.filter(o)&&(n||!t.includes(o))&&a.push(o);var k=o.shadowRoot||typeof s.getShadowRoot=="function"&&s.getShadowRoot(o),_=!s.shadowRootFilter||s.shadowRootFilter(o);if(k&&_){var y=e(k===!0?o.children:k.children,!0,s);s.flatten?a.push.apply(a,y):a.push({scope:o,candidates:y})}else i.unshift.apply(i,o.children)}}return a},nn=function(t,n){return t.tabIndex<0&&(n||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||t.isContentEditable)&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},ts=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},sn=function(t){return t.tagName==="INPUT"},es=function(t){return sn(t)&&t.type==="hidden"},ns=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(s){return s.tagName==="SUMMARY"});return n},ss=function(t,n){for(var s=0;s<t.length;s++)if(t[s].checked&&t[s].form===n)return t[s]},as=function(t){if(!t.name)return!0;var n=t.form||te(t),s=function(l){return n.querySelectorAll('input[type="radio"][name="'+l+'"]')},a;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")a=s(window.CSS.escape(t.name));else try{a=s(t.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=ss(a,t.form);return!i||i===t},is=function(t){return sn(t)&&t.type==="radio"},os=function(t){return is(t)&&!as(t)},rs=function(t){for(var n,s=te(t).host,a=!!((n=s)!==null&&n!==void 0&&n.ownerDocument.contains(s)||t.ownerDocument.contains(t));!a&&s;){var i;s=te(s).host,a=!!((i=s)!==null&&i!==void 0&&i.ownerDocument.contains(s))}return a},Ie=function(t){var n=t.getBoundingClientRect(),s=n.width,a=n.height;return s===0&&a===0},ls=function(t,n){var s=n.displayCheck,a=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var i=Tt.call(t,"details>summary:first-of-type"),o=i?t.parentElement:t;if(Tt.call(o,"details:not([open]) *"))return!0;if(!s||s==="full"||s==="legacy-full"){if(typeof a=="function"){for(var l=t;t;){var d=t.parentElement,p=te(t);if(d&&!d.shadowRoot&&a(d)===!0)return Ie(t);t.assignedSlot?t=t.assignedSlot:!d&&p!==t.ownerDocument?t=p.host:t=d}t=l}if(rs(t))return!t.getClientRects().length;if(s!=="legacy-full")return!0}else if(s==="non-zero-area")return Ie(t);return!1},us=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var s=0;s<n.children.length;s++){var a=n.children.item(s);if(a.tagName==="LEGEND")return Tt.call(n,"fieldset[disabled] *")?!0:!a.contains(t)}return!0}n=n.parentElement}return!1},ee=function(t,n){return!(n.disabled||es(n)||ls(n,t)||ns(n)||us(n))},ve=function(t,n){return!(os(n)||nn(n)<0||!ee(t,n))},cs=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},ds=function e(t){var n=[],s=[];return t.forEach(function(a,i){var o=!!a.scope,l=o?a.scope:a,d=nn(l,o),p=o?e(a.candidates):l;d===0?o?n.push.apply(n,p):n.push(l):s.push({documentOrder:i,tabIndex:d,item:a,isScope:o,content:p})}),s.sort(ts).reduce(function(a,i){return i.isScope?a.push.apply(a,i.content):a.push(i.content),a},[]).concat(n)},hs=function(t,n){n=n||{};var s;return n.getShadowRoot?s=en([t],n.includeContainer,{filter:ve.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:cs}):s=tn(t,n.includeContainer,ve.bind(null,n)),ds(s)},fs=function(t,n){n=n||{};var s;return n.getShadowRoot?s=en([t],n.includeContainer,{filter:ee.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):s=tn(t,n.includeContainer,ee.bind(null,n)),s},qt=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return Tt.call(t,Qt)===!1?!1:ve(n,t)},vs=Je.concat("iframe").join(","),he=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return Tt.call(t,vs)===!1?!1:ee(n,t)};/*!
* focus-trap 7.0.0
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?De(Object(n),!0).forEach(function(s){ps(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ps(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Re=function(){var e=[];return{activateTrap:function(n){if(e.length>0){var s=e[e.length-1];s!==n&&s.pause()}var a=e.indexOf(n);a===-1||e.splice(a,1),e.push(n)},deactivateTrap:function(n){var s=e.indexOf(n);s!==-1&&e.splice(s,1),e.length>0&&e[e.length-1].unpause()}}}(),ms=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},gs=function(t){return t.key==="Escape"||t.key==="Esc"||t.keyCode===27},bs=function(t){return t.key==="Tab"||t.keyCode===9},Oe=function(t){return setTimeout(t,0)},ze=function(t,n){var s=-1;return t.every(function(a,i){return n(a)?(s=i,!1):!0}),s},zt=function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return typeof t=="function"?t.apply(void 0,s):t},Xt=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},_s=function(t,n){var s=(n==null?void 0:n.document)||document,a=Ae({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},n),i={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},o,l=function(g,S,L){return g&&g[S]!==void 0?g[S]:a[L||S]},d=function(g){return i.containerGroups.findIndex(function(S){var L=S.container,Y=S.tabbableNodes;return L.contains(g)||Y.find(function(F){return F===g})})},p=function(g){var S=a[g];if(typeof S=="function"){for(var L=arguments.length,Y=new Array(L>1?L-1:0),F=1;F<L;F++)Y[F-1]=arguments[F];S=S.apply(void 0,Y)}if(S===!0&&(S=void 0),!S){if(S===void 0||S===!1)return S;throw new Error("`".concat(g,"` was specified but was not a node, or did not return a node"))}var f=S;if(typeof S=="string"&&(f=s.querySelector(S),!f))throw new Error("`".concat(g,"` as selector refers to no known node"));return f},m=function(){var g=p("initialFocus");if(g===!1)return!1;if(g===void 0)if(d(s.activeElement)>=0)g=s.activeElement;else{var S=i.tabbableGroups[0],L=S&&S.firstTabbableNode;g=L||p("fallbackFocus")}if(!g)throw new Error("Your focus-trap needs to have at least one focusable element");return g},k=function(){if(i.containerGroups=i.containers.map(function(g){var S=hs(g,a.tabbableOptions),L=fs(g,a.tabbableOptions);return{container:g,tabbableNodes:S,focusableNodes:L,firstTabbableNode:S.length>0?S[0]:null,lastTabbableNode:S.length>0?S[S.length-1]:null,nextTabbableNode:function(F){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,J=L.findIndex(function(q){return q===F});if(!(J<0))return f?L.slice(J+1).find(function(q){return qt(q,a.tabbableOptions)}):L.slice(0,J).reverse().find(function(q){return qt(q,a.tabbableOptions)})}}}),i.tabbableGroups=i.containerGroups.filter(function(g){return g.tabbableNodes.length>0}),i.tabbableGroups.length<=0&&!p("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},_=function w(g){if(g!==!1&&g!==s.activeElement){if(!g||!g.focus){w(m());return}g.focus({preventScroll:!!a.preventScroll}),i.mostRecentlyFocusedNode=g,ms(g)&&g.select()}},y=function(g){var S=p("setReturnFocus",g);return S||(S===!1?!1:g)},$=function(g){var S=Xt(g);if(!(d(S)>=0)){if(zt(a.clickOutsideDeactivates,g)){o.deactivate({returnFocus:a.returnFocusOnDeactivate&&!he(S,a.tabbableOptions)});return}zt(a.allowOutsideClick,g)||g.preventDefault()}},M=function(g){var S=Xt(g),L=d(S)>=0;L||S instanceof Document?L&&(i.mostRecentlyFocusedNode=S):(g.stopImmediatePropagation(),_(i.mostRecentlyFocusedNode||m()))},R=function(g){var S=Xt(g);k();var L=null;if(i.tabbableGroups.length>0){var Y=d(S),F=Y>=0?i.containerGroups[Y]:void 0;if(Y<0)g.shiftKey?L=i.tabbableGroups[i.tabbableGroups.length-1].lastTabbableNode:L=i.tabbableGroups[0].firstTabbableNode;else if(g.shiftKey){var f=ze(i.tabbableGroups,function(ut){var at=ut.firstTabbableNode;return S===at});if(f<0&&(F.container===S||he(S,a.tabbableOptions)&&!qt(S,a.tabbableOptions)&&!F.nextTabbableNode(S,!1))&&(f=Y),f>=0){var J=f===0?i.tabbableGroups.length-1:f-1,q=i.tabbableGroups[J];L=q.lastTabbableNode}}else{var Z=ze(i.tabbableGroups,function(ut){var at=ut.lastTabbableNode;return S===at});if(Z<0&&(F.container===S||he(S,a.tabbableOptions)&&!qt(S,a.tabbableOptions)&&!F.nextTabbableNode(S))&&(Z=Y),Z>=0){var U=Z===i.tabbableGroups.length-1?0:Z+1,et=i.tabbableGroups[U];L=et.firstTabbableNode}}}else L=p("fallbackFocus");L&&(g.preventDefault(),_(L))},T=function(g){if(gs(g)&&zt(a.escapeDeactivates,g)!==!1){g.preventDefault(),o.deactivate();return}if(bs(g)){R(g);return}},D=function(g){var S=Xt(g);d(S)>=0||zt(a.clickOutsideDeactivates,g)||zt(a.allowOutsideClick,g)||(g.preventDefault(),g.stopImmediatePropagation())},A=function(){if(!!i.active)return Re.activateTrap(o),i.delayInitialFocusTimer=a.delayInitialFocus?Oe(function(){_(m())}):_(m()),s.addEventListener("focusin",M,!0),s.addEventListener("mousedown",$,{capture:!0,passive:!1}),s.addEventListener("touchstart",$,{capture:!0,passive:!1}),s.addEventListener("click",D,{capture:!0,passive:!1}),s.addEventListener("keydown",T,{capture:!0,passive:!1}),o},V=function(){if(!!i.active)return s.removeEventListener("focusin",M,!0),s.removeEventListener("mousedown",$,!0),s.removeEventListener("touchstart",$,!0),s.removeEventListener("click",D,!0),s.removeEventListener("keydown",T,!0),o};return o={get active(){return i.active},get paused(){return i.paused},activate:function(g){if(i.active)return this;var S=l(g,"onActivate"),L=l(g,"onPostActivate"),Y=l(g,"checkCanFocusTrap");Y||k(),i.active=!0,i.paused=!1,i.nodeFocusedBeforeActivation=s.activeElement,S&&S();var F=function(){Y&&k(),A(),L&&L()};return Y?(Y(i.containers.concat()).then(F,F),this):(F(),this)},deactivate:function(g){if(!i.active)return this;var S=Ae({onDeactivate:a.onDeactivate,onPostDeactivate:a.onPostDeactivate,checkCanReturnFocus:a.checkCanReturnFocus},g);clearTimeout(i.delayInitialFocusTimer),i.delayInitialFocusTimer=void 0,V(),i.active=!1,i.paused=!1,Re.deactivateTrap(o);var L=l(S,"onDeactivate"),Y=l(S,"onPostDeactivate"),F=l(S,"checkCanReturnFocus"),f=l(S,"returnFocus","returnFocusOnDeactivate");L&&L();var J=function(){Oe(function(){f&&_(y(i.nodeFocusedBeforeActivation)),Y&&Y()})};return f&&F?(F(y(i.nodeFocusedBeforeActivation)).then(J,J),this):(J(),this)},pause:function(){return i.paused||!i.active?this:(i.paused=!0,V(),this)},unpause:function(){return!i.paused||!i.active?this:(i.paused=!1,k(),A(),this)},updateContainerElements:function(g){var S=[].concat(g).filter(Boolean);return i.containers=S.map(function(L){return typeof L=="string"?s.querySelector(L):L}),i.active&&k(),this}},o.updateContainerElements(t),o};const ys=dt({name:"UseFocusTrap",props:["as","options"],setup(e,{slots:t}){let n;const s=H(),a=()=>n&&n.activate(),i=()=>n&&n.deactivate();return st(()=>me(s),o=>{!o||(n=_s(o,e.options||{}),a())},{flush:"post"}),In(()=>i()),()=>{if(t.default)return Dn(e.as||"div",{ref:s},t.default())}}}),ws=["textContent"],Ss={inheritAttrs:!1},$s=dt({...Ss,__name:"Modal",props:{heading:{type:String,required:!0},modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const{t:n}=Mt(),s=H(),a=()=>t("update:modelValue",!1);return st(s,i=>{i==null||i.showModal()}),(i,o)=>{const l=Et;return e.modelValue?(E(),lt(An,{key:0,to:"body"},[G(r(ys),{options:{immediate:!0,initialFocus:!1}},{default:Q(()=>[u("dialog",{ref_key:"dialog",ref:s,"aria-modal":"",onClick:a,onClose:a},[u("article",Ct(i.$attrs,{onClick:o[0]||(o[0]=ot(()=>{},["stop"]))}),[u("h3",{textContent:K(e.heading)},null,8,ws),Pt(i.$slots,"default"),u("footer",{class:O(i.$style.footer)},[Pt(i.$slots,"footer-pre"),G(l,{class:"secondary",onClick:a},{default:Q(()=>[it(K(r(n)("main.close")),1)]),_:1}),Pt(i.$slots,"footer")],2)],16)],544)]),_:3})])):ct("v-if",!0)}}}),ks="f_-",xs={footer:ks},Cs={$style:xs},an=$t($s,[["__cssModules",Cs]]),oe=It(()=>H()),Ts=(e,t)=>{const n=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),s=document.createElement("a");s.setAttribute("download",t),s.setAttribute("href",e),s.setAttribute("target","_blank"),s.dispatchEvent(n)},Ms=async(e,t)=>{const n=new XMLSerializer().serializeToString(e),s=new Blob([n],{type:"image/svg+xml;charset=utf-8"}),a=new Image,i=URL.createObjectURL(s);await new Promise((o,l)=>{a.onload=function(){t.drawImage(a,0,0),URL.revokeObjectURL(i),o()},a.onabort=a.onerror=()=>l(),a.src=i})},Lt={JPG:1,PNG:2},Es={[Lt.JPG]:{encoding:"image/jpeg",extension:"jpg"},[Lt.PNG]:{encoding:"image/png",extension:"png"}},Is=e=>{var s;const t=e.cloneNode(!0),n=window.getComputedStyle(e);return(s=t.querySelector("circle"))==null||s.remove(),t.style.setProperty("--background-color-transparent",n.getPropertyValue("--background-color-transparent")),t.style.color=t.style.fill=n.getPropertyValue("--color"),t.style.stroke="#fff",t.style.fontFamily="Arial",t.style.fontSize="20px",t},on=It(()=>{const e=document.createElement("canvas"),t=e==null?void 0:e.getContext("2d"),n=oe(),s=N(()=>n.value&&t);return{triggerDownload:async({filename:i,filetype:o,quality:l,width:d,height:p})=>{if(!s.value)return;e.width=d,e.height=p,await Ms(Is(n.value),t);const{encoding:m,extension:k}=Es[o],_=e.toDataURL(m,l);Ts(_,`${i}.${k}`)},isSupported:s}}),Ds=Rn({...On,xs:480}),_t={px:1,"%":2,in:3,mm:4},As=(e,t,n)=>{let s=e;switch(t){case _t["%"]:s=e*100/n;break;case _t.in:s=e/window.devicePixelRatio;break;case _t.mm:s=e*25.4/window.devicePixelRatio;break}return+s.toFixed(6)},Rs=(e,t,n)=>{let s=e;switch(t){case _t["%"]:s=e/100*n;break;case _t.in:s=e*window.devicePixelRatio;break;case _t.mm:s=e*window.devicePixelRatio/25.4;break}return+s.toFixed(5)},Fe=(e,t,n)=>{const s=H(0),a=H(e.value-1),i=H(0);return st([e,t],([o,l],[,d])=>{(a.value!==o||l!==d)&&(a.value=o,s.value=As(o,l,n.value))},{immediate:!0}),st(i,o=>{s.value!==o&&(a.value=Rs(o,t.value,n.value))}),st(s,o=>i.value=o,{immediate:!0}),i},Os={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},zs=u("path",{fill:"currentColor",d:"M24 14h-2V8a6 6 0 0 0-12 0v6H8a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V16a2 2 0 0 0-2-2ZM12 8a4 4 0 0 1 8 0v6h-8Zm12 20H8V16h16Z"},null,-1),Fs=[zs];function Ps(e,t){return E(),z("svg",Os,Fs)}const Ls={name:"carbon-locked",render:Ps},Bs={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Gs=u("path",{fill:"currentColor",d:"M24 14H12V8a4 4 0 0 1 8 0h2a6 6 0 0 0-12 0v6H8a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V16a2 2 0 0 0-2-2Zm0 14H8V16h16Z"},null,-1),Ns=[Gs];function Hs(e,t){return E(),z("svg",Bs,Ns)}const Us={name:"carbon-unlocked",render:Hs},Vs=["onSubmit"],Ws={class:"flex-grow"},Ks=["aria-invalid"],Ys=["value","textContent"],qs=["aria-invalid"],Xs=["aria-invalid"],js=["data-tooltip"],Zs=["value","textContent"],Js=["aria-invalid"],Qs=dt({__name:"BoardControlsSvgDownloadModalContent",props:{boardWidth:{type:Number,required:!0},boardHeight:{type:Number,required:!0}},emits:["downloadFinish"],setup(e,{emit:t}){const n=e,{t:s}=Mt(),{triggerDownload:a}=on(),i=Yt("FA_FILENAME","fast-angle-image"),{boardHeight:o,boardWidth:l}=je(n),d=H(o.value),p=H(l.value),m=Yt("FA_SIZE_UNIT",_t.px),k=H(!0),_=H(l.value/o.value);Ds.isGreaterOrEqual("xl")&&st([l,o],([D,A])=>{p.value=D,d.value=A,_.value=D/A});const y=Fe(d,m,o),$=Fe(p,m,l);st([$,y],([D,A])=>{k.value||(_.value=D/A)},{flush:"sync",immediate:!0}),st(y,()=>{y.value<0&&(y.value=1),k.value&&y.value!==+($.value/_.value).toFixed(3)&&($.value=+(y.value*_.value).toFixed(3))},{flush:"sync"}),st($,()=>{$.value<0&&($.value=1),k.value&&$.value!==+(y.value*_.value).toFixed(3)&&(y.value=+($.value/_.value).toFixed(3))},{flush:"sync"});const M=Yt("FA_FILETYPE",Lt.PNG),R=Yt("FA_QUALITY",100);st(R,()=>{R.value>100&&(R.value=100),R.value<0&&(R.value=0)});const T=async()=>{await a({filename:i.value,filetype:M.value,quality:R.value/100,width:p.value,height:d.value}).catch(()=>{}),t("downloadFinish")};return(D,A)=>{const V=Et;return E(),z("form",{onSubmit:ot(T,["prevent"])},[u("div",{class:O(D.$style.name)},[u("label",Ws,[it(K(r(s)("board.nav.download_image.name_label"))+" ",1),wt(u("input",{"onUpdate:modelValue":A[0]||(A[0]=w=>xt(i)?i.value=w:null),type:"text",name:"name",required:"","aria-invalid":!r(i)},null,8,Ks),[[Ot,r(i)]])]),u("label",{class:O(D.$style["label--big"])},[it(K(r(s)("board.nav.download_image.format_label"))+" ",1),wt(u("select",{"onUpdate:modelValue":A[1]||(A[1]=w=>xt(M)?M.value=w:null),required:""},[(E(!0),z(vt,null,At(Object.keys(r(Lt)),w=>(E(),z("option",{key:w,value:r(Lt)[w],textContent:K(w)},null,8,Ys))),128))],512),[[Te,r(M)]])],2)],2),u("fieldset",{class:O(D.$style.sizing)},[u("legend",null,[u("small",null,K(r(s)("board.nav.download_image.sizing_label")),1)]),u("label",{class:O(D.$style.label)},[it(K(r(s)("board.nav.download_image.width_label"))+" ",1),wt(u("input",{"onUpdate:modelValue":A[2]||(A[2]=w=>xt($)?$.value=w:null),min:"1",type:"number",step:"0.000001",name:"width",required:"","aria-invalid":!r($)||r($)<1},null,8,qs),[[Ot,r($),void 0,{number:!0}]])],2),u("label",{class:O(D.$style.label)},[it(K(r(s)("board.nav.download_image.height_label"))+" ",1),wt(u("input",{"onUpdate:modelValue":A[3]||(A[3]=w=>xt(y)?y.value=w:null),min:"1",type:"number",step:"0.000001",name:"height",required:"","aria-invalid":!r(y)||r(y)<1},null,8,Xs),[[Ot,r(y),void 0,{number:!0}]])],2),u("label",null,[it(" \xA0 "),u("div",{class:O(D.$style["aspect-ratio"]),"data-tooltip":r(s)("board.nav.download_image.keep_aspect_ratio")},[G(V,{"aria-label":r(s)("board.nav.download_image.keep_aspect_ratio"),class:O([D.$style["aspect-ratio-btn"],{[D.$style["aspect-ratio-btn--inactive"]]:!k.value}]),onClick:A[4]||(A[4]=w=>k.value=!k.value)},{default:Q(()=>[k.value?(E(),lt(r(Ls),{key:0})):(E(),lt(r(Us),{key:1}))]),_:1},8,["aria-label","class"])],10,js)]),u("label",{class:O([D.$style.label,D.$style["label--small"]])},[it(K(r(s)("board.nav.download_image.unit_label"))+" ",1),wt(u("select",{"onUpdate:modelValue":A[5]||(A[5]=w=>xt(m)?m.value=w:null),required:""},[(E(!0),z(vt,null,At(Object.keys(r(_t)),w=>(E(),z("option",{key:w,value:r(_t)[w],textContent:K(w)},null,8,Zs))),128))],512),[[Te,r(m)]])],2)],2),u("label",null,[u("span",{class:O(D.$style.quality)},[it(K(r(s)("board.nav.download_image.quality_label"))+" ",1),wt(u("input",{"onUpdate:modelValue":A[6]||(A[6]=w=>xt(R)?R.value=w:null),type:"number",min:"1",max:"100",class:O(D.$style.quality__input),name:"quality","aria-invalid":!r(R)||r(R)>100||r(R)<1},null,10,Js),[[Ot,r(R),void 0,{number:!0}]]),it(" % ")],2),wt(u("input",{"onUpdate:modelValue":A[7]||(A[7]=w=>xt(R)?R.value=w:null),type:"range",min:"1",max:"100",name:"quality"},null,512),[[Ot,r(R),void 0,{number:!0}]])])],40,Vs)}}}),ta="f_aa",ea="f_ad",na="f_ae",sa="f_ai",aa="f_aj",ia={label:ta,"label--big":"f_ab","label--small":"f_ac",sizing:ea,name:na,"aspect-ratio":"f_af","aspect-ratio-btn":"f_ag","aspect-ratio-btn--inactive":"f_ah",quality:sa,quality__input:aa},oa={$style:ia},ra=$t(Qs,[["__cssModules",oa]]),re=It(()=>H()),la={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},ua=u("path",{fill:"currentColor",d:"M26 24v4H6v-4H4v4a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2v-4zm0-10l-1.41-1.41L17 20.17V2h-2v18.17l-7.59-7.58L6 14l10 10l10-10z"},null,-1),ca=[ua];function da(e,t){return E(),z("svg",la,ca)}const ha={name:"carbon-download",render:da},fa={key:0},va=dt({__name:"BoardControlsSvgDownload",props:{disabled:{type:Boolean,default:!1}},setup(e){const{t}=Mt(),{isSupported:n}=on(),s=re(),{height:a,width:i}=ge(s),o=H(!1),l=H(!1),d="board_svg_download_form";return be({onEventFired(p){(p.ctrlKey||p.metaKey)&&p.key==="s"&&(p.preventDefault(),o.value=!0)},passive:!1}),(p,m)=>{const k=ra,_=Et,y=an;return r(n)?(E(),z("li",fa,[G(_,{tooltip:`${r(t)("board.nav.download_image.action")} [ctrl + s][\u2318 + s]`,"tooltip-placement":"left",disabled:e.disabled?void 0:!0,onClick:m[3]||(m[3]=$=>o.value=!0),onTouchstart:m[4]||(m[4]=ot($=>o.value=!0,["stop","prevent"]))},{default:Q(()=>[G(r(ha)),G(y,{modelValue:o.value,"onUpdate:modelValue":m[2]||(m[2]=$=>o.value=$),heading:r(t)("board.nav.download_image.heading")},{footer:Q(()=>[G(_,{type:"submit",role:"button",form:d,disabled:l.value,"aria-busy":l.value},{default:Q(()=>[it(K(r(t)("board.nav.download_image.save")),1)]),_:1},8,["disabled","aria-busy"])]),default:Q(()=>[G(k,{id:d,"board-height":r(a),"board-width":r(i),onSubmit:m[0]||(m[0]=$=>l.value=!0),onDownloadFinish:m[1]||(m[1]=$=>(l.value=!1,o.value=!1))},null,8,["board-height","board-width"])]),_:1},8,["modelValue","heading"])]),_:1},8,["tooltip","disabled"])])):ct("v-if",!0)}}}),pa={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},ma=u("path",{fill:"currentColor",d:"M16 2a14 14 0 1 0 14 14A14 14 0 0 0 16 2Zm0 26a12 12 0 1 1 12-12a12 12 0 0 1-12 12Z"},null,-1),ga=u("circle",{cx:"16",cy:"23.5",r:"1.5",fill:"currentColor"},null,-1),ba=u("path",{fill:"currentColor",d:"M17 8h-1.5a4.49 4.49 0 0 0-4.5 4.5v.5h2v-.5a2.5 2.5 0 0 1 2.5-2.5H17a2.5 2.5 0 0 1 0 5h-2v4.5h2V17a4.5 4.5 0 0 0 0-9Z"},null,-1),_a=[ma,ga,ba];function ya(e,t){return E(),z("svg",pa,_a)}const wa={name:"carbon-help",render:ya},Sa={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},$a=u("path",{fill:"currentColor",d:"M22.5 4c-2 0-3.9.8-5.3 2.2L16 7.4l-1.1-1.1c-2.9-3-7.7-3-10.6-.1l-.1.1c-3 3-3 7.8 0 10.8L16 29l11.8-11.9c3-3 3-7.8 0-10.8C26.4 4.8 24.5 4 22.5 4z"},null,-1),ka=[$a];function xa(e,t){return E(),z("svg",Sa,ka)}const Pe={name:"carbon-favorite-filled",render:xa},Ca=u("hr",null,null,-1),Ta=["textContent"],Ma={rol:"grid"},Ea=u("th",{scope:"col",textContent:"Win"},null,-1),Ia=u("th",{scope:"col",textContent:"Mac"},null,-1),Da=["textContent"],Aa=u("kbd",null,"ctrl",-1),Ra=u("kbd",null,"z",-1),Oa=u("kbd",null,"\u2318",-1),za=u("kbd",null,"z",-1),Fa=["textContent"],Pa=u("kbd",null,"ctrl",-1),La=u("kbd",null,"shift",-1),Ba=u("kbd",null,"z",-1),Ga=u("kbd",null,"\u2318",-1),Na=u("kbd",null,"shift",-1),Ha=u("kbd",null,"z",-1),Ua=["textContent"],Va=u("kbd",null,"ctrl",-1),Wa=u("kbd",null,"s",-1),Ka=u("kbd",null,"\u2318",-1),Ya=u("kbd",null,"s",-1),qa=["textContent"],Xa=u("kbd",null,"f",-1),ja=[Xa],Za=u("kbd",null,"f",-1),Ja=[Za],Qa=["textContent"],ti=["textContent"],ei=["href","data-tooltip","title"],ni={rel:"noreferrer",href:"https://github.com/FRSOURCE/fast-angle",target:"_blank",title:"GitHub"},si={rel:"noreferrer",href:"https://www.frsource.org/blog/sponsoring",target:"_blank",title:"Sponsoring"},ai=u("hr",null,null,-1),ii=["textContent"],oi=["textContent"],ri=dt({__name:"BoardControlsSvgHelp",setup(e){const{t,tm:n,rt:s}=Mt(),a=H(!1);return(i,o)=>{const l=zn("RouterLink"),d=an,p=Et;return E(),z("li",null,[G(p,{tooltip:r(t)("board.nav.help.action"),"tooltip-placement":"left",onClick:o[1]||(o[1]=m=>a.value=!0),onTouchstartCapture:o[2]||(o[2]=ot(m=>a.value=!0,["prevent","stop"]))},{default:Q(()=>[G(r(wa)),G(d,{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=m=>a.value=m),heading:r(t)("board.nav.help.heading"),class:O(i.$style.modal)},{"footer-pre":Q(()=>[u("a",{rel:"noreferrer",href:"https://github.com/FRSOURCE/fast-angle",target:"_blank",title:"GitHub",class:O(i.$style.donate)},[G(r(Pe)),u("small",null,K(r(t)("main.donate_us")),1)],2)]),default:Q(()=>[u("ul",null,[ct(" eslint-disable-next-line vue/first-attribute-linebreak "),(E(!0),z(vt,null,At(r(n)("board.nav.help.content"),m=>(E(),z("li",{key:r(s)(m)},K(r(s)(m)),1))),128))]),Ca,u("div",{class:O(i.$style["hide-mobile"])},[u("h4",{textContent:K(r(t)("board.nav.help.key_bindings.heading"))},null,8,Ta),u("table",Ma,[u("thead",null,[u("tr",null,[Ea,Ia,u("th",{scope:"col",textContent:K(r(t)("board.nav.help.key_bindings.description"))},null,8,Da)])]),u("tr",null,[u("td",{scope:"col",class:O(i.$style["binding-item-wrapper"])},[u("div",{class:O(i.$style["binding-item"])},[Aa,u("small",{class:O(i.$style["binding-item-plus"])},"+",2),Ra],2)],2),u("td",{scope:"col",class:O(i.$style["binding-item-wrapper"])},[u("div",{class:O(i.$style["binding-item"])},[Oa,u("small",{class:O(i.$style["binding-item-plus"])},"+",2),za],2)],2),u("td",{scope:"col",textContent:K(r(t)("board.nav.undo"))},null,8,Fa)]),u("tr",null,[u("td",{scope:"col",class:O(i.$style["binding-item-wrapper"])},[u("div",{class:O(i.$style["binding-item"])},[Pa,u("small",{class:O(i.$style["binding-item-plus"])},"+",2),La,u("small",{class:O(i.$style["binding-item-plus"])},"+",2),Ba],2)],2),u("td",{scope:"col",class:O(i.$style["binding-item-wrapper"])},[u("div",{class:O(i.$style["binding-item"])},[Ga,u("small",{class:O(i.$style["binding-item-plus"])},"+",2),Na,u("small",{class:O(i.$style["binding-item-plus"])},"+",2),Ha],2)],2),u("td",{scope:"col",textContent:K(r(t)("board.nav.download_image.action"))},null,8,Ua)]),u("tr",null,[u("td",{scope:"col",class:O(i.$style["binding-item-wrapper"])},[u("div",{class:O(i.$style["binding-item"])},[Va,u("small",{class:O(i.$style["binding-item-plus"])},"+",2),Wa],2)],2),u("td",{scope:"col",class:O(i.$style["binding-item-wrapper"])},[u("div",{class:O(i.$style["binding-item"])},[Ka,u("small",{class:O(i.$style["binding-item-plus"])},"+",2),Ya],2)],2),u("td",{scope:"col",textContent:K(r(t)("board.nav.redo"))},null,8,qa)]),u("tr",null,[u("td",{scope:"col",class:O(i.$style["binding-item-wrapper"])},[u("div",{class:O(i.$style["binding-item"])},ja,2)],2),u("td",{scope:"col",class:O(i.$style["binding-item-wrapper"])},[u("div",{class:O(i.$style["binding-item"])},Ja,2)],2),u("td",{scope:"col",textContent:K(r(t)("board.nav.toggle_fullscreen"))},null,8,Qa)])])],2),u("h4",{textContent:K(r(t)("board.nav.help.heading_authors"))},null,8,ti),u("p",null,[it(K(r(t)("main.brought_to_you_by"))+" ",1),u("a",{href:`${r(Fn)}/`,"data-tooltip":r(t)("main.visit_our_website"),title:r(t)("main.visit_our_website")},"FRSOURCE",8,ei)]),u("p",null,[u("a",ni,[G(r(Pn)),it(" "+K(r(t)("main.star_us_on_github")),1)])]),u("p",null,[u("a",si,[G(r(Pe)),it(" "+K(r(t)("main.donate_us")),1)])]),ai,u("p",{class:O(i.$style.terms)},[G(l,{to:{name:`lang-${r(Me)}-terms`}},{default:Q(()=>[u("small",{textContent:K(r(t)("main.terms_and_conditions"))},null,8,ii)]),_:1},8,["to"]),G(l,{to:{name:`lang-${r(Me)}-privacy-policy`}},{default:Q(()=>[u("small",{textContent:K(r(t)("main.privacy_policy"))},null,8,oi)]),_:1},8,["to"])],2)]),_:1},8,["modelValue","heading","class"])]),_:1},8,["tooltip"])])}}}),li="f_4",ui="f_9",ci="f__",di={modal:li,"hide-mobile":"f_5","binding-item":"f_6","binding-item-plus":"f_7","list-item":"f_8",terms:ui,donate:ci},hi={$style:di},fi=$t(ri,[["__cssModules",hi]]),vi={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},pi=u("path",{fill:"currentColor",d:"M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"},null,-1),mi=u("path",{fill:"currentColor",d:"M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"},null,-1),gi=[pi,mi];function bi(e,t){return E(),z("svg",vi,gi)}const _i={name:"carbon-copy",render:bi},yi={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},wi=u("path",{fill:"currentColor",d:"m13 24l-9-9l1.414-1.414L13 21.171L26.586 7.586L28 9L13 24z"},null,-1),Si=[wi];function $i(e,t){return E(),z("svg",yi,Si)}const ki={name:"carbon-checkmark",render:$i},xi=dt({__name:"BoardSummaryItem",props:{value:{type:Number,default:0}},setup(e){const t=e,n=N(()=>t.value?t.value.toFixed(3):""),{copy:s,copied:a,isSupported:i}=Ln({source:n});return(o,l)=>{const d=Et;return E(),z("small",{class:O(o.$style.item),onClick:l[0]||(l[0]=()=>r(s)())},[u("div",null,[Pt(o.$slots,"default"),u("span",{class:O(o.$style.text)},[r(n)?(E(),z(vt,{key:0},[it(K(r(n))+"\xB0",1)],64)):(E(),z(vt,{key:1},[it("?")],64))],2)]),r(i)&&r(n)?(E(),lt(d,{key:0,class:O(o.$style.btn),disabled:r(a)},{default:Q(()=>[r(a)?(E(),lt(r(ki),{key:0})):(E(),lt(r(_i),{key:1}))]),_:1},8,["class","disabled"])):ct("v-if",!0)],2)}}}),Ci="f_1",Ti="f_2",Mi="f_3",Ei={item:Ci,text:Ti,btn:Mi},Ii={$style:Ei},Di=$t(xi,[["__cssModules",Ii]]),fe=4,ne=It(()=>{const e=H([]),t=H([]),n=H(fe-1);let s=()=>{},a=()=>{};st(e,T=>{t.value=[...T]},{deep:!0,flush:"sync"});const i=(T,D)=>{++n.value>=fe&&(n.value=0,e.value=[]);const A=Math.floor(n.value/2);if(n.value%2){const V=e.value[A][0];if(!V)return;e.value[A]=[V,[T,D]]}else e.value[A]=[[T,D]]},o=(T,D)=>{const A=n.value+1>=fe?0:n.value+1,V=Math.floor(A/2);if(A%2){const w=t.value[V][0];if(!w)return;t.value[V]=[w,[T,D]]}else t.value[V]=[[T,D]]},{undo:l,redo:d,canUndo:p,canRedo:m}=Jt(n),{undo:k,redo:_,canUndo:y,canRedo:$}=Jt(e,{deep:!0}),M=()=>{k(),s(),l()},R=()=>{_(),a(),d()};return be({onEventFired(T){(T.ctrlKey||T.metaKey)&&T.key==="z"&&(T.shiftKey?R():M())}}),{step:n,lines:t,drawNextPoint:i,predictNextPoint:o,undo:M,redo:R,canUndo:N(()=>p.value&&y.value),canRedo:N(()=>m.value&&$.value),registerOnUndo:T=>s=T,registerOnRedo:T=>a=T}}),rn=e=>{const[[[t,n],[s,a]],[[i,o],[l,d]]]=e,p=s-t,m=a-n,k=l-i,_=d-o,y=Math.atan2(p*_-m*k,p*k+m*_);return Math.abs(y)*(180/Math.PI)},_e=e=>N(()=>{var t,n;return(((t=e.value[0])==null?void 0:t.length)||0)<2||(((n=e.value[1])==null?void 0:n.length)||0)<2?0:rn(e.value)});function Ai(){try{return"constructor"in GestureEvent}catch{return!1}}function ln(){return typeof window<"u"&&"ontouchstart"in window}function un(e){return"pointerId"in e?null:e.type==="touchend"?e.changedTouches:e.targetTouches}function ye(e){return Array.from(un(e)).map(t=>t.identifier)}function gt(e){const t="buttons"in e?e.buttons:0,{shiftKey:n,altKey:s,metaKey:a,ctrlKey:i}=e;return{buttons:t,shiftKey:n,altKey:s,metaKey:a,ctrlKey:i}}const le=e=>e;function Le(e,t=le){const n=un(e),{clientX:s,clientY:a}=n?n[0]:e;return t([s,a])}function Be(e,t,n=le){const[s,a]=Array.from(e.touches).filter(y=>t.includes(y.identifier));if(!s||!a)throw Error("The event doesn't have two pointers matching the pointerIds");const i=a.clientX-s.clientX,o=a.clientY-s.clientY,l=(a.clientX+s.clientX)/2,d=(a.clientY+s.clientY)/2,p=Math.hypot(i,o),m=-(Math.atan2(i,o)*180)/Math.PI,k=n([p,m]),_=n([l,d]);return{values:k,origin:_}}const Ge=40,Ne=800;function cn(e,t=le){let{deltaX:n,deltaY:s,deltaMode:a}=e;return a===1?(n*=Ge,s*=Ge):a===2&&(n*=Ne,s*=Ne),t([n,s])}function He(e,t=le){return t([e.scale,e.rotation])}function dn(){}function hn(...e){return e.length===0?dn:e.length===1?e[0]:function(){var t;for(let n of e)t=n.apply(this,arguments)||t;return t}}function St(e,t){if(e===void 0){if(t===void 0)throw new Error("Must define fallback value if undefined is expected");e=t}return Array.isArray(e)?e:[e,e]}function Ue(e,t){return Object.assign({},t,e||{})}function se(e,...t){return typeof e=="function"?e(...t):e}function Ft(e){return{_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,_dragStarted:!1,_dragPreventScroll:!1,_dragIsTap:!0,_dragDelayed:!1,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:dn,canceled:!1,memo:void 0,args:void 0,...e}}function fn(){const e={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1,locked:!1},t=Ft({_pointerId:void 0,axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,tap:!1,swipe:[0,0]}),n=Ft({_pointerIds:[],da:[0,0],vdva:[0,0],origin:void 0,turns:0}),s=Ft({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),a=Ft({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),i=Ft({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:e,drag:t,pinch:n,wheel:s,move:a,scroll:i}}class Ri{constructor(t){this.classes=t,this.pointerIds=new Set,this.touchIds=new Set,this.supportsTouchEvents=ln(),this.supportsGestureEvents=Ai(),this.bind=(...n)=>{const s={};for(let a of this.classes)new a(this,n).addBindings(s);for(let a in this.nativeRefs)nt(s,a,i=>this.nativeRefs[a]({...this.state.shared,event:i,args:n}));return this.config.domTarget?Pi(this,s):Li(this,s)},this.clean=()=>{const{eventOptions:n,domTarget:s}=this.config,a=r(s);a&&Ht(a,mn(this.domListeners),n),Object.values(this.timeouts).forEach(clearTimeout),Oi(this)},this.classes=t,this.state=fn(),this.timeouts={},this.domListeners=[],this.windowListeners={}}}function vn(e,t){"pointerId"in t?e.pointerIds.add(t.pointerId):e.touchIds=new Set(ye(t))}function pn(e,t){"pointerId"in t?e.pointerIds.delete(t.pointerId):ye(t).forEach(n=>e.touchIds.delete(n))}function Oi(e){const{config:{window:t,eventOptions:n},windowListeners:s}=e,a=r(t);if(!!a){for(let i in s){const o=s[i];Ht(a,o,n)}e.windowListeners={}}}function zi({config:e,windowListeners:t},n,s=e.eventOptions){const a=r(e.window);!a||(Ht(a,t[n],s),delete t[n])}function Fi({config:e,windowListeners:t},n,s=[],a=e.eventOptions){const i=r(e.window);!i||(Ht(i,t[n],a),gn(i,t[n]=s,a))}function Pi({config:e,domListeners:t},n){const{eventOptions:s,domTarget:a}=e,i=r(a);if(!i)throw new Error("domTarget must be defined");Ht(i,mn(t),s);for(let[o,l]of Object.entries(n)){const d=o.slice(2).toLowerCase();t.push([d,hn(...l)])}gn(i,t,s)}function Li({config:e},t){const n={},s=e.eventOptions.capture?"Capture":"";for(let[a,i]of Object.entries(t)){const o=Array.isArray(i)?i:[i],l=a+s;n[l]=hn(...o)}return n}function mn(e=[]){return e.splice(0,e.length)}function nt(e,t,n){e[t]||(e[t]=[]),e[t].push(n)}function gn(e,t=[],n={}){if(!!e)for(let[s,a]of t)e.addEventListener(s,a,n)}function Ht(e,t=[],n={}){if(!!e)for(let[s,a]of t)e.removeEventListener(s,a,n)}function ae(e,t){return e.map((n,s)=>n+t[s])}function we(e,t){return e.map((n,s)=>n-t[s])}function Gt(e){return Math.hypot(...e)}function Bi(e,t=e){const n=Gt(t),s=n===0?0:1/n,a=t.map(o=>s*o);return{distance:Gt(e),direction:a}}function bn(e,t,n){const s=Gt(t),a=s===0?0:1/s,i=n===0?0:1/n,o=i*s,l=t.map(m=>i*m),d=t.map(m=>a*m),p=Gt(e);return{velocities:l,velocity:o,distance:p,direction:d}}function ie(e){return Math.sign?Math.sign(e):Number(e>0)-Number(e<0)||+e}function Gi(e,t,n){return Math.max(t,Math.min(e,n))}function Ni(e,t){return Math.pow(e,t*5)}function Ve(e,t,n){return t===0||Math.abs(t)===1/0?Ni(e,n):e*t*n/(t+n*e)}function We(e,t,n,s=.15){return s===0?Gi(e,t,n):e<t?-Ve(t-e,n-t,s)+t:e>n?+Ve(e-n,n-t,s)+n:e}const bt=new Map,Hi=e=>e;class _n{constructor(t,n=[]){this.controller=t,this.args=n,this.debounced=!0,this.setTimeout=(s,a=140,...i)=>{clearTimeout(this.controller.timeouts[this.stateKey]),this.controller.timeouts[this.stateKey]=window.setTimeout(s,a,...i)},this.clearTimeout=()=>{clearTimeout(this.controller.timeouts[this.stateKey])},this.fireGestureHandler=(s=!1)=>{if(this.state._blocked)return this.debounced||(this.state._active=!1,this.clean()),null;if(!s&&!this.state.intentional&&!this.config.triggerAllEvents)return null;if(this.state.intentional){const d=this.state.active,p=this.state._active;this.state.active=p,this.state.first=p&&!d,this.state.last=d&&!p,this.controller.state.shared[this.ingKey]=p}const a=this.controller.pointerIds.size||this.controller.touchIds.size,i=this.controller.state.shared.buttons>0||a>0,o={...this.controller.state.shared,...this.state,...this.mapStateValues(this.state),locked:!!document.pointerLockElement,touches:a,down:i},l=this.handler(o);return this.state.memo=l!==void 0?l:this.state.memo,o},this.controller=t,this.args=n}get config(){return this.controller.config[this.stateKey]}get enabled(){return this.controller.config.enabled&&this.config.enabled}get state(){return this.controller.state[this.stateKey]}get handler(){return this.controller.handlers[this.stateKey]}get transform(){return this.config.transform||this.controller.config.transform||Hi}updateSharedState(t){Object.assign(this.controller.state.shared,t)}updateGestureState(t){Object.assign(this.state,t)}checkIntentionality(t,n){return{_intentional:t,_blocked:!1}}getMovement(t){const{rubberband:n,threshold:s}=this.config,{_bounds:a,_initial:i,_active:o,_intentional:l,lastOffset:d,movement:p}=this.state,m=this.getInternalMovement(t,this.state),k=this.transform(s).map(Math.abs),_=l[0]===!1?Ke(m[0],k[0]):l[0],y=l[1]===!1?Ke(m[1],k[1]):l[1],$=this.checkIntentionality([_,y],m);if($._blocked)return{...$,_movement:m,delta:[0,0]};const M=$._intentional,R=m;let T=[M[0]!==!1?m[0]-M[0]:0,M[1]!==!1?m[1]-M[1]:0];const D=ae(T,d),A=o?n:[0,0];return T=Ye(a,ae(T,i),A),{...$,intentional:M[0]!==!1||M[1]!==!1,_initial:i,_movement:R,movement:T,values:t,offset:Ye(a,D,A),delta:we(T,p)}}clean(){this.clearTimeout()}}function Ke(e,t){return Math.abs(e)>=t?ie(e)*t:!1}function Ye(e,[t,n],[s,a]){const[[i,o],[l,d]]=e;return[We(t,i,o,s),We(n,l,d,a)]}function rt({state:e},t,n){const{timeStamp:s,type:a}=t,i=e.values,o=n?0:s-e.startTime;return{_lastEventType:a,event:t,timeStamp:s,elapsedTime:o,previous:i}}function Bt({state:e,config:t,stateKey:n,args:s},a,i){const o=e.offset,l=i.timeStamp,{initial:d,bounds:p}=t,m={...fn()[n],_active:!0,args:s,values:a,initial:a,offset:o,lastOffset:o,startTime:l};return{...m,_initial:se(d,m),_bounds:se(p,m)}}class yn extends _n{getInternalMovement(t,n){return we(t,n.initial)}checkIntentionality(t,n){if(t[0]===!1&&t[1]===!1)return{_intentional:t,axis:this.state.axis};const[s,a]=n.map(Math.abs),i=this.state.axis||(s>a?"x":s<a?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:t,_blocked:!1,axis:i}:i?!!this.config.axis&&i!==this.config.axis?{_intentional:t,_blocked:!0,axis:i}:(t[i==="x"?1:0]=!1,{_intentional:t,_blocked:!1,axis:i}):{_intentional:[!1,!1],_blocked:!1,axis:i}}getKinematics(t,n){const s=this.getMovement(t);if(!s._blocked){const a=n.timeStamp-this.state.timeStamp;Object.assign(s,bn(s.movement,s.delta,a))}return s}mapStateValues(t){return{xy:t.values,vxvy:t.velocities}}}const Ui=3;function qe(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}class Vi extends yn{constructor(){super(...arguments),this.ingKey="dragging",this.stateKey="drag",this.setPointerCapture=t=>{if(this.config.useTouch||document.pointerLockElement)return;const{target:n,pointerId:s}=t;n&&"setPointerCapture"in n&&n.setPointerCapture(s),this.updateGestureState({_dragTarget:n,_dragPointerId:s})},this.releasePointerCapture=()=>{if(this.config.useTouch||document.pointerLockElement)return;const{_dragTarget:t,_dragPointerId:n}=this.state;if(n&&t&&"releasePointerCapture"in t&&(!("hasPointerCapture"in t)||t.hasPointerCapture(n)))try{t.releasePointerCapture(n)}catch{}},this.preventScroll=t=>{this.state._dragPreventScroll&&t.cancelable&&t.preventDefault()},this.getEventId=t=>this.config.useTouch?t.changedTouches[0].identifier:t.pointerId,this.isValidEvent=t=>this.state._pointerId===this.getEventId(t),this.shouldPreventWindowScrollY=this.config.preventWindowScrollY&&this.controller.supportsTouchEvents,this.setUpWindowScrollDetection=t=>{qe(t),Fi(this.controller,this.stateKey,[["touchmove",this.preventScroll],["touchend",this.clean.bind(this)],["touchcancel",this.clean.bind(this)]],{passive:!1}),this.setTimeout(this.startDrag.bind(this),250,t)},this.setUpDelayedDragTrigger=t=>{this.state._dragDelayed=!0,qe(t),this.setTimeout(this.startDrag.bind(this),this.config.delay,t)},this.setStartState=t=>{const n=Le(t,this.transform);this.updateSharedState(gt(t)),this.updateGestureState({...Bt(this,n,t),...rt(this,t,!0),_pointerId:this.getEventId(t)}),this.updateGestureState(this.getMovement(n))},this.onDragStart=t=>{vn(this.controller,t),!(!this.enabled||this.state._active)&&(this.setStartState(t),this.setPointerCapture(t),this.shouldPreventWindowScrollY?this.setUpWindowScrollDetection(t):this.config.delay>0?this.setUpDelayedDragTrigger(t):this.startDrag(t,!0))},this.onDragChange=t=>{if(this.state.canceled||!this.state._active||!this.isValidEvent(t)||this.state._lastEventType===t.type&&t.timeStamp===this.state.timeStamp)return;let n;if(document.pointerLockElement){const{movementX:d,movementY:p}=t;n=ae(this.transform([d,p]),this.state.values)}else n=Le(t,this.transform);const s=this.getKinematics(n,t);if(!this.state._dragStarted){if(this.state._dragDelayed){this.startDrag(t);return}if(this.shouldPreventWindowScrollY)if(!this.state._dragPreventScroll&&s.axis)if(s.axis==="x")this.startDrag(t);else{this.state._active=!1;return}else return;else return}const a=gt(t);this.updateSharedState(a);const i=rt(this,t),o=Gt(s._movement);let{_dragIsTap:l}=this.state;l&&o>=Ui&&(l=!1),this.updateGestureState({...i,...s,_dragIsTap:l}),this.fireGestureHandler()},this.onDragEnd=t=>{if(pn(this.controller,t),!this.isValidEvent(t)||(this.clean(),!this.state._active))return;this.state._active=!1;const n=this.state._dragIsTap,[s,a]=this.state.velocities,[i,o]=this.state.movement,[l,d]=this.state._intentional,[p,m]=this.config.swipeVelocity,[k,_]=this.config.swipeDistance,y=this.config.swipeDuration,$={...rt(this,t),...this.getMovement(this.state.values)},M=[0,0];$.elapsedTime<y&&(l!==!1&&Math.abs(s)>p&&Math.abs(i)>k&&(M[0]=ie(s)),d!==!1&&Math.abs(a)>m&&Math.abs(o)>_&&(M[1]=ie(a))),this.updateSharedState({buttons:0}),this.updateGestureState({...$,tap:n,swipe:M}),this.fireGestureHandler(this.config.filterTaps&&n===!0)},this.clean=()=>{super.clean(),this.state._dragStarted=!1,this.releasePointerCapture(),zi(this.controller,this.stateKey)},this.onCancel=()=>{this.state.canceled||(this.updateGestureState({canceled:!0,_active:!1}),this.updateSharedState({buttons:0}),Bn(this.fireGestureHandler))},this.onClick=t=>{this.state._dragIsTap||t.stopPropagation()}}startDrag(t,n=!1){!this.state._active||this.state._dragStarted||(n||this.setStartState(t),this.updateGestureState({_dragStarted:!0,_dragPreventScroll:!0,cancel:this.onCancel}),this.clearTimeout(),this.fireGestureHandler())}addBindings(t){if(this.config.useTouch?(nt(t,"onTouchStart",this.onDragStart),nt(t,"onTouchMove",this.onDragChange),nt(t,"onTouchEnd",this.onDragEnd),nt(t,"onTouchCancel",this.onDragEnd)):(nt(t,"onPointerDown",this.onDragStart),nt(t,"onPointerMove",this.onDragChange),nt(t,"onPointerUp",this.onDragEnd),nt(t,"onPointerCancel",this.onDragEnd)),this.config.filterTaps){const n=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";nt(t,n,this.onClick)}}}function Se(e,t){let n,s=[],a,i=!1;function o(...l){return i&&n===this&&t(l,s)||(a=e.apply(this,l),i=!0,n=this,s=l),a}return o}function Zt(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;let n,s,a;if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!Zt(e[s],t[s]))return!1;return!0}let i;if(typeof Map=="function"&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i=e.entries();!(s=i.next()).done;)if(!t.has(s.value[0]))return!1;for(i=e.entries();!(s=i.next()).done;)if(!Zt(s.value[1],t.get(s.value[0])))return!1;return!0}if(typeof Set=="function"&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i=e.entries();!(s=i.next()).done;)if(!t.has(s.value[0]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[s]))return!1;if(typeof Element<"u"&&e instanceof Element)return!1;for(s=n;s--!==0;)if(!(a[s]==="_owner"&&e.$$typeof)&&!Zt(e[a[s]],t[a[s]]))return!1;return!0}return e!==e&&t!==t}function $e(e,t){try{return Zt(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}function Ut(e={},t){const n={};for(const[s,a]of Object.entries(t))switch(typeof a){case"function":n[s]=a.call(n,e[s],s,e);break;case"object":n[s]=Ut(e[s],a);break;case"boolean":a&&(n[s]=e[s]);break}return n}const Wi=180,Ki=.15,Yi=.5,qi=50,Xi=250,wn={threshold(e=0){return St(e)},rubberband(e=0){switch(e){case!0:return St(Ki);case!1:return St(0);default:return St(e)}},enabled(e=!0){return e},triggerAllEvents(e=!1){return e},initial(e=0){return typeof e=="function"?e:St(e)},transform:!0},ke={...wn,axis:!0,lockDirection(e=!1){return e},bounds(e={}){if(typeof e=="function")return i=>ke.bounds(e(i));const{left:t=-1/0,right:n=1/0,top:s=-1/0,bottom:a=1/0}=e;return[[t,n],[s,a]]}},ji=typeof window<"u"&&window.document&&window.document.createElement,Zi={enabled(e=!0){return e},domTarget:!0,window(e=ji?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform:!0},Ji={...wn,bounds(e,t,{distanceBounds:n={},angleBounds:s={}}){const a=o=>{const l=Ue(se(n,o),{min:-1/0,max:1/0});return[l.min,l.max]},i=o=>{const l=Ue(se(s,o),{min:-1/0,max:1/0});return[l.min,l.max]};return typeof n!="function"&&typeof s!="function"?[a(),i()]:o=>[a(o),i(o)]}},Qi={...ke,useTouch(e=!0){return e&&ln()},preventWindowScrollY(e=!1){return e},threshold(e,t,{filterTaps:n=!1,lockDirection:s=!1,axis:a=void 0}){const i=St(e,n?3:s||a?1:0);return this.filterTaps=n,i},swipeVelocity(e=Yi){return St(e)},swipeDistance(e=qi){return St(e)},swipeDuration(e=Xi){return e},delay(e=0){switch(e){case!0:return Wi;case!1:return 0;default:return e}}};function xe(e){return Ut(e,Zi)}function to(e={}){return Ut(e,ke)}function eo(e={}){return Ut(e,Ji)}function no(e={}){return Ut(e,Qi)}function so({domTarget:e,eventOptions:t,window:n,enabled:s,...a}){const i=xe({domTarget:e,eventOptions:t,window:n,enabled:s});return i.drag=no(a),i}function ao({domTarget:e,eventOptions:t,window:n,enabled:s,...a}){const i=xe({domTarget:e,eventOptions:t,window:n,enabled:s});return i.pinch=eo(a),i}function io({domTarget:e,eventOptions:t,window:n,enabled:s,...a}){const i=xe({domTarget:e,eventOptions:t,window:n,enabled:s});return i.wheel=to(a),i}function Ce(e,t,n={}){const s=oo(e),a=new Ri(s);return a.config=t,a.handlers=e,a.nativeRefs=n,Gn()&&!t.manual&&(Nn(a.bind),Hn(a.clean)),a}function oo(e){const t=new Set;return e.drag&&t.add(bt.get("drag")),e.wheel&&t.add(bt.get("wheel")),e.scroll&&t.add(bt.get("scroll")),e.move&&t.add(bt.get("move")),e.pinch&&t.add(bt.get("pinch")),e.hover&&t.add(bt.get("hover")),t}function ro(e,t={}){bt.set("drag",Vi);const n=H();return n.value||(n.value=Se(so,$e)),Ce({drag:e},n.value(t))}class lo extends _n{getInternalMovement(t,n){const s=n.values[1];let[a,i=s]=t,o=i-s,l=n.turns;return Math.abs(o)>270&&(l+=ie(o)),we([a,i-360*l],n.initial)}getKinematics(t,n){const s=this.getMovement(t),a=(t[1]-s._movement[1]-this.state.initial[1])/360,i=n.timeStamp-this.state.timeStamp,{distance:o,velocity:l,...d}=bn(s.movement,s.delta,i);return{turns:a,...s,...d}}mapStateValues(t){return{da:t.values,vdva:t.velocities}}}const uo=7,co=260;class ho extends lo{constructor(){super(...arguments),this.ingKey="pinching",this.stateKey="pinch",this.onPinchStart=t=>{vn(this.controller,t);const n=this.controller.touchIds;if(!this.enabled||this.state._active&&this.state._pointerIds.every(o=>n.has(o))||n.size<2)return;const s=Array.from(n).slice(0,2),{values:a,origin:i}=Be(t,s,this.transform);this.updateSharedState(gt(t)),this.updateGestureState({...Bt(this,a,t),...rt(this,t,!0),_pointerIds:s,cancel:this.onCancel,origin:i}),this.updateGestureState(this.getMovement(a)),this.fireGestureHandler()},this.onPinchChange=t=>{const{canceled:n,_active:s}=this.state;if(n||!s||t.timeStamp===this.state.timeStamp)return;const a=gt(t);this.updateSharedState(a);try{const{values:i,origin:o}=Be(t,this.state._pointerIds,this.transform),l=this.getKinematics(i,t);this.updateGestureState({...rt(this,t),...l,origin:o}),this.fireGestureHandler()}catch{this.onPinchEnd(t)}},this.onPinchEnd=t=>{pn(this.controller,t);const n=ye(t);this.state._pointerIds.every(s=>!n.includes(s))||(this.clean(),this.state._active&&(this.updateGestureState({...rt(this,t),...this.getMovement(this.state.values),_active:!1}),this.fireGestureHandler()))},this.onCancel=()=>{this.state.canceled||(this.updateGestureState({_active:!1,canceled:!0}),this.fireGestureHandler())},this.onGestureStart=t=>{if(!this.enabled)return;t.preventDefault();const n=He(t,this.transform);this.updateSharedState(gt(t)),this.updateGestureState({...Bt(this,n,t),...rt(this,t,!0),origin:[t.clientX,t.clientY],cancel:this.onCancel}),this.updateGestureState(this.getMovement(n)),this.fireGestureHandler()},this.onGestureChange=t=>{const{canceled:n,_active:s}=this.state;if(n||!s)return;t.preventDefault();const a=gt(t);this.updateSharedState(a);const i=He(t,this.transform);i[0]=(i[0]-this.state.event.scale)*co+this.state.values[0];const o=this.getKinematics(i,t);this.updateGestureState({...rt(this,t),...o,origin:[t.clientX,t.clientY]}),this.fireGestureHandler()},this.onGestureEnd=t=>{this.clean(),this.state._active&&(this.updateGestureState({...rt(this,t),...this.getMovement(this.state.values),_active:!1,origin:[t.clientX,t.clientY]}),this.fireGestureHandler())},this.wheelShouldRun=t=>this.enabled&&t.ctrlKey,this.getWheelValuesFromEvent=t=>{const[,n]=cn(t,this.transform),{values:[s,a]}=this.state;return{values:[s-n*uo,a!==void 0?a:0],origin:[t.clientX,t.clientY],delta:[0,n]}},this.onWheel=t=>{!this.wheelShouldRun(t)||(this.setTimeout(this.onWheelEnd),this.state._active?this.onWheelChange(t):this.onWheelStart(t))},this.onWheelStart=t=>{const{values:n,delta:s,origin:a}=this.getWheelValuesFromEvent(t);t.cancelable&&t.preventDefault(),this.updateSharedState(gt(t)),this.updateGestureState({...Bt(this,n,t),...rt(this,t,!0),initial:this.state.values,offset:n,delta:s,origin:a}),this.updateGestureState(this.getMovement(n)),this.fireGestureHandler()},this.onWheelChange=t=>{t.cancelable&&t.preventDefault(),this.updateSharedState(gt(t));const{values:n,origin:s,delta:a}=this.getWheelValuesFromEvent(t);this.updateGestureState({...rt(this,t),...this.getKinematics(n,t),origin:s,delta:a}),this.fireGestureHandler()},this.onWheelEnd=()=>{this.clean(),this.state._active&&(this.state._active=!1,this.updateGestureState(this.getMovement(this.state.values)),this.fireGestureHandler())}}addBindings(t){this.controller.config.domTarget&&!this.controller.supportsTouchEvents&&this.controller.supportsGestureEvents?(nt(t,"onGestureStart",this.onGestureStart),nt(t,"onGestureChange",this.onGestureChange),nt(t,"onGestureEnd",this.onGestureEnd)):(nt(t,"onTouchStart",this.onPinchStart),nt(t,"onTouchMove",this.onPinchChange),nt(t,"onTouchEnd",this.onPinchEnd),nt(t,"onTouchCancel",this.onPinchEnd),nt(t,"onWheel",this.onWheel))}}class fo extends yn{constructor(){super(...arguments),this.ingKey="wheeling",this.stateKey="wheel",this.debounced=!0,this.handleEvent=t=>{if(t.ctrlKey&&"pinch"in this.controller.handlers||!this.enabled)return;this.setTimeout(this.onEnd),this.updateSharedState(gt(t));const n=ae(cn(t,this.transform),this.state.values);if(this.state._active)this.updateGestureState({...rt(this,t),...this.getKinematics(n,t)});else{this.updateGestureState({...Bt(this,n,t),...rt(this,t,!0),initial:this.state.values});const s=this.getMovement(n),a=Bi(s.delta);this.updateGestureState(s),this.updateGestureState(a)}this.fireGestureHandler()},this.onEnd=()=>{if(this.clean(),!this.state._active)return;const t=this.getMovement(this.state.values);this.updateGestureState(t),this.updateGestureState({_active:!1,velocities:[0,0],velocity:0}),this.fireGestureHandler()}}addBindings(t){nt(t,"onWheel",this.handleEvent)}}function vo(e,t={}){bt.set("pinch",ho);const n=H();return n.value||(n.value=Se(ao,$e)),Ce({pinch:e},n.value(t))}function po(e,t={}){bt.set("wheel",fo);const n=H();return n.value||(n.value=Se(io,$e)),Ce({wheel:e},n.value(t))}const mo=(e,t)=>{const n=Un(t),s=N(()=>{var _,y;return(y=(_=r(n))==null?void 0:_.enabled)!=null?y:!0}),a=H(!1),i=H([0,0]),o=H(1),l=N({set(_){return _>10?o.value=10:_<.1?o.value=.1:o.value=_,o.value},get(){return o.value}}),d=H([0,0]),p=N(()=>{var _;return(_=me(e))==null?void 0:_.getBoundingClientRect()}),m=_=>(_=(_+1800)/1800,_<=0?.01:_),k=({wheeling:_,dragging:y,pinching:$,intentional:M,enabled:R,touches:T,metaKey:D,ctrlKey:A,altKey:V})=>{const w=!R||!M?!1:y&&(T===2||D||V)||$||_&&!A;return a.value?requestAnimationFrame(()=>a.value=w):a.value=w,w};return ro(({wheeling:_,dragging:y,pinching:$,touches:M,intentional:R,delta:T,metaKey:D,ctrlKey:A,altKey:V})=>{!k({wheeling:_,dragging:y,pinching:$,intentional:R,enabled:s.value,metaKey:D,ctrlKey:A,altKey:V,touches:M})||(i.value[0]+=T[0],i.value[1]+=T[1])},{domTarget:e,filterTaps:!0}),po(({event:_,delta:y,wheeling:$,dragging:M,pinching:R,touches:T,intentional:D,metaKey:A,ctrlKey:V,altKey:w})=>{!k({dragging:M,pinching:R,wheeling:$,intentional:D,enabled:s.value,touches:T,metaKey:A,ctrlKey:V,altKey:w})||(_.preventDefault(),i.value[0]+=y[0],i.value[1]+=y[1])},{domTarget:e,eventOptions:{passive:!1}}),vo(({offset:[_],origin:y,pinching:$,dragging:M,wheeling:R,metaKey:T,ctrlKey:D,altKey:A,touches:V,intentional:w})=>{if(!k({dragging:M,pinching:$,wheeling:R,intentional:w,enabled:s.value,touches:V,metaKey:T,altKey:A,ctrlKey:D}))return;const g=l.value;l.value=m(_),p.value&&(y[0]-=p.value.x,y[1]-=p.value.y,i.value[0]-=(y[0]-p.value.width/2)*(l.value-g),i.value[1]-=(y[1]-p.value.height/2)*(l.value-g)),i.value[0]-=y[0]-d.value[0],i.value[1]-=y[1]-d.value[1],d.value=y},{domTarget:e,eventOptions:{passive:!1},distanceBounds:()=>({min:-1800,max:16200})}),{offset:N(()=>[i.value[0]+d.value[0],i.value[1]+d.value[1]]),zoom:l,transformOrigin:d,active:a}},Sn=It(()=>mo(oe())),$n=It(()=>{const e=H(""),t=H(0),n=H(0);return{src:e,width:t,height:n,processFiles:a=>{if(!((a==null?void 0:a[0])instanceof File))return;const i=new FileReader;i.addEventListener("load",o=>{var l;if((l=o.target)!=null&&l.result){const d=new Image;d.onload=()=>{e.value=d.src,t.value=d.width,n.value=d.height},d.src=o.target.result.toString()}}),i.readAsDataURL(a[0])}}}),go={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},bo=u("path",{fill:"currentColor",d:"M20 2v2h6.586L18 12.582L19.414 14L28 5.414V12h2V2H20zm-6 17.416L12.592 18L4 26.586V20H2v10h10v-2H5.414L14 19.416z"},null,-1),_o=[bo];function yo(e,t){return E(),z("svg",go,_o)}const wo={name:"carbon-maximize",render:yo},So={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},$o=u("path",{fill:"currentColor",d:"M4 18v2h6.586L2 28.582L3.414 30L12 21.414V28h2V18H4zM30 3.416L28.592 2L20 10.586V4h-2v10h10v-2h-6.586L30 3.416z"},null,-1),ko=[$o];function xo(e,t){return E(),z("svg",So,ko)}const Co={name:"carbon-minimize",render:xo},To={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Mo=u("path",{fill:"currentColor",d:"M18 12h-4V8h-2v4H8v2h4v4h2v-4h4v-2z"},null,-1),Eo=u("path",{fill:"currentColor",d:"M21.448 20A10.856 10.856 0 0 0 24 13a11 11 0 1 0-11 11a10.856 10.856 0 0 0 7-2.552L27.586 29L29 27.586ZM13 22a9 9 0 1 1 9-9a9.01 9.01 0 0 1-9 9Z"},null,-1),Io=[Mo,Eo];function Do(e,t){return E(),z("svg",To,Io)}const Ao={name:"carbon-zoom-in",render:Do},Ro={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Oo=u("path",{fill:"currentColor",d:"M8 12h10v2H8z"},null,-1),zo=u("path",{fill:"currentColor",d:"M21.448 20A10.856 10.856 0 0 0 24 13a11 11 0 1 0-11 11a10.856 10.856 0 0 0 7-2.552L27.586 29L29 27.586ZM13 22a9 9 0 1 1 9-9a9.01 9.01 0 0 1-9 9Z"},null,-1),Fo=[Oo,zo];function Po(e,t){return E(),z("svg",Ro,Fo)}const Lo={name:"carbon-zoom-out",render:Po},Bo={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Go=u("path",{fill:"currentColor",d:"M4 20v2h4.586L2 28.586L3.414 30L10 23.414V28h2v-8H4zm15-6a3 3 0 1 0-3-3a3 3 0 0 0 3 3zm0-4a1 1 0 1 1-1 1a1 1 0 0 1 1-1z"},null,-1),No=u("path",{fill:"currentColor",d:"M26 4H6a2 2 0 0 0-2 2v10h2V6h20v15.17l-3.59-3.59a2 2 0 0 0-2.82 0L18 19.17L11.83 13l-1.414 1.415L14 18l2.59 2.59a2 2 0 0 0 2.82 0L21 19l5 5v2H16v2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Z"},null,-1),Ho=[Go,No];function Uo(e,t){return E(),z("svg",Bo,Ho)}const Vo={name:"carbon-image-reference",render:Uo},Wo={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Ko=u("path",{d:"M9 24a3.51 3.51 0 0 0-.88-1.86l9.53-16.58l-1.73-1l-9.57 16.56A3.06 3.06 0 0 0 5.5 21a3.5 3.5 0 1 0 3.15 5H28v-2zm-3.5 2A1.5 1.5 0 1 1 7 24.5A1.5 1.5 0 0 1 5.5 26z",fill:"currentColor"},null,-1),Yo=u("path",{d:"M22 21h2a13 13 0 0 0-5.42-10.56l-1.16 1.62A11 11 0 0 1 22 21z",fill:"currentColor"},null,-1),qo=[Ko,Yo];function Xo(e,t){return E(),z("svg",Wo,qo)}const jo={name:"carbon-angle",render:Xo},Zo={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Jo=u("path",{fill:"currentColor",d:"M20 10H7.815l3.587-3.586L10 5l-6 6l6 6l1.402-1.415L7.818 12H20a6 6 0 0 1 0 12h-8v2h8a8 8 0 0 0 0-16Z"},null,-1),Qo=[Jo];function tr(e,t){return E(),z("svg",Zo,Qo)}const er={name:"carbon-undo",render:tr},nr={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},sr=u("path",{fill:"currentColor",d:"M12 10h12.185l-3.587-3.586L22 5l6 6l-6 6l-1.402-1.415L24.182 12H12a6 6 0 0 0 0 12h8v2h-8a8 8 0 0 1 0-16Z"},null,-1),ar=[sr];function ir(e,t){return E(),z("svg",nr,ar)}const or={name:"carbon-redo",render:ir},rr={width:"1.2em",height:"1.2em",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor"},lr=u("path",{d:"M18.3 26a3.5 3.5 0 006.6-3.05 3 3 0 00-.7-.8l7.53-15.58-1.73-1-7.57 15.56a2.7 2.7 0 00-.8-.1 3.5 3.5 0 00-3.33 2.97h-17.973v2Zm3.4.1a1.5 1.5 0 111.5-1.5 1.5 1.5 0 01-1.5 1.5Z"},null,-1),ur=u("path",{d:"M3.75 21.25a13.2 13.2 90 0120.25-10.56l-.87 1.44a11.75 11.75 90 00-17.6 9.13z"},null,-1),cr=[lr,ur];function dr(e,t){return E(),z("svg",rr,cr)}const hr={name:"custom-angle-obtuse",render:dr},fr={class:"d-none md-d-inline-block"},vr={class:"d-none md-d-inline-block"},pr={key:0},mr=dt({__name:"BoardControls",props:{info:{type:Array,required:!0}},setup(e){const{t}=Mt(),{lines:n}=ne(),s=_e(n),{zoom:a,transformOrigin:i}=Sn(),o=re(),l=oe(),d=N(()=>{const F=me(l);return F?F.viewBox.baseVal:{x:0,y:0,width:0,height:0}}),p=()=>{i.value=[(d.value.width/2-(d.value.x+d.value.width/2)/2)*a.value,(d.value.height/2-(d.value.y+d.value.height/2)/2)*a.value]},m=()=>{p(),a.value+=.1},k=()=>{p(),a.value-=.1},{toggle:_,isFullscreen:y,isSupported:$}=Vn(o),{undo:M,redo:R,canUndo:T,canRedo:D}=ne(),A=N(()=>`${t("board.nav.undo")} [ctrl\xA0+\xA0z][\u2318\xA0+\xA0z]`),V=N(()=>`${t("board.nav.redo")} [ctrl\xA0+\xA0shift\xA0+\xA0z][\u2318\xA0+ shift +\xA0z]`),w=H();st(s,F=>F===void 0?w.value=void 0:w.value=F>90?180-F:F);const g=N(()=>w.value?180-w.value:void 0),{processFiles:S}=$n(),{files:L,open:Y}=Wn({multiple:!1,accept:"image/*"});return Kn(L,F=>{S(Array.from(F))}),Ze("f",_),(F,f)=>{const J=Di,q=fi,Z=Et,U=va;return E(),z("div",{class:O([F.$style.bar,"pointer-none"])},[u("div",{class:O(["pointer-all bg-bg-transparent-inverse text-inverse whitespace-nowrap",F.$style["info-box"]]),onMousemoveCapture:f[0]||(f[0]=ot(()=>{},["prevent","stop"]))},[G(J,{value:w.value},{default:Q(()=>[G(r(jo))]),_:1},8,["value"]),G(J,{value:r(g)},{default:Q(()=>[G(r(hr))]),_:1},8,["value"])],34),(E(!0),z(vt,null,At(e.info,et=>(E(),z("li",{key:et,class:O(["bg-bg-transparent-inverse text-inverse min-w-0",F.$style["info-box"]])},[u("small",null,K(et),1)],2))),128)),u("nav",{class:O(F.$style.nav)},[u("ul",{class:O(["pointer-all",F.$style.nav__btns])},[G(q),u("li",null,[G(Z,{disabled:!r(T),tooltip:r(A),"tooltip-placement":"left",onClick:r(M),onTouchstartCapture:ot(r(M),["prevent","stop"])},{default:Q(()=>[G(r(er))]),_:1},8,["disabled","tooltip","onClick","onTouchstartCapture"])]),u("li",null,[G(Z,{disabled:!r(D),tooltip:r(V),"tooltip-placement":"left",onClick:r(R),onTouchstartCapture:ot(r(R),["prevent","stop"])},{default:Q(()=>[G(r(or))]),_:1},8,["disabled","tooltip","onClick","onTouchstartCapture"])]),G(U,{disabled:r(T)},null,8,["disabled"]),u("li",null,[G(Z,{tooltip:r(t)("board.nav.upload_file"),"tooltip-placement":"left",onClick:f[1]||(f[1]=et=>r(Y)()),onTouchstartCapture:f[2]||(f[2]=ot(et=>r(Y)(),["prevent","stop"]))},{default:Q(()=>[G(r(Vo))]),_:1},8,["tooltip"])]),u("li",fr,[G(Z,{disabled:!r(T),tooltip:`${r(t)("board.result.zoom_out")} [-]`,"tooltip-placement":"left",onClick:f[3]||(f[3]=et=>k()),onTouchstartCapture:f[4]||(f[4]=ot(et=>k(),["prevent","stop"]))},{default:Q(()=>[G(r(Lo))]),_:1},8,["disabled","tooltip"])]),u("li",vr,[G(Z,{disabled:!r(T),tooltip:`${r(t)("board.result.zoom_in")} [+]`,"tooltip-placement":"left",onClick:f[5]||(f[5]=et=>m()),onTouchstartCapture:f[6]||(f[6]=ot(et=>m(),["prevent","stop"]))},{default:Q(()=>[G(r(Ao))]),_:1},8,["disabled","tooltip"])]),r($)?(E(),z("li",pr,[G(Z,{tooltip:`${r(t)("board.nav.toggle_fullscreen")} [f]`,"tooltip-placement":"left",onClick:r(_),onTouchstartCapture:ot(r(_),["prevent","stop"])},{default:Q(()=>[r(y)?(E(),lt(r(Co),{key:0})):(E(),lt(r(wo),{key:1}))]),_:1},8,["tooltip","onClick","onTouchstartCapture"])])):ct("v-if",!0)],2)],2)],2)}}}),gr="f_t",br="f_u",_r={bar:gr,nav__btns:br,"info-box":"f_v"},yr={$style:_r},wr=$t(mr,[["__cssModules",yr]]),Sr=["x1","y1","x2","y2"],$r=dt({__name:"Segment",props:{pointStart:{type:Array,default:void 0},pointStop:{type:Array,default:void 0}},setup(e){return(t,n)=>e.pointStart&&e.pointStop?(E(),z("line",{key:0,x1:e.pointStart[0],y1:e.pointStart[1],x2:e.pointStop[0],y2:e.pointStop[1]},null,8,Sr)):ct("v-if",!0)}}),kr=Yn((e,t,n,s)=>{if(!e||!t||!n||!s)return;e===n&&(e+=.1);const a=(t-s)/(e-n),i=s-n*a;return{slope:a,intercept:i}}),Nt=e=>N(()=>kr(...e.value[0]||[],...e.value[1]||[]));var Dt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var kn={};(function(e){var t=Dt&&Dt.__extends||function(){var P=function(h,v){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,I){x.__proto__=I}||function(x,I){for(var c in I)Object.prototype.hasOwnProperty.call(I,c)&&(x[c]=I[c])},P(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");P(h,v);function x(){this.constructor=h}h.prototype=v===null?Object.create(v):(x.prototype=v.prototype,new x)}}(),n=Dt&&Dt.__classPrivateFieldSet||function(P,h,v){if(!h.has(P))throw new TypeError("attempted to set private field on non-instance");return h.set(P,v),v},s=Dt&&Dt.__classPrivateFieldGet||function(P,h){if(!h.has(P))throw new TypeError("attempted to get private field on non-instance");return h.get(P)},a,i,o,l,d,p,m,k,_,y,$,M,R,T,D,A,V,w,g,S,L,Y;e.__esModule=!0,e.default=void 0;var F=function(P){var h=131,v=137,x=0;P+="x";for(var I=Math.floor(9007199254740991/v),c=0;c<P.length;c++)x>I&&(x=Math.floor(x/v)),x=x*h+P.charCodeAt(c);return x},f="0123456789abcdef".split(""),J=[-2147483648,8388608,32768,128],q=[24,16,8,0],Z=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],U=[],et=function(){function P(h,v){h===void 0&&(h=!1),v===void 0&&(v=!1),a.set(this,void 0),i.set(this,void 0),o.set(this,void 0),l.set(this,void 0),d.set(this,void 0),p.set(this,void 0),m.set(this,void 0),k.set(this,void 0),_.set(this,void 0),y.set(this,void 0),$.set(this,void 0),M.set(this,void 0),R.set(this,void 0),T.set(this,void 0),D.set(this,void 0),A.set(this,void 0),V.set(this,0),w.set(this,void 0),this.init(h,v)}return P.prototype.init=function(h,v){v?(U[0]=U[16]=U[1]=U[2]=U[3]=U[4]=U[5]=U[6]=U[7]=U[8]=U[9]=U[10]=U[11]=U[12]=U[13]=U[14]=U[15]=0,n(this,i,U)):n(this,i,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),h?(n(this,p,3238371032),n(this,m,914150663),n(this,k,812702999),n(this,_,4144912697),n(this,y,4290775857),n(this,$,1750603025),n(this,M,1694076839),n(this,R,3204075428)):(n(this,p,1779033703),n(this,m,3144134277),n(this,k,1013904242),n(this,_,2773480762),n(this,y,1359893119),n(this,$,2600822924),n(this,M,528734635),n(this,R,1541459225)),n(this,a,n(this,w,n(this,o,n(this,D,0)))),n(this,l,n(this,T,!1)),n(this,d,!0),n(this,A,h)},P.prototype.update=function(h){if(s(this,l))return this;var v;h instanceof ArrayBuffer?v=new Uint8Array(h):v=h;for(var x=0,I=v.length,c=s(this,i);x<I;){var b=void 0;if(s(this,T)&&(n(this,T,!1),c[0]=s(this,a),c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),typeof v!="string")for(b=s(this,w);x<I&&b<64;++x)c[b>>2]|=v[x]<<q[b++&3];else for(b=s(this,w);x<I&&b<64;++x){var C=v.charCodeAt(x);C<128?c[b>>2]|=C<<q[b++&3]:C<2048?(c[b>>2]|=(192|C>>6)<<q[b++&3],c[b>>2]|=(128|C&63)<<q[b++&3]):C<55296||C>=57344?(c[b>>2]|=(224|C>>12)<<q[b++&3],c[b>>2]|=(128|C>>6&63)<<q[b++&3],c[b>>2]|=(128|C&63)<<q[b++&3]):(C=65536+((C&1023)<<10|v.charCodeAt(++x)&1023),c[b>>2]|=(240|C>>18)<<q[b++&3],c[b>>2]|=(128|C>>12&63)<<q[b++&3],c[b>>2]|=(128|C>>6&63)<<q[b++&3],c[b>>2]|=(128|C&63)<<q[b++&3])}n(this,V,b),n(this,o,s(this,o)+(b-s(this,w))),b>=64?(n(this,a,c[16]),n(this,w,b-64),this.hash(),n(this,T,!0)):n(this,w,b)}return s(this,o)>4294967295&&(n(this,D,s(this,D)+(s(this,o)/4294967296<<0)),n(this,o,s(this,o)%4294967296)),this},P.prototype.finalize=function(){if(!s(this,l)){n(this,l,!0);var h=s(this,i),v=s(this,V);h[16]=s(this,a),h[v>>2]|=J[v&3],n(this,a,h[16]),v>=56&&(s(this,T)||this.hash(),h[0]=s(this,a),h[16]=h[1]=h[2]=h[3]=h[4]=h[5]=h[6]=h[7]=h[8]=h[9]=h[10]=h[11]=h[12]=h[13]=h[14]=h[15]=0),h[14]=s(this,D)<<3|s(this,o)>>>29,h[15]=s(this,o)<<3,this.hash()}},P.prototype.hash=function(){for(var h=s(this,p),v=s(this,m),x=s(this,k),I=s(this,_),c=s(this,y),b=s(this,$),C=s(this,M),B=s(this,R),X=s(this,i),tt,j,ht,W,ft,yt,Rt,ue,ce,Kt,kt=16;kt<64;++kt)W=X[kt-15],tt=(W>>>7|W<<25)^(W>>>18|W<<14)^W>>>3,W=X[kt-2],j=(W>>>17|W<<15)^(W>>>19|W<<13)^W>>>10,X[kt]=X[kt-16]+tt+X[kt-7]+j<<0;Kt=v&x;for(var pt=0;pt<64;pt+=4)s(this,d)?(s(this,A)?(Rt=300032,W=X[0]-1413257819,B=W-150054599<<0,I=W+24177077<<0):(Rt=704751109,W=X[0]-210244248,B=W-1521486534<<0,I=W+143694565<<0),n(this,d,!1)):(tt=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),j=(c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7),Rt=h&v,ht=Rt^h&x^Kt,yt=c&b^~c&C,W=B+j+yt+Z[pt]+X[pt],ft=tt+ht,B=I+W<<0,I=W+ft<<0),tt=(I>>>2|I<<30)^(I>>>13|I<<19)^(I>>>22|I<<10),j=(B>>>6|B<<26)^(B>>>11|B<<21)^(B>>>25|B<<7),ue=I&h,ht=ue^I&v^Rt,yt=B&c^~B&b,W=C+j+yt+Z[pt+1]+X[pt+1],ft=tt+ht,C=x+W<<0,x=W+ft<<0,tt=(x>>>2|x<<30)^(x>>>13|x<<19)^(x>>>22|x<<10),j=(C>>>6|C<<26)^(C>>>11|C<<21)^(C>>>25|C<<7),ce=x&I,ht=ce^x&h^ue,yt=C&B^~C&c,W=b+j+yt+Z[pt+2]+X[pt+2],ft=tt+ht,b=v+W<<0,v=W+ft<<0,tt=(v>>>2|v<<30)^(v>>>13|v<<19)^(v>>>22|v<<10),j=(b>>>6|b<<26)^(b>>>11|b<<21)^(b>>>25|b<<7),Kt=v&x,ht=Kt^v&I^ce,yt=b&C^~b&B,W=c+j+yt+Z[pt+3]+X[pt+3],ft=tt+ht,c=h+W<<0,h=W+ft<<0;n(this,p,s(this,p)+h<<0),n(this,m,s(this,m)+v<<0),n(this,k,s(this,k)+x<<0),n(this,_,s(this,_)+I<<0),n(this,y,s(this,y)+c<<0),n(this,$,s(this,$)+b<<0),n(this,M,s(this,M)+C<<0),n(this,R,s(this,R)+B<<0)},P.prototype.hex=function(){this.finalize();var h=s(this,p),v=s(this,m),x=s(this,k),I=s(this,_),c=s(this,y),b=s(this,$),C=s(this,M),B=s(this,R),X=f[h>>28&15]+f[h>>24&15]+f[h>>20&15]+f[h>>16&15]+f[h>>12&15]+f[h>>8&15]+f[h>>4&15]+f[h&15]+f[v>>28&15]+f[v>>24&15]+f[v>>20&15]+f[v>>16&15]+f[v>>12&15]+f[v>>8&15]+f[v>>4&15]+f[v&15]+f[x>>28&15]+f[x>>24&15]+f[x>>20&15]+f[x>>16&15]+f[x>>12&15]+f[x>>8&15]+f[x>>4&15]+f[x&15]+f[I>>28&15]+f[I>>24&15]+f[I>>20&15]+f[I>>16&15]+f[I>>12&15]+f[I>>8&15]+f[I>>4&15]+f[I&15]+f[c>>28&15]+f[c>>24&15]+f[c>>20&15]+f[c>>16&15]+f[c>>12&15]+f[c>>8&15]+f[c>>4&15]+f[c&15]+f[b>>28&15]+f[b>>24&15]+f[b>>20&15]+f[b>>16&15]+f[b>>12&15]+f[b>>8&15]+f[b>>4&15]+f[b&15]+f[C>>28&15]+f[C>>24&15]+f[C>>20&15]+f[C>>16&15]+f[C>>12&15]+f[C>>8&15]+f[C>>4&15]+f[C&15];return s(this,A)||(X+=f[B>>28&15]+f[B>>24&15]+f[B>>20&15]+f[B>>16&15]+f[B>>12&15]+f[B>>8&15]+f[B>>4&15]+f[B&15]),X},P.prototype.toString=function(){return this.hex()},P.prototype.digest=function(){this.finalize();var h=s(this,p),v=s(this,m),x=s(this,k),I=s(this,_),c=s(this,y),b=s(this,$),C=s(this,M),B=s(this,R),X=[h>>24&255,h>>16&255,h>>8&255,h&255,v>>24&255,v>>16&255,v>>8&255,v&255,x>>24&255,x>>16&255,x>>8&255,x&255,I>>24&255,I>>16&255,I>>8&255,I&255,c>>24&255,c>>16&255,c>>8&255,c&255,b>>24&255,b>>16&255,b>>8&255,b&255,C>>24&255,C>>16&255,C>>8&255,C&255];return s(this,A)||X.push(B>>24&255,B>>16&255,B>>8&255,B&255),X},P.prototype.array=function(){return this.digest()},P.prototype.arrayBuffer=function(){this.finalize();var h=new ArrayBuffer(s(this,A)?28:32),v=new DataView(h);return v.setUint32(0,s(this,p)),v.setUint32(4,s(this,m)),v.setUint32(8,s(this,k)),v.setUint32(12,s(this,_)),v.setUint32(16,s(this,y)),v.setUint32(20,s(this,$)),v.setUint32(24,s(this,M)),s(this,A)||v.setUint32(28,s(this,R)),h},P}();a=new WeakMap,i=new WeakMap,o=new WeakMap,l=new WeakMap,d=new WeakMap,p=new WeakMap,m=new WeakMap,k=new WeakMap,_=new WeakMap,y=new WeakMap,$=new WeakMap,M=new WeakMap,R=new WeakMap,T=new WeakMap,D=new WeakMap,A=new WeakMap,V=new WeakMap,w=new WeakMap,function(P){t(h,P);function h(v,x,I){x===void 0&&(x=!1),I===void 0&&(I=!1);var c=P.call(this,x,I)||this;g.set(c,void 0),S.set(c,void 0),L.set(c,void 0),Y.set(c,void 0);var b;if(typeof v=="string"){for(var C=[],B=v.length,X=0,tt=0;tt<B;++tt){var j=v.charCodeAt(tt);j<128?C[X++]=j:j<2048?(C[X++]=192|j>>6,C[X++]=128|j&63):j<55296||j>=57344?(C[X++]=224|j>>12,C[X++]=128|j>>6&63,C[X++]=128|j&63):(j=65536+((j&1023)<<10|v.charCodeAt(++tt)&1023),C[X++]=240|j>>18,C[X++]=128|j>>12&63,C[X++]=128|j>>6&63,C[X++]=128|j&63)}b=C}else v instanceof ArrayBuffer?b=new Uint8Array(v):b=v;b.length>64&&(b=new et(x,!0).update(b).array());for(var ht=[],W=[],tt=0;tt<64;++tt){var ft=b[tt]||0;ht[tt]=92^ft,W[tt]=54^ft}return c.update(W),n(c,L,ht),n(c,g,!0),n(c,S,x),n(c,Y,I),c}return h.prototype.finalize=function(){if(P.prototype.finalize.call(this),s(this,g)){n(this,g,!1);var v=this.array();P.prototype.init.call(this,s(this,S),s(this,Y)),this.update(s(this,L)),this.update(v),P.prototype.finalize.call(this)}},h}(et),g=new WeakMap,S=new WeakMap,L=new WeakMap,Y=new WeakMap;function ut(P){var h=new et;return h.update(P),parseInt(h.hex().substring(0,8),16)}var at=function(P){var h="#";return P.forEach(function(v){v<16&&(h+=0),h+=v.toString(16)}),h},Vt=function(P,h,v){P/=360;var x=v<.5?v*(1+h):v+h-v*h,I=2*v-x;return[P+1/3,P,P-1/3].map(function(c){return c<0&&c++,c>1&&c--,c<1/6?c=I+(x-I)*6*c:c<.5?c=x:c<2/3?c=I+(x-I)*6*(2/3-c):c=I,Math.round(c*255)})},Wt=function(){function P(h){h===void 0&&(h={});var v=[h.lightness,h.saturation].map(function(c){return c=c!==void 0?c:[.35,.5,.65],Array.isArray(c)?c.concat():[c]}),x=v[0],I=v[1];this.L=x,this.S=I,typeof h.hue=="number"&&(h.hue={min:h.hue,max:h.hue}),typeof h.hue=="object"&&!Array.isArray(h.hue)&&(h.hue=[h.hue]),typeof h.hue>"u"&&(h.hue=[]),this.hueRanges=h.hue.map(function(c){return{min:typeof c.min>"u"?0:c.min,max:typeof c.max>"u"?360:c.max}}),this.hash=ut,typeof h.hash=="function"&&(this.hash=h.hash),h.hash==="bkdr"&&(this.hash=F)}return P.prototype.hsl=function(h){var v,x,I,c=this.hash(h),b=727;if(this.hueRanges.length){var C=this.hueRanges[c%this.hueRanges.length];v=c/this.hueRanges.length%b*(C.max-C.min)/b+C.min}else v=c%359;return c=Math.ceil(c/360),x=this.S[c%this.S.length],c=Math.ceil(c/this.S.length),I=this.L[c%this.L.length],[v,x,I]},P.prototype.rgb=function(h){var v=this.hsl(h);return Vt.apply(this,v)},P.prototype.hex=function(h){var v=this.rgb(h);return at(v)},P}();e.default=Wt})(kn);const Cr=xr(kn),Tr=Array.from({length:550},(e,t)=>(t+401)/1e3),Mr=Array.from({length:551},(e,t)=>(t+50)/1e3),pe=e=>N(()=>{const t=JSON.stringify(e.value),n=de.value?Tr:Mr,[s,a,i]=new Cr({lightness:n}).hsl(t);return`hsl(${[s,`${de.value&&i<.3||!de.value&&i>.7?Math.min(a+.4,1)*100:a*100}%`,`${i*100}%`].join(",")})`}),xn=dt({__name:"Line",props:{points:{type:Array,default:()=>[]},pathWidth:{type:Number,default:1},svgSize:{type:Object,default:void 0},svgOffset:{type:Object,default:void 0}},setup(e){const t=e,n=Nt(Ee(t,"points")),s=pe(Ee(t,"points")),a=N(()=>{var _,y,$,M;const{svgSize:o,svgOffset:l}=t;if(!o||!l||!n.value||((_=t.points[0])==null?void 0:_[0])===((y=t.points[1])==null?void 0:y[0])&&(($=t.points[0])==null?void 0:$[1])===((M=t.points[1])==null?void 0:M[1]))return;const{slope:d,intercept:p}=n.value,m=l.x,k=o.width+l.x;return[[m,d*m+p],[k,d*k+p]]}),i=N(()=>`${t.pathWidth} ${2*t.pathWidth}`);return(o,l)=>{const d=$r;return E(),z(vt,null,[r(a)?(E(),z(vt,{key:0},[G(d,Ct(o.$attrs,{"stroke-width":e.pathWidth*.8,stroke:"var(--background-color-transparent)","point-start":r(a)[0],"point-stop":r(a)[1],"stroke-dasharray":r(i),"stroke-linecap":"round",opacity:".2"}),null,16,["stroke-width","point-start","point-stop","stroke-dasharray"]),G(d,Ct({"stroke-width":e.pathWidth*.4,stroke:r(s)},o.$attrs,{"point-start":r(a)[0],"point-stop":r(a)[1],"stroke-dasharray":r(i),"stroke-linecap":"round"}),null,16,["stroke-width","stroke","point-start","point-stop","stroke-dasharray"])],64)):ct("v-if",!0),G(d,Ct(o.$attrs,{"stroke-width":e.pathWidth*1.2,stroke:"var(--background-color-transparent)","point-start":e.points[0],"point-stop":e.points[1],"stroke-linecap":"round",opacity:".3"}),null,16,["stroke-width","point-start","point-stop"]),G(d,Ct({stroke:r(s)},o.$attrs,{"stroke-linecap":"round","point-start":e.points[0],"point-stop":e.points[1]}),null,16,["stroke","point-start","point-stop"])],64)}}});var mt=(e=>(e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT",e))(mt||{});const Cn=It(()=>{const e=H(!1);return{outOfBoundLabels:e,setOutBoundLabels(t,n,s){const a={x:30,y:4.5},i=t.find(({x:d,y:p})=>(d-=s.x,p-=s.y,d<a.x||d>n.width-a.x||p<a.y+3||p>n.height-a.y));if(!i)return e.value=!1;let{x:o,y:l}=i;return o-=s.x,l-=s.y,o<a.x?e.value={direction:2,y:l}:o>n.width-a.x?e.value={direction:3,y:l}:l<a.y+3?e.value={direction:0,x:o}:e.value={direction:1,x:o}}}}),Tn=(e,t)=>N(()=>{if(!e.value||!t.value)return;const{slope:n,intercept:s}=e.value,{slope:a,intercept:i}=t.value;let o;return n===a?o=i-s:o=(s-i)/(a-n),{x:o,y:n*o+s}}),Mn=(e,t,n,s)=>N(()=>{if(!t.value||!n.value||!s.value||!e.value)return;const a=n.value,i=s.value;let o=Math.tan((Math.atan(a.slope)+Math.atan(i.slope))/2),l=-1/o,d=a.slope*t.value.x+a.intercept-o*t.value.x,p=a.slope*t.value.x+a.intercept-l*t.value.x;const m=rn([[[0,a.intercept],[t.value.x,a.slope*t.value.x+a.intercept]],[[0,d],[t.value.x,o*t.value.x+d]]])*2;return(m-1>e.value||m+1<e.value)&&([o,d,l,p]=[l,p,o,d]),{acute:{slope:o,intercept:d},obtuse:{slope:l,intercept:p}}}),En=(e,t,n)=>{const s=H([]);return qn([t,n,e],()=>{if(!t.value||!n.value||!e.value)return s.value=[];const{acute:{slope:a,intercept:i},obtuse:{slope:o,intercept:l}}=n.value,d=70,p=e.value,m=Math.cos(Math.atan(a))*(d+(90-p)*.4)+t.value.x,k=180-p,_=-Math.cos(Math.atan(o))*(d+(90-k)*.4)+t.value.x;s.value=[{x:m,y:a*m+i,value:p},{x:_,y:o*_+l,value:k}]},{throttle:20,immediate:!0}),s},Xe=(e,t)=>N(()=>{if(!t.value||!e.value)return;const{slope:n,intercept:s}=e.value,{x1:a,x2:i}=t.value;return[[a,n*a+s],[i,n*i+s]]}),Er={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Ir=u("path",{fill:"currentColor",d:"M24 19h-3v-3h-2v3h-3v2h3v3h2v-3h3v-2z"},null,-1),Dr=u("path",{fill:"currentColor",d:"m31 29.586l-4.689-4.688a8.028 8.028 0 1 0-1.414 1.414L29.586 31zM20 26a6 6 0 1 1 6-6a6.007 6.007 0 0 1-6 6zM4 8H2V4a2.002 2.002 0 0 1 2-2h4v2H4zm22 0h-2V4h-4V2h4a2.002 2.002 0 0 1 2 2zM12 2h4v2h-4zM8 26H4a2.002 2.002 0 0 1-2-2v-4h2v4h4zM2 12h2v4H2z"},null,-1),Ar=[Ir,Dr];function Rr(e,t){return E(),z("svg",Er,Ar)}const Or={name:"carbon-zoom-in-area",render:Rr},zr={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Fr=u("path",{fill:"currentColor",d:"M16 19h8v2h-8z"},null,-1),Pr=u("path",{fill:"currentColor",d:"m31 29.586l-4.689-4.688a8.028 8.028 0 1 0-1.414 1.414L29.586 31zM20 26a6 6 0 1 1 6-6a6.007 6.007 0 0 1-6 6zM4 8H2V4a2.002 2.002 0 0 1 2-2h4v2H4zm22 0h-2V4h-4V2h4a2.002 2.002 0 0 1 2 2zM12 2h4v2h-4zM8 26H4a2.002 2.002 0 0 1-2-2v-4h2v4h4zM2 12h2v4H2z"},null,-1),Lr=[Fr,Pr];function Br(e,t){return E(),z("svg",zr,Lr)}const Gr={name:"carbon-zoom-out-area",render:Br},Nr=["viewBox"],Hr=["transform"],Ur=["x","y"],Vr=dt({__name:"BoardResult",setup(e){const{t}=Mt(),n=H(!1),s=()=>{n.value&&(n.value=!1)},a=H();Xn(a,s),Ze("Escape",s);const{height:i,width:o}=ge(re()),l=N(()=>({width:300,height:300*i.value/o.value})),{outOfBoundLabels:d}=Cn(),p=N(()=>{const f=n.value?260:50;return{width:f,height:f}}),m=N(()=>({minY:p.value.height,maxY:i.value-p.value.height,minX:p.value.width,maxX:o.value-p.value.width})),k=N(()=>{const{minX:f,maxX:J,minY:q,maxY:Z}=m.value,U=at=>at>Z?Z:at<q?q:at,et=at=>at>J?J:at<f?f:at;if(!d.value)return;const ut={height:`${p.value.height}px`,width:`${p.value.width}px`};switch(d.value.direction){case mt.DOWN:return{...ut,bottom:"1rem",left:`${et(d.value.x)}px`,transform:"translateX(-50%)"};case mt.UP:return{...ut,top:"1rem",left:`${et(d.value.x)}px`,transform:"translateX(-50%)"};case mt.LEFT:return{...ut,top:`${U(d.value.y)}px`,left:"1rem",transform:"translateY(-50%)"};case mt.RIGHT:return{...ut,top:`${U(d.value.y)}px`,right:"1rem",transform:"translateY(-50%)"}}}),{lines:_}=ne(),y=_e(_),$=N(()=>_.value[0]||[]),M=N(()=>_.value[1]||[]),R=Nt($),T=Nt(M),D=Tn(R,T),A=Mn(y,D,R,T),V=En(y,D,A),w=N(()=>D.value&&{x1:D.value.x-l.value.width,x2:D.value.x+l.value.width}),g=Xe(R,w),S=Xe(T,w),L=pe($),Y=pe(M),F={[mt.UP]:"bottom",[mt.DOWN]:void 0,[mt.LEFT]:"right",[mt.RIGHT]:"left"};return(f,J)=>{const q=Et,Z=xn;return r(R)&&r(T)&&r(D)&&r(d)?(E(),z("section",{key:0,ref_key:"el",ref:a,class:O(["bg-bg-transparent-inverse text-inverse",[f.$style.result,{[f.$style["result--open"]]:n.value}]]),style:jt(r(k)),onMousemove:J[0]||(J[0]=ot(()=>{},["prevent","stop"])),onClick:J[1]||(J[1]=U=>n.value=!n.value)},[G(q,{class:O(f.$style.btn),tooltip:n.value?r(t)("board.result.zoom_out"):r(t)("board.result.zoom_in"),"tooltip-placement":n.value?"left":r(F)[r(d).direction]},{default:Q(()=>[(E(),lt(jn(n.value?r(Gr):r(Or))))]),_:1},8,["class","tooltip","tooltip-placement"]),(E(),z("svg",{viewBox:`${r(l).width*.1} ${r(l).height*.1} ${r(l).width*.8} ${r(l).height*.8}`,class:O(f.$style.svg)},[u("g",{transform:`translate(${-r(D).x+r(l).width*.5} ${-r(D).y+r(l).height*.5})`},[r(g)?(E(),lt(Z,Ct({key:0,"stroke-width":"4","stroke-linecap":"round"},f.$attrs,{stroke:r(L),"path-width":4,points:r(g),"stroke-dasharray":"5 10",filter:"saturate(2.5)"}),null,16,["stroke","points"])):ct("v-if",!0),r(S)?(E(),lt(Z,Ct({key:1,"stroke-width":"4","stroke-linecap":"round"},f.$attrs,{stroke:r(Y),"path-width":4,points:r(S),"stroke-dasharray":"5 10",filter:"saturate(2.5)"}),null,16,["stroke","points"])):ct("v-if",!0),(E(!0),z(vt,null,At(r(V),U=>(E(),z("text",{key:`${U.x}|${U.y}`,x:U.x,y:U.y,"text-anchor":"middle","dominant-baseline":"middle",stroke:"transparent"},K(U.value.toFixed(3))+"\xB0",9,Ur))),128))],8,Hr)],10,Nr))],38)):ct("v-if",!0)}}}),Wr="f_w",Kr="f_y",Yr="f_z",qr={result:Wr,"result--open":"f_x",svg:Kr,btn:Yr},Xr={$style:qr},jr=$t(Vr,[["__cssModules",Xr]]),Zr=["viewBox","stroke-width","onTouchend","onMouseup"],Jr=["cx","cy","r"],Qr=["x","y","stroke-width"],tl=["x","y"],el=dt({__name:"BoardSvg",props:{width:{type:Number,default:0},height:{type:Number,default:0}},emits:["pressed"],setup(e,{emit:t}){const n=e,{width:s,height:a}=je(n),i=oe(),o=H(!1),{ctrl:l,meta:d,option:p}=be(),m=N(()=>{if(d.value)return"move"}),{offset:k,active:_,zoom:y,transformOrigin:$}=Sn(),M=N(()=>5/y.value),R=N(()=>({width:s.value/y.value,height:a.value/y.value})),T=N(()=>({x:-k.value[0]/y.value,y:-k.value[1]/y.value})),{elementX:D,elementY:A}=Zn(i,{handleOutside:!1}),V=N(()=>(D.value-k.value[0])/y.value),w=N(()=>(A.value-k.value[1])/y.value),{undo:g,redo:S}=Jt(D),{undo:L,redo:Y}=Jt(A),{lines:F,predictNextPoint:f,drawNextPoint:J,step:q,registerOnRedo:Z,registerOnUndo:U}=ne();Z(()=>{S(),Y()}),U(()=>{g(),L()}),st([V,w],([c,b])=>{q.value===2&&f(c,b)});const et=_e(F),ut=N(()=>F.value[0]||[]),at=N(()=>F.value[1]||[]),Vt=Nt(ut),Wt=Nt(at),P=Tn(Vt,Wt),h=Mn(et,P,Vt,Wt),v=En(et,P,h),{setOutBoundLabels:x}=Cn();st([v,R,T],([c,b,C])=>x(c,b,C)),st([s,a],([c,b],[C,B])=>{$.value=[$.value[0]+(c-C)/2,$.value[1]+(b-B)/2]});const I=c=>{_.value||(J(V.value,w.value),t("pressed"))};return(c,b)=>{const C=xn;return E(),z("svg",{ref_key:"svgRef",ref:i,viewBox:`${r(T).x} ${r(T).y} ${r(R).width} ${r(R).height}`,"stroke-width":r(M),tabindex:"0",style:jt({cursor:r(m)}),onTouchend:ot(I,["prevent"]),onMouseup:ot(I,["prevent"]),onMousedownOnce:b[0]||(b[0]=B=>o.value=!0),onMousemovePassiveOnce:b[1]||(b[1]=B=>o.value=!0),onTouchstartPassiveOnce:b[2]||(b[2]=B=>o.value=!0)},[Pt(c.$slots,"default"),r(q)%2?wt((E(),z("circle",{key:0,cx:`${r(V)}px`,cy:`${r(w)}px`,r:r(M),"stroke-width":1},null,8,Jr)),[[Jn,o.value&&!r(l)&&!r(d)&&!r(p)]]):(E(),lt(C,{key:1,points:[r(F)[Math.floor(r(q)/2)][0],[r(V),r(w)]],"svg-size":r(R),"svg-offset":r(T),"path-width":r(M)},null,8,["points","svg-size","svg-offset","path-width"])),G(C,{points:r(F)[0],"svg-size":r(R),"svg-offset":r(T),"path-width":r(M)},null,8,["points","svg-size","svg-offset","path-width"]),G(C,{points:r(F)[1],"svg-size":r(R),"svg-offset":r(T),"path-width":r(M)},null,8,["points","svg-size","svg-offset","path-width"]),(E(!0),z(vt,null,At(r(v),B=>(E(),z(vt,{key:`${B.x}|${B.y}`},[u("text",{x:B.x,y:B.y,"text-anchor":"middle","dominant-baseline":"middle",stroke:"var(--background-color-transparent)","stroke-width":r(M),style:jt(`font-size:${r(M)/5}em`)},K(B.value.toFixed(3))+"\xB0",13,Qr),u("text",{x:B.x,y:B.y,"text-anchor":"middle","dominant-baseline":"middle",stroke:"transparent",style:jt(`font-size:${r(M)/5}em`)},K(B.value.toFixed(3))+"\xB0",13,tl)],64))),128))],44,Zr)}}}),nl=["href","x","y","height","width"],sl=dt({__name:"Board",setup(e){const{t}=Mt(),n=H(!0),s=re(),{height:a,width:i}=ge(s),{src:o,width:l,height:d,processFiles:p}=$n(),m=H(0),k=H(0);st(o,()=>{if(d&&l)if(l.value>i.value||d.value>a.value){const $=Math.min(i.value/l.value,a.value/d.value);m.value=d.value*$,k.value=l.value*$}else m.value=d.value,k.value=l.value});const{isOverDropZone:_}=Qn(s,p),y=N(()=>_.value?[t("board.drop_file_here")]:[]);return($,M)=>{const R=el,T=jr,D=wr;return E(),z("div",{ref_key:"boardRef",ref:s,class:O($.$style.board)},[G(R,{class:O($.$style.board__svg),width:r(i),height:r(a),onPressed:M[0]||(M[0]=A=>n.value=!1)},{default:Q(()=>[r(o)?(E(),z("image",{key:0,href:r(o),x:k.value/-2,y:m.value/-2,height:`${m.value}`,width:`${k.value}`},null,8,nl)):ct("v-if",!0)]),_:1},8,["class","width","height"]),n.value&&!r(o)?(E(),z("div",{key:0,class:O($.$style.board__hint)},K(r(t)("board.click_this_button_or_drop")),3)):ct("v-if",!0),G(T),G(D,{class:O($.$style.board__nav),info:r(y),"onUpdate:files":r(p)},null,8,["class","info","onUpdate:files"])],2)}}}),al="f_f",il="f_g",ol="f_h",rl="f_i",ll={board:al,board__svg:il,board__nav:ol,board__hint:rl},ul={$style:ll},cl=$t(sl,[["__cssModules",ul]]),dl={};function hl(e,t){const n=cl;return E(),lt(n,{ref:"boardRef",class:"flex-grow"},null,512)}const vl=$t(dl,[["render",hl]]);export{vl as default};
