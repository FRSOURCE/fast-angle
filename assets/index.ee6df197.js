import{d as st,q as L,s as j,v as _e,x as Bn,y as Gn,u as Rt,o as w,c as tt,b as F,w as G,a as c,z as Dt,A as X,j as P,B as Ut,n as T,l as q,k as r,T as Nn,m as nt,C as Ft,e as Ct,E as zt,h as O,F as Hn,G as Un,i as E,H as Xt,I as an,J as xt,K as Bt,L as Mt,M as ze,N as ot,O as Pt,P as ye,Q as xe,r as Vn,R as Wn,S as Kn,U as Oe,V as jn,W as se,X as Yn,Y as qn,Z as Xn,$ as Zn,a0 as Jn,a1 as Qn,a2 as ts,a3 as es,a4 as on,a5 as ns,a6 as ve,a7 as Le,a8 as ss,a9 as as,aa as is,ab as te,ac as os,ad as rs,ae as ls}from"./app.955bd5ef.js";/*!
* tabbable 6.0.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var rn=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],ae=rn.join(","),ln=typeof Element>"u",At=ln?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ie=!ln&&Element.prototype.getRootNode?function(n){return n.getRootNode()}:function(n){return n.ownerDocument},un=function(t,e,s){var i=Array.prototype.slice.apply(t.querySelectorAll(ae));return e&&At.call(t,ae)&&i.unshift(t),i=i.filter(s),i},cn=function n(t,e,s){for(var i=[],a=Array.from(t);a.length;){var o=a.shift();if(o.tagName==="SLOT"){var l=o.assignedElements(),u=l.length?l:o.children,d=n(u,!0,s);s.flatten?i.push.apply(i,d):i.push({scope:o,candidates:d})}else{var f=At.call(o,ae);f&&s.filter(o)&&(e||!t.includes(o))&&i.push(o);var b=o.shadowRoot||typeof s.getShadowRoot=="function"&&s.getShadowRoot(o),v=!s.shadowRootFilter||s.shadowRootFilter(o);if(b&&v){var h=n(b===!0?o.children:b.children,!0,s);s.flatten?i.push.apply(i,h):i.push({scope:o,candidates:h})}else a.unshift.apply(a,o.children)}}return i},dn=function(t,e){return t.tabIndex<0&&(e||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||t.isContentEditable)&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},us=function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex},hn=function(t){return t.tagName==="INPUT"},cs=function(t){return hn(t)&&t.type==="hidden"},ds=function(t){var e=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(s){return s.tagName==="SUMMARY"});return e},hs=function(t,e){for(var s=0;s<t.length;s++)if(t[s].checked&&t[s].form===e)return t[s]},fs=function(t){if(!t.name)return!0;var e=t.form||ie(t),s=function(l){return e.querySelectorAll('input[type="radio"][name="'+l+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=s(window.CSS.escape(t.name));else try{i=s(t.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var a=hs(i,t.form);return!a||a===t},vs=function(t){return hn(t)&&t.type==="radio"},ps=function(t){return vs(t)&&!fs(t)},ms=function(t){for(var e,s=ie(t).host,i=!!((e=s)!==null&&e!==void 0&&e.ownerDocument.contains(s)||t.ownerDocument.contains(t));!i&&s;){var a;s=ie(s).host,i=!!((a=s)!==null&&a!==void 0&&a.ownerDocument.contains(s))}return i},Pe=function(t){var e=t.getBoundingClientRect(),s=e.width,i=e.height;return s===0&&i===0},gs=function(t,e){var s=e.displayCheck,i=e.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var a=At.call(t,"details>summary:first-of-type"),o=a?t.parentElement:t;if(At.call(o,"details:not([open]) *"))return!0;if(!s||s==="full"||s==="legacy-full"){if(typeof i=="function"){for(var l=t;t;){var u=t.parentElement,d=ie(t);if(u&&!u.shadowRoot&&i(u)===!0)return Pe(t);t.assignedSlot?t=t.assignedSlot:!u&&d!==t.ownerDocument?t=d.host:t=u}t=l}if(ms(t))return!t.getClientRects().length;if(s!=="legacy-full")return!0}else if(s==="non-zero-area")return Pe(t);return!1},bs=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var e=t.parentElement;e;){if(e.tagName==="FIELDSET"&&e.disabled){for(var s=0;s<e.children.length;s++){var i=e.children.item(s);if(i.tagName==="LEGEND")return At.call(e,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}e=e.parentElement}return!1},oe=function(t,e){return!(e.disabled||cs(e)||gs(e,t)||ds(e)||bs(e))},ge=function(t,e){return!(ps(e)||dn(e)<0||!oe(t,e))},_s=function(t){var e=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},ys=function n(t){var e=[],s=[];return t.forEach(function(i,a){var o=!!i.scope,l=o?i.scope:i,u=dn(l,o),d=o?n(i.candidates):l;u===0?o?e.push.apply(e,d):e.push(l):s.push({documentOrder:a,tabIndex:u,item:i,isScope:o,content:d})}),s.sort(us).reduce(function(i,a){return a.isScope?i.push.apply(i,a.content):i.push(a.content),i},[]).concat(e)},xs=function(t,e){e=e||{};var s;return e.getShadowRoot?s=cn([t],e.includeContainer,{filter:ge.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:_s}):s=un(t,e.includeContainer,ge.bind(null,e)),ys(s)},ws=function(t,e){e=e||{};var s;return e.getShadowRoot?s=cn([t],e.includeContainer,{filter:oe.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):s=un(t,e.includeContainer,oe.bind(null,e)),s},Zt=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return At.call(t,ae)===!1?!1:ge(e,t)},$s=rn.concat("iframe").join(","),pe=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return At.call(t,$s)===!1?!1:oe(e,t)};/*!
* focus-trap 7.0.0
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Be(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,s)}return e}function Ge(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Be(Object(e),!0).forEach(function(s){Ss(n,s,e[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Be(Object(e)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(e,s))})}return n}function Ss(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var Ne=function(){var n=[];return{activateTrap:function(e){if(n.length>0){var s=n[n.length-1];s!==e&&s.pause()}var i=n.indexOf(e);i===-1||n.splice(i,1),n.push(e)},deactivateTrap:function(e){var s=n.indexOf(e);s!==-1&&n.splice(s,1),n.length>0&&n[n.length-1].unpause()}}}(),ks=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},Cs=function(t){return t.key==="Escape"||t.key==="Esc"||t.keyCode===27},Ts=function(t){return t.key==="Tab"||t.keyCode===9},He=function(t){return setTimeout(t,0)},Ue=function(t,e){var s=-1;return t.every(function(i,a){return e(i)?(s=a,!1):!0}),s},Gt=function(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),i=1;i<e;i++)s[i-1]=arguments[i];return typeof t=="function"?t.apply(void 0,s):t},Jt=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},Ms=function(t,e){var s=(e==null?void 0:e.document)||document,i=Ge({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},e),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},o,l=function(p,g,z){return p&&p[g]!==void 0?p[g]:i[z||g]},u=function(p){return a.containerGroups.findIndex(function(g){var z=g.container,B=g.tabbableNodes;return z.contains(p)||B.find(function(A){return A===p})})},d=function(p){var g=i[p];if(typeof g=="function"){for(var z=arguments.length,B=new Array(z>1?z-1:0),A=1;A<z;A++)B[A-1]=arguments[A];g=g.apply(void 0,B)}if(g===!0&&(g=void 0),!g){if(g===void 0||g===!1)return g;throw new Error("`".concat(p,"` was specified but was not a node, or did not return a node"))}var R=g;if(typeof g=="string"&&(R=s.querySelector(g),!R))throw new Error("`".concat(p,"` as selector refers to no known node"));return R},f=function(){var p=d("initialFocus");if(p===!1)return!1;if(p===void 0)if(u(s.activeElement)>=0)p=s.activeElement;else{var g=a.tabbableGroups[0],z=g&&g.firstTabbableNode;p=z||d("fallbackFocus")}if(!p)throw new Error("Your focus-trap needs to have at least one focusable element");return p},b=function(){if(a.containerGroups=a.containers.map(function(p){var g=xs(p,i.tabbableOptions),z=ws(p,i.tabbableOptions);return{container:p,tabbableNodes:g,focusableNodes:z,firstTabbableNode:g.length>0?g[0]:null,lastTabbableNode:g.length>0?g[g.length-1]:null,nextTabbableNode:function(A){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,N=z.findIndex(function(U){return U===A});if(!(N<0))return R?z.slice(N+1).find(function(U){return Zt(U,i.tabbableOptions)}):z.slice(0,N).reverse().find(function(U){return Zt(U,i.tabbableOptions)})}}}),a.tabbableGroups=a.containerGroups.filter(function(p){return p.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!d("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},v=function y(p){if(p!==!1&&p!==s.activeElement){if(!p||!p.focus){y(f());return}p.focus({preventScroll:!!i.preventScroll}),a.mostRecentlyFocusedNode=p,ks(p)&&p.select()}},h=function(p){var g=d("setReturnFocus",p);return g||(g===!1?!1:p)},m=function(p){var g=Jt(p);if(!(u(g)>=0)){if(Gt(i.clickOutsideDeactivates,p)){o.deactivate({returnFocus:i.returnFocusOnDeactivate&&!pe(g,i.tabbableOptions)});return}Gt(i.allowOutsideClick,p)||p.preventDefault()}},$=function(p){var g=Jt(p),z=u(g)>=0;z||g instanceof Document?z&&(a.mostRecentlyFocusedNode=g):(p.stopImmediatePropagation(),v(a.mostRecentlyFocusedNode||f()))},M=function(p){var g=Jt(p);b();var z=null;if(a.tabbableGroups.length>0){var B=u(g),A=B>=0?a.containerGroups[B]:void 0;if(B<0)p.shiftKey?z=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:z=a.tabbableGroups[0].firstTabbableNode;else if(p.shiftKey){var R=Ue(a.tabbableGroups,function(rt){var Z=rt.firstTabbableNode;return g===Z});if(R<0&&(A.container===g||pe(g,i.tabbableOptions)&&!Zt(g,i.tabbableOptions)&&!A.nextTabbableNode(g,!1))&&(R=B),R>=0){var N=R===0?a.tabbableGroups.length-1:R-1,U=a.tabbableGroups[N];z=U.lastTabbableNode}}else{var H=Ue(a.tabbableGroups,function(rt){var Z=rt.lastTabbableNode;return g===Z});if(H<0&&(A.container===g||pe(g,i.tabbableOptions)&&!Zt(g,i.tabbableOptions)&&!A.nextTabbableNode(g))&&(H=B),H>=0){var Y=H===a.tabbableGroups.length-1?0:H+1,K=a.tabbableGroups[Y];z=K.firstTabbableNode}}}else z=d("fallbackFocus");z&&(p.preventDefault(),v(z))},S=function(p){if(Cs(p)&&Gt(i.escapeDeactivates,p)!==!1){p.preventDefault(),o.deactivate();return}if(Ts(p)){M(p);return}},k=function(p){var g=Jt(p);u(g)>=0||Gt(i.clickOutsideDeactivates,p)||Gt(i.allowOutsideClick,p)||(p.preventDefault(),p.stopImmediatePropagation())},C=function(){if(!!a.active)return Ne.activateTrap(o),a.delayInitialFocusTimer=i.delayInitialFocus?He(function(){v(f())}):v(f()),s.addEventListener("focusin",$,!0),s.addEventListener("mousedown",m,{capture:!0,passive:!1}),s.addEventListener("touchstart",m,{capture:!0,passive:!1}),s.addEventListener("click",k,{capture:!0,passive:!1}),s.addEventListener("keydown",S,{capture:!0,passive:!1}),o},I=function(){if(!!a.active)return s.removeEventListener("focusin",$,!0),s.removeEventListener("mousedown",m,!0),s.removeEventListener("touchstart",m,!0),s.removeEventListener("click",k,!0),s.removeEventListener("keydown",S,!0),o};return o={get active(){return a.active},get paused(){return a.paused},activate:function(p){if(a.active)return this;var g=l(p,"onActivate"),z=l(p,"onPostActivate"),B=l(p,"checkCanFocusTrap");B||b(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=s.activeElement,g&&g();var A=function(){B&&b(),C(),z&&z()};return B?(B(a.containers.concat()).then(A,A),this):(A(),this)},deactivate:function(p){if(!a.active)return this;var g=Ge({onDeactivate:i.onDeactivate,onPostDeactivate:i.onPostDeactivate,checkCanReturnFocus:i.checkCanReturnFocus},p);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,I(),a.active=!1,a.paused=!1,Ne.deactivateTrap(o);var z=l(g,"onDeactivate"),B=l(g,"onPostDeactivate"),A=l(g,"checkCanReturnFocus"),R=l(g,"returnFocus","returnFocusOnDeactivate");z&&z();var N=function(){He(function(){R&&v(h(a.nodeFocusedBeforeActivation)),B&&B()})};return R&&A?(A(h(a.nodeFocusedBeforeActivation)).then(N,N),this):(N(),this)},pause:function(){return a.paused||!a.active?this:(a.paused=!0,I(),this)},unpause:function(){return!a.paused||!a.active?this:(a.paused=!1,b(),C(),this)},updateContainerElements:function(p){var g=[].concat(p).filter(Boolean);return a.containers=g.map(function(z){return typeof z=="string"?s.querySelector(z):z}),a.active&&b(),this}},o.updateContainerElements(t),o};const Es=st({name:"UseFocusTrap",props:["as","options"],setup(n,{slots:t}){let e;const s=L(),i=()=>e&&e.activate(),a=()=>e&&e.deactivate();return j(()=>_e(s),o=>{!o||(e=Ms(o,n.options||{}),i())},{flush:"post"}),Bn(()=>a()),()=>{if(t.default)return Gn(n.as||"div",{ref:s},t.default())}}}),Is=["textContent"],Ds={inheritAttrs:!1},As=st({...Ds,__name:"Modal",props:{heading:{type:String,required:!0},modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(n,{emit:t}){const{t:e}=Rt(),s=L(),i=()=>t("update:modelValue",!1);return j(s,a=>{a==null||a.showModal()}),(a,o)=>{const l=Ft;return n.modelValue?(w(),tt(Nn,{key:0,to:"body"},[F(r(Es),{options:{immediate:!0,initialFocus:!1}},{default:G(()=>[c("dialog",{ref_key:"dialog",ref:s,"aria-modal":"",onClick:i,onClose:i},[c("article",Dt(a.$attrs,{onClick:o[0]||(o[0]=X(()=>{},["stop"]))}),[c("h3",{textContent:P(n.heading)},null,8,Is),Ut(a.$slots,"default"),c("footer",{class:T(a.$style.footer)},[Ut(a.$slots,"footer-pre"),F(l,{class:"secondary",onClick:i},{default:G(()=>[q(P(r(e)("main.close")),1)]),_:1}),Ut(a.$slots,"footer")],2)],16)],544)]),_:3})])):nt("v-if",!0)}}}),Rs="f_-",Fs={footer:Rs},zs={$style:Fs},fn=Ct(As,[["__cssModules",zs]]),de=zt(()=>L()),Os=(n,t)=>{const e=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),s=document.createElement("a");s.setAttribute("download",t),s.setAttribute("href",n),s.setAttribute("target","_blank"),s.dispatchEvent(e)},Ls=async(n,t)=>{const e=new XMLSerializer().serializeToString(n),s=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),i=new Image,a=URL.createObjectURL(s);await new Promise((o,l)=>{i.onload=function(){t.drawImage(i,0,0),URL.revokeObjectURL(a),o()},i.onabort=i.onerror=()=>l(),i.src=a})},Vt={JPG:1,PNG:2},Ps={[Vt.JPG]:{encoding:"image/jpeg",extension:"jpg"},[Vt.PNG]:{encoding:"image/png",extension:"png"}},Bs=n=>{var s;const t=n.cloneNode(!0),e=window.getComputedStyle(n);return(s=t.querySelector("circle"))==null||s.remove(),t.style.setProperty("--background-color-transparent",e.getPropertyValue("--background-color-transparent")),t.style.color=t.style.fill=e.getPropertyValue("--color"),t.style.stroke="#fff",t.style.fontFamily="Arial",t.style.fontSize="20px",t},vn=zt(()=>{const n=document.createElement("canvas"),t=n==null?void 0:n.getContext("2d"),e=de(),s=O(()=>e.value&&t);return{triggerDownload:async({filename:a,filetype:o,quality:l,width:u,height:d})=>{if(!s.value)return;n.width=u,n.height=d,await Ls(Bs(e.value),t);const{encoding:f,extension:b}=Ps[o],v=n.toDataURL(f,l);Os(v,`${a}.${b}`)},isSupported:s}}),Gs=Hn({...Un,xs:480}),_t={px:1,"%":2,in:3,mm:4},Ns=(n,t,e)=>{let s=n;switch(t){case _t["%"]:s=n*100/e;break;case _t.in:s=n/window.devicePixelRatio;break;case _t.mm:s=n*25.4/window.devicePixelRatio;break}return+s.toFixed(6)},Hs=(n,t,e)=>{let s=n;switch(t){case _t["%"]:s=n/100*e;break;case _t.in:s=n*window.devicePixelRatio;break;case _t.mm:s=n*window.devicePixelRatio/25.4;break}return+s.toFixed(5)},Ve=(n,t,e)=>{const s=L(0),i=L(n.value-1),a=L(0);return j([n,t],([o,l],[,u])=>{(i.value!==o||l!==u)&&(i.value=o,s.value=Ns(o,l,e.value))},{immediate:!0}),j(a,o=>{s.value!==o&&(i.value=Hs(o,t.value,e.value))}),j(s,o=>a.value=o,{immediate:!0}),a},Us={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Vs=c("path",{fill:"currentColor",d:"M24 14h-2V8a6 6 0 0 0-12 0v6H8a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V16a2 2 0 0 0-2-2ZM12 8a4 4 0 0 1 8 0v6h-8Zm12 20H8V16h16Z"},null,-1),Ws=[Vs];function Ks(n,t){return w(),E("svg",Us,Ws)}const js={name:"carbon-locked",render:Ks},Ys={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},qs=c("path",{fill:"currentColor",d:"M24 14H12V8a4 4 0 0 1 8 0h2a6 6 0 0 0-12 0v6H8a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V16a2 2 0 0 0-2-2Zm0 14H8V16h16Z"},null,-1),Xs=[qs];function Zs(n,t){return w(),E("svg",Ys,Xs)}const Js={name:"carbon-unlocked",render:Zs},Qs=["onSubmit"],ta={class:"flex-grow"},ea=["aria-invalid"],na=["value","textContent"],sa=["aria-invalid"],aa=["aria-invalid"],ia=["data-tooltip"],oa=["value","textContent"],ra=["aria-invalid"],la=st({__name:"BoardControlsSvgDownloadModalContent",props:{boardWidth:{type:Number,required:!0},boardHeight:{type:Number,required:!0}},emits:["downloadFinish"],setup(n,{emit:t}){const e=n,{t:s}=Rt(),{triggerDownload:i}=vn(),a=Xt("FA_FILENAME","fast-angle-image"),{boardHeight:o,boardWidth:l}=an(e),u=L(o.value),d=L(l.value),f=Xt("FA_SIZE_UNIT",_t.px),b=L(!0),v=L(l.value/o.value);Gs.isGreaterOrEqual("xl")&&j([l,o],([k,C])=>{d.value=k,u.value=C,v.value=k/C});const h=Ve(u,f,o),m=Ve(d,f,l);j([m,h],([k,C])=>{b.value||(v.value=k/C)},{flush:"sync",immediate:!0}),j(h,()=>{h.value<0&&(h.value=1),b.value&&h.value!==+(m.value/v.value).toFixed(3)&&(m.value=+(h.value*v.value).toFixed(3))},{flush:"sync"}),j(m,()=>{m.value<0&&(m.value=1),b.value&&m.value!==+(h.value*v.value).toFixed(3)&&(h.value=+(m.value/v.value).toFixed(3))},{flush:"sync"});const $=Xt("FA_FILETYPE",Vt.PNG),M=Xt("FA_QUALITY",100);j(M,()=>{M.value>100&&(M.value=100),M.value<0&&(M.value=0)});const S=async()=>{await i({filename:a.value,filetype:$.value,quality:M.value/100,width:d.value,height:u.value}).catch(()=>{}),t("downloadFinish")};return(k,C)=>{const I=Ft;return w(),E("form",{onSubmit:X(S,["prevent"])},[c("div",{class:T(k.$style.name)},[c("label",ta,[q(P(r(s)("board.nav.download_image.name_label"))+" ",1),xt(c("input",{"onUpdate:modelValue":C[0]||(C[0]=y=>Mt(a)?a.value=y:null),type:"text",name:"name",required:"","aria-invalid":!r(a)},null,8,ea),[[Bt,r(a)]])]),c("label",{class:T(k.$style["label--big"])},[q(P(r(s)("board.nav.download_image.format_label"))+" ",1),xt(c("select",{"onUpdate:modelValue":C[1]||(C[1]=y=>Mt($)?$.value=y:null),required:""},[(w(!0),E(ot,null,Pt(Object.keys(r(Vt)),y=>(w(),E("option",{key:y,value:r(Vt)[y],textContent:P(y)},null,8,na))),128))],512),[[ze,r($)]])],2)],2),c("fieldset",{class:T(k.$style.sizing)},[c("legend",null,[c("small",null,P(r(s)("board.nav.download_image.sizing_label")),1)]),c("label",{class:T(k.$style.label)},[q(P(r(s)("board.nav.download_image.width_label"))+" ",1),xt(c("input",{"onUpdate:modelValue":C[2]||(C[2]=y=>Mt(m)?m.value=y:null),min:"1",type:"number",step:"0.000001",name:"width",required:"","aria-invalid":!r(m)||r(m)<1},null,8,sa),[[Bt,r(m),void 0,{number:!0}]])],2),c("label",{class:T(k.$style.label)},[q(P(r(s)("board.nav.download_image.height_label"))+" ",1),xt(c("input",{"onUpdate:modelValue":C[3]||(C[3]=y=>Mt(h)?h.value=y:null),min:"1",type:"number",step:"0.000001",name:"height",required:"","aria-invalid":!r(h)||r(h)<1},null,8,aa),[[Bt,r(h),void 0,{number:!0}]])],2),c("label",null,[q(" \xA0 "),c("div",{class:T(k.$style["aspect-ratio"]),"data-tooltip":r(s)("board.nav.download_image.keep_aspect_ratio")},[F(I,{"aria-label":r(s)("board.nav.download_image.keep_aspect_ratio"),class:T([k.$style["aspect-ratio-btn"],{[k.$style["aspect-ratio-btn--inactive"]]:!b.value}]),onClick:C[4]||(C[4]=y=>b.value=!b.value)},{default:G(()=>[b.value?(w(),tt(r(js),{key:0})):(w(),tt(r(Js),{key:1}))]),_:1},8,["aria-label","class"])],10,ia)]),c("label",{class:T([k.$style.label,k.$style["label--small"]])},[q(P(r(s)("board.nav.download_image.unit_label"))+" ",1),xt(c("select",{"onUpdate:modelValue":C[5]||(C[5]=y=>Mt(f)?f.value=y:null),required:""},[(w(!0),E(ot,null,Pt(Object.keys(r(_t)),y=>(w(),E("option",{key:y,value:r(_t)[y],textContent:P(y)},null,8,oa))),128))],512),[[ze,r(f)]])],2)],2),c("label",null,[c("span",{class:T(k.$style.quality)},[q(P(r(s)("board.nav.download_image.quality_label"))+" ",1),xt(c("input",{"onUpdate:modelValue":C[6]||(C[6]=y=>Mt(M)?M.value=y:null),type:"number",min:"1",max:"100",class:T(k.$style.quality__input),name:"quality","aria-invalid":!r(M)||r(M)>100||r(M)<1},null,10,ra),[[Bt,r(M),void 0,{number:!0}]]),q(" % ")],2),xt(c("input",{"onUpdate:modelValue":C[7]||(C[7]=y=>Mt(M)?M.value=y:null),type:"range",min:"1",max:"100",name:"quality"},null,512),[[Bt,r(M),void 0,{number:!0}]])])],40,Qs)}}}),ua="f_aa",ca="f_ad",da="f_ae",ha="f_ai",fa="f_aj",va={label:ua,"label--big":"f_ab","label--small":"f_ac",sizing:ca,name:da,"aspect-ratio":"f_af","aspect-ratio-btn":"f_ag","aspect-ratio-btn--inactive":"f_ah",quality:ha,quality__input:fa},pa={$style:va},ma=Ct(la,[["__cssModules",pa]]),he=zt(()=>L()),ga={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},ba=c("path",{fill:"currentColor",d:"M26 24v4H6v-4H4v4a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2v-4zm0-10l-1.41-1.41L17 20.17V2h-2v18.17l-7.59-7.58L6 14l10 10l10-10z"},null,-1),_a=[ba];function ya(n,t){return w(),E("svg",ga,_a)}const xa={name:"carbon-download",render:ya},wa={key:0},$a=st({__name:"BoardControlsSvgDownload",props:{disabled:{type:Boolean,default:!1}},setup(n){const{t}=Rt(),{isSupported:e}=vn(),s=he(),{height:i,width:a}=ye(s),o=L(!1),l=L(!1),u="board_svg_download_form";return xe({onEventFired(d){(d.ctrlKey||d.metaKey)&&d.key==="s"&&(d.preventDefault(),o.value=!0)},passive:!1}),(d,f)=>{const b=ma,v=Ft,h=fn;return r(e)?(w(),E("li",wa,[F(v,{tooltip:`${r(t)("board.nav.download_image.action")} [ctrl + s][\u2318 + s]`,"tooltip-placement":"left",disabled:n.disabled?void 0:!0,onClick:f[3]||(f[3]=m=>o.value=!0),onTouchstart:f[4]||(f[4]=X(m=>o.value=!0,["stop","prevent"]))},{default:G(()=>[F(r(xa)),F(h,{modelValue:o.value,"onUpdate:modelValue":f[2]||(f[2]=m=>o.value=m),heading:r(t)("board.nav.download_image.heading")},{footer:G(()=>[F(v,{type:"submit",role:"button",form:u,disabled:l.value,"aria-busy":l.value},{default:G(()=>[q(P(r(t)("board.nav.download_image.save")),1)]),_:1},8,["disabled","aria-busy"])]),default:G(()=>[F(b,{id:u,"board-height":r(i),"board-width":r(a),onSubmit:f[0]||(f[0]=m=>l.value=!0),onDownloadFinish:f[1]||(f[1]=m=>(l.value=!1,o.value=!1))},null,8,["board-height","board-width"])]),_:1},8,["modelValue","heading"])]),_:1},8,["tooltip","disabled"])])):nt("v-if",!0)}}}),Sa={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},ka=c("path",{fill:"currentColor",d:"M16 2a14 14 0 1 0 14 14A14 14 0 0 0 16 2Zm0 26a12 12 0 1 1 12-12a12 12 0 0 1-12 12Z"},null,-1),Ca=c("circle",{cx:"16",cy:"23.5",r:"1.5",fill:"currentColor"},null,-1),Ta=c("path",{fill:"currentColor",d:"M17 8h-1.5a4.49 4.49 0 0 0-4.5 4.5v.5h2v-.5a2.5 2.5 0 0 1 2.5-2.5H17a2.5 2.5 0 0 1 0 5h-2v4.5h2V17a4.5 4.5 0 0 0 0-9Z"},null,-1),Ma=[ka,Ca,Ta];function Ea(n,t){return w(),E("svg",Sa,Ma)}const Ia={name:"carbon-help",render:Ea},Da={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Aa=c("path",{fill:"currentColor",d:"M22.5 4c-2 0-3.9.8-5.3 2.2L16 7.4l-1.1-1.1c-2.9-3-7.7-3-10.6-.1l-.1.1c-3 3-3 7.8 0 10.8L16 29l11.8-11.9c3-3 3-7.8 0-10.8C26.4 4.8 24.5 4 22.5 4z"},null,-1),Ra=[Aa];function Fa(n,t){return w(),E("svg",Da,Ra)}const We={name:"carbon-favorite-filled",render:Fa},za=c("hr",null,null,-1),Oa=["textContent"],La={rol:"grid"},Pa=c("th",{scope:"col",textContent:"Win"},null,-1),Ba=c("th",{scope:"col",textContent:"Mac"},null,-1),Ga=["textContent"],Na=c("kbd",null,"ctrl",-1),Ha=c("kbd",null,"z",-1),Ua=c("kbd",null,"\u2318",-1),Va=c("kbd",null,"z",-1),Wa=["textContent"],Ka=c("kbd",null,"ctrl",-1),ja=c("kbd",null,"shift",-1),Ya=c("kbd",null,"z",-1),qa=c("kbd",null,"\u2318",-1),Xa=c("kbd",null,"shift",-1),Za=c("kbd",null,"z",-1),Ja=["textContent"],Qa=c("kbd",null,"ctrl",-1),ti=c("kbd",null,"s",-1),ei=c("kbd",null,"\u2318",-1),ni=c("kbd",null,"s",-1),si=["textContent"],ai=c("kbd",null,"f",-1),ii=[ai],oi=c("kbd",null,"f",-1),ri=[oi],li=["textContent"],ui=["textContent"],ci=["href","data-tooltip","title"],di={rel:"noreferrer",href:"https://github.com/FRSOURCE/fast-angle",target:"_blank",title:"GitHub"},hi={rel:"noreferrer",href:"https://www.frsource.org/blog/sponsoring",target:"_blank",title:"Sponsoring"},fi=c("hr",null,null,-1),vi=["textContent"],pi=["textContent"],mi=st({__name:"BoardControlsSvgHelp",setup(n){const{t,tm:e,rt:s}=Rt(),i=L(!1);return(a,o)=>{const l=Vn("RouterLink"),u=fn,d=Ft;return w(),E("li",null,[F(d,{tooltip:r(t)("board.nav.help.action"),"tooltip-placement":"left",onClick:o[1]||(o[1]=f=>i.value=!0),onTouchstartCapture:o[2]||(o[2]=X(f=>i.value=!0,["prevent","stop"]))},{default:G(()=>[F(r(Ia)),F(u,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=f=>i.value=f),heading:r(t)("board.nav.help.heading"),class:T(a.$style.modal)},{"footer-pre":G(()=>[c("a",{rel:"noreferrer",href:"https://github.com/FRSOURCE/fast-angle",target:"_blank",title:"GitHub",class:T(a.$style.donate)},[F(r(We)),c("small",null,P(r(t)("main.donate_us")),1)],2)]),default:G(()=>[c("ul",null,[nt(" eslint-disable-next-line vue/first-attribute-linebreak "),(w(!0),E(ot,null,Pt(r(e)("board.nav.help.content"),f=>(w(),E("li",{key:r(s)(f)},P(r(s)(f)),1))),128))]),za,c("div",{class:T(a.$style["hide-mobile"])},[c("h4",{textContent:P(r(t)("board.nav.help.key_bindings.heading"))},null,8,Oa),c("table",La,[c("thead",null,[c("tr",null,[Pa,Ba,c("th",{scope:"col",textContent:P(r(t)("board.nav.help.key_bindings.description"))},null,8,Ga)])]),c("tr",null,[c("td",{scope:"col",class:T(a.$style["binding-item-wrapper"])},[c("div",{class:T(a.$style["binding-item"])},[Na,c("small",{class:T(a.$style["binding-item-plus"])},"+",2),Ha],2)],2),c("td",{scope:"col",class:T(a.$style["binding-item-wrapper"])},[c("div",{class:T(a.$style["binding-item"])},[Ua,c("small",{class:T(a.$style["binding-item-plus"])},"+",2),Va],2)],2),c("td",{scope:"col",textContent:P(r(t)("board.nav.undo"))},null,8,Wa)]),c("tr",null,[c("td",{scope:"col",class:T(a.$style["binding-item-wrapper"])},[c("div",{class:T(a.$style["binding-item"])},[Ka,c("small",{class:T(a.$style["binding-item-plus"])},"+",2),ja,c("small",{class:T(a.$style["binding-item-plus"])},"+",2),Ya],2)],2),c("td",{scope:"col",class:T(a.$style["binding-item-wrapper"])},[c("div",{class:T(a.$style["binding-item"])},[qa,c("small",{class:T(a.$style["binding-item-plus"])},"+",2),Xa,c("small",{class:T(a.$style["binding-item-plus"])},"+",2),Za],2)],2),c("td",{scope:"col",textContent:P(r(t)("board.nav.download_image.action"))},null,8,Ja)]),c("tr",null,[c("td",{scope:"col",class:T(a.$style["binding-item-wrapper"])},[c("div",{class:T(a.$style["binding-item"])},[Qa,c("small",{class:T(a.$style["binding-item-plus"])},"+",2),ti],2)],2),c("td",{scope:"col",class:T(a.$style["binding-item-wrapper"])},[c("div",{class:T(a.$style["binding-item"])},[ei,c("small",{class:T(a.$style["binding-item-plus"])},"+",2),ni],2)],2),c("td",{scope:"col",textContent:P(r(t)("board.nav.redo"))},null,8,si)]),c("tr",null,[c("td",{scope:"col",class:T(a.$style["binding-item-wrapper"])},[c("div",{class:T(a.$style["binding-item"])},ii,2)],2),c("td",{scope:"col",class:T(a.$style["binding-item-wrapper"])},[c("div",{class:T(a.$style["binding-item"])},ri,2)],2),c("td",{scope:"col",textContent:P(r(t)("board.nav.toggle_fullscreen"))},null,8,li)])])],2),c("h4",{textContent:P(r(t)("board.nav.help.heading_authors"))},null,8,ui),c("p",null,[q(P(r(t)("main.brought_to_you_by"))+" ",1),c("a",{href:`${r(Wn)}/`,"data-tooltip":r(t)("main.visit_our_website"),title:r(t)("main.visit_our_website")},"FRSOURCE",8,ci)]),c("p",null,[c("a",di,[F(r(Kn)),q(" "+P(r(t)("main.star_us_on_github")),1)])]),c("p",null,[c("a",hi,[F(r(We)),q(" "+P(r(t)("main.donate_us")),1)])]),fi,c("p",{class:T(a.$style.terms)},[F(l,{to:{name:`lang-${r(Oe)}-terms`}},{default:G(()=>[c("small",{textContent:P(r(t)("main.terms_and_conditions"))},null,8,vi)]),_:1},8,["to"]),F(l,{to:{name:`lang-${r(Oe)}-privacy-policy`}},{default:G(()=>[c("small",{textContent:P(r(t)("main.privacy_policy"))},null,8,pi)]),_:1},8,["to"])],2)]),_:1},8,["modelValue","heading","class"])]),_:1},8,["tooltip"])])}}}),gi="f_4",bi="f_9",_i="f__",yi={modal:gi,"hide-mobile":"f_5","binding-item":"f_6","binding-item-plus":"f_7","list-item":"f_8",terms:bi,donate:_i},xi={$style:yi},wi=Ct(mi,[["__cssModules",xi]]),$i={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Si=c("path",{fill:"currentColor",d:"M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"},null,-1),ki=c("path",{fill:"currentColor",d:"M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"},null,-1),Ci=[Si,ki];function Ti(n,t){return w(),E("svg",$i,Ci)}const Mi={name:"carbon-copy",render:Ti},Ei={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Ii=c("path",{fill:"currentColor",d:"m13 24l-9-9l1.414-1.414L13 21.171L26.586 7.586L28 9L13 24z"},null,-1),Di=[Ii];function Ai(n,t){return w(),E("svg",Ei,Di)}const Ri={name:"carbon-checkmark",render:Ai},Fi=st({__name:"BoardSummaryItem",props:{value:{type:Number,default:0}},setup(n){const t=n,e=O(()=>t.value?t.value.toFixed(3):""),{copy:s,copied:i,isSupported:a}=jn({source:e});return(o,l)=>{const u=Ft;return w(),E("small",{class:T(o.$style.item),onClick:l[0]||(l[0]=()=>r(s)())},[c("div",null,[Ut(o.$slots,"default"),c("span",{class:T(o.$style.text)},[r(e)?(w(),E(ot,{key:0},[q(P(r(e))+"\xB0",1)],64)):(w(),E(ot,{key:1},[q("?")],64))],2)]),r(a)&&r(e)?(w(),tt(u,{key:0,class:T(o.$style.btn),disabled:r(i)},{default:G(()=>[r(i)?(w(),tt(r(Ri),{key:0})):(w(),tt(r(Mi),{key:1}))]),_:1},8,["class","disabled"])):nt("v-if",!0)],2)}}}),zi="f_1",Oi="f_2",Li="f_3",Pi={item:zi,text:Oi,btn:Li},Bi={$style:Pi},Gi=Ct(Fi,[["__cssModules",Bi]]),me=4,re=zt(()=>{const n=L([]),t=L([]),e=L(me-1);let s=()=>{},i=()=>{};j(n,S=>{t.value=[...S]},{deep:!0,flush:"sync"});const a=(S,k)=>{++e.value>=me&&(e.value=0,n.value=[]);const C=Math.floor(e.value/2);if(e.value%2){const I=n.value[C][0];if(!I)return;n.value[C]=[I,[S,k]]}else n.value[C]=[[S,k]]},o=(S,k)=>{const C=e.value+1>=me?0:e.value+1,I=Math.floor(C/2);if(C%2){const y=t.value[I][0];if(!y)return;t.value[I]=[y,[S,k]]}else t.value[I]=[[S,k]]},{undo:l,redo:u,canUndo:d,canRedo:f}=se(e),{undo:b,redo:v,canUndo:h,canRedo:m}=se(n,{deep:!0}),$=()=>{b(),s(),l()},M=()=>{v(),i(),u()};return xe({onEventFired(S){(S.ctrlKey||S.metaKey)&&S.key==="z"&&(S.shiftKey?M():$())}}),{step:e,lines:t,drawNextPoint:a,predictNextPoint:o,undo:$,redo:M,canUndo:O(()=>d.value&&h.value),canRedo:O(()=>f.value&&m.value),registerOnUndo:S=>s=S,registerOnRedo:S=>i=S}}),pn=n=>{const[[[t,e],[s,i]],[[a,o],[l,u]]]=n,d=s-t,f=i-e,b=l-a,v=u-o,h=Math.atan2(d*v-f*b,d*b+f*v);return Math.abs(h)*(180/Math.PI)},we=n=>O(()=>{var t,e;return(((t=n.value[0])==null?void 0:t.length)||0)<2||(((e=n.value[1])==null?void 0:e.length)||0)<2?0:pn(n.value)});function Ni(){try{return"constructor"in GestureEvent}catch{return!1}}function mn(){return typeof window<"u"&&"ontouchstart"in window}function gn(n){return"pointerId"in n?null:n.type==="touchend"?n.changedTouches:n.targetTouches}function $e(n){return Array.from(gn(n)).map(t=>t.identifier)}function gt(n){const t="buttons"in n?n.buttons:0,{shiftKey:e,altKey:s,metaKey:i,ctrlKey:a}=n;return{buttons:t,shiftKey:e,altKey:s,metaKey:i,ctrlKey:a}}const fe=n=>n;function Ke(n,t=fe){const e=gn(n),{clientX:s,clientY:i}=e?e[0]:n;return t([s,i])}function je(n,t,e=fe){const[s,i]=Array.from(n.touches).filter(h=>t.includes(h.identifier));if(!s||!i)throw Error("The event doesn't have two pointers matching the pointerIds");const a=i.clientX-s.clientX,o=i.clientY-s.clientY,l=(i.clientX+s.clientX)/2,u=(i.clientY+s.clientY)/2,d=Math.hypot(a,o),f=-(Math.atan2(a,o)*180)/Math.PI,b=e([d,f]),v=e([l,u]);return{values:b,origin:v}}const Ye=40,qe=800;function bn(n,t=fe){let{deltaX:e,deltaY:s,deltaMode:i}=n;return i===1?(e*=Ye,s*=Ye):i===2&&(e*=qe,s*=qe),t([e,s])}function Xe(n,t=fe){return t([n.scale,n.rotation])}function _n(){}function yn(...n){return n.length===0?_n:n.length===1?n[0]:function(){var t;for(let e of n)t=e.apply(this,arguments)||t;return t}}function kt(n,t){if(n===void 0){if(t===void 0)throw new Error("Must define fallback value if undefined is expected");n=t}return Array.isArray(n)?n:[n,n]}function Ze(n,t){return Object.assign({},t,n||{})}function le(n,...t){return typeof n=="function"?n(...t):n}function Nt(n){return{_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,_dragStarted:!1,_dragPreventScroll:!1,_dragIsTap:!0,_dragDelayed:!1,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:_n,canceled:!1,memo:void 0,args:void 0,...n}}function xn(){const n={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1,locked:!1},t=Nt({_pointerId:void 0,axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,tap:!1,swipe:[0,0]}),e=Nt({_pointerIds:[],da:[0,0],vdva:[0,0],origin:void 0,turns:0}),s=Nt({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),i=Nt({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),a=Nt({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:n,drag:t,pinch:e,wheel:s,move:i,scroll:a}}class Hi{constructor(t){this.classes=t,this.pointerIds=new Set,this.touchIds=new Set,this.supportsTouchEvents=mn(),this.supportsGestureEvents=Ni(),this.bind=(...e)=>{const s={};for(let i of this.classes)new i(this,e).addBindings(s);for(let i in this.nativeRefs)V(s,i,a=>this.nativeRefs[i]({...this.state.shared,event:a,args:e}));return this.config.domTarget?Ki(this,s):ji(this,s)},this.clean=()=>{const{eventOptions:e,domTarget:s}=this.config,i=r(s);i&&Yt(i,Sn(this.domListeners),e),Object.values(this.timeouts).forEach(clearTimeout),Ui(this)},this.classes=t,this.state=xn(),this.timeouts={},this.domListeners=[],this.windowListeners={}}}function wn(n,t){"pointerId"in t?n.pointerIds.add(t.pointerId):n.touchIds=new Set($e(t))}function $n(n,t){"pointerId"in t?n.pointerIds.delete(t.pointerId):$e(t).forEach(e=>n.touchIds.delete(e))}function Ui(n){const{config:{window:t,eventOptions:e},windowListeners:s}=n,i=r(t);if(!!i){for(let a in s){const o=s[a];Yt(i,o,e)}n.windowListeners={}}}function Vi({config:n,windowListeners:t},e,s=n.eventOptions){const i=r(n.window);!i||(Yt(i,t[e],s),delete t[e])}function Wi({config:n,windowListeners:t},e,s=[],i=n.eventOptions){const a=r(n.window);!a||(Yt(a,t[e],i),kn(a,t[e]=s,i))}function Ki({config:n,domListeners:t},e){const{eventOptions:s,domTarget:i}=n,a=r(i);if(!a)throw new Error("domTarget must be defined");Yt(a,Sn(t),s);for(let[o,l]of Object.entries(e)){const u=o.slice(2).toLowerCase();t.push([u,yn(...l)])}kn(a,t,s)}function ji({config:n},t){const e={},s=n.eventOptions.capture?"Capture":"";for(let[i,a]of Object.entries(t)){const o=Array.isArray(a)?a:[a],l=i+s;e[l]=yn(...o)}return e}function Sn(n=[]){return n.splice(0,n.length)}function V(n,t,e){n[t]||(n[t]=[]),n[t].push(e)}function kn(n,t=[],e={}){if(!!n)for(let[s,i]of t)n.addEventListener(s,i,e)}function Yt(n,t=[],e={}){if(!!n)for(let[s,i]of t)n.removeEventListener(s,i,e)}function ue(n,t){return n.map((e,s)=>e+t[s])}function Se(n,t){return n.map((e,s)=>e-t[s])}function Kt(n){return Math.hypot(...n)}function Yi(n,t=n){const e=Kt(t),s=e===0?0:1/e,i=t.map(o=>s*o);return{distance:Kt(n),direction:i}}function Cn(n,t,e){const s=Kt(t),i=s===0?0:1/s,a=e===0?0:1/e,o=a*s,l=t.map(f=>a*f),u=t.map(f=>i*f),d=Kt(n);return{velocities:l,velocity:o,distance:d,direction:u}}function ce(n){return Math.sign?Math.sign(n):Number(n>0)-Number(n<0)||+n}function qi(n,t,e){return Math.max(t,Math.min(n,e))}function Xi(n,t){return Math.pow(n,t*5)}function Je(n,t,e){return t===0||Math.abs(t)===1/0?Xi(n,e):n*t*e/(t+e*n)}function Qe(n,t,e,s=.15){return s===0?qi(n,t,e):n<t?-Je(t-n,e-t,s)+t:n>e?+Je(n-e,e-t,s)+e:n}const bt=new Map,Zi=n=>n;class Tn{constructor(t,e=[]){this.controller=t,this.args=e,this.debounced=!0,this.setTimeout=(s,i=140,...a)=>{clearTimeout(this.controller.timeouts[this.stateKey]),this.controller.timeouts[this.stateKey]=window.setTimeout(s,i,...a)},this.clearTimeout=()=>{clearTimeout(this.controller.timeouts[this.stateKey])},this.fireGestureHandler=(s=!1)=>{if(this.state._blocked)return this.debounced||(this.state._active=!1,this.clean()),null;if(!s&&!this.state.intentional&&!this.config.triggerAllEvents)return null;if(this.state.intentional){const u=this.state.active,d=this.state._active;this.state.active=d,this.state.first=d&&!u,this.state.last=u&&!d,this.controller.state.shared[this.ingKey]=d}const i=this.controller.pointerIds.size||this.controller.touchIds.size,a=this.controller.state.shared.buttons>0||i>0,o={...this.controller.state.shared,...this.state,...this.mapStateValues(this.state),locked:!!document.pointerLockElement,touches:i,down:a},l=this.handler(o);return this.state.memo=l!==void 0?l:this.state.memo,o},this.controller=t,this.args=e}get config(){return this.controller.config[this.stateKey]}get enabled(){return this.controller.config.enabled&&this.config.enabled}get state(){return this.controller.state[this.stateKey]}get handler(){return this.controller.handlers[this.stateKey]}get transform(){return this.config.transform||this.controller.config.transform||Zi}updateSharedState(t){Object.assign(this.controller.state.shared,t)}updateGestureState(t){Object.assign(this.state,t)}checkIntentionality(t,e){return{_intentional:t,_blocked:!1}}getMovement(t){const{rubberband:e,threshold:s}=this.config,{_bounds:i,_initial:a,_active:o,_intentional:l,lastOffset:u,movement:d}=this.state,f=this.getInternalMovement(t,this.state),b=this.transform(s).map(Math.abs),v=l[0]===!1?tn(f[0],b[0]):l[0],h=l[1]===!1?tn(f[1],b[1]):l[1],m=this.checkIntentionality([v,h],f);if(m._blocked)return{...m,_movement:f,delta:[0,0]};const $=m._intentional,M=f;let S=[$[0]!==!1?f[0]-$[0]:0,$[1]!==!1?f[1]-$[1]:0];const k=ue(S,u),C=o?e:[0,0];return S=en(i,ue(S,a),C),{...m,intentional:$[0]!==!1||$[1]!==!1,_initial:a,_movement:M,movement:S,values:t,offset:en(i,k,C),delta:Se(S,d)}}clean(){this.clearTimeout()}}function tn(n,t){return Math.abs(n)>=t?ce(n)*t:!1}function en(n,[t,e],[s,i]){const[[a,o],[l,u]]=n;return[Qe(t,a,o,s),Qe(e,l,u,i)]}function Q({state:n},t,e){const{timeStamp:s,type:i}=t,a=n.values,o=e?0:s-n.startTime;return{_lastEventType:i,event:t,timeStamp:s,elapsedTime:o,previous:a}}function Wt({state:n,config:t,stateKey:e,args:s},i,a){const o=n.offset,l=a.timeStamp,{initial:u,bounds:d}=t,f={...xn()[e],_active:!0,args:s,values:i,initial:i,offset:o,lastOffset:o,startTime:l};return{...f,_initial:le(u,f),_bounds:le(d,f)}}class Mn extends Tn{getInternalMovement(t,e){return Se(t,e.initial)}checkIntentionality(t,e){if(t[0]===!1&&t[1]===!1)return{_intentional:t,axis:this.state.axis};const[s,i]=e.map(Math.abs),a=this.state.axis||(s>i?"x":s<i?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:t,_blocked:!1,axis:a}:a?!!this.config.axis&&a!==this.config.axis?{_intentional:t,_blocked:!0,axis:a}:(t[a==="x"?1:0]=!1,{_intentional:t,_blocked:!1,axis:a}):{_intentional:[!1,!1],_blocked:!1,axis:a}}getKinematics(t,e){const s=this.getMovement(t);if(!s._blocked){const i=e.timeStamp-this.state.timeStamp;Object.assign(s,Cn(s.movement,s.delta,i))}return s}mapStateValues(t){return{xy:t.values,vxvy:t.velocities}}}const Ji=3;function nn(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}class Qi extends Mn{constructor(){super(...arguments),this.ingKey="dragging",this.stateKey="drag",this.setPointerCapture=t=>{if(this.config.useTouch||document.pointerLockElement)return;const{target:e,pointerId:s}=t;e&&"setPointerCapture"in e&&e.setPointerCapture(s),this.updateGestureState({_dragTarget:e,_dragPointerId:s})},this.releasePointerCapture=()=>{if(this.config.useTouch||document.pointerLockElement)return;const{_dragTarget:t,_dragPointerId:e}=this.state;if(e&&t&&"releasePointerCapture"in t&&(!("hasPointerCapture"in t)||t.hasPointerCapture(e)))try{t.releasePointerCapture(e)}catch{}},this.preventScroll=t=>{this.state._dragPreventScroll&&t.cancelable&&t.preventDefault()},this.getEventId=t=>this.config.useTouch?t.changedTouches[0].identifier:t.pointerId,this.isValidEvent=t=>this.state._pointerId===this.getEventId(t),this.shouldPreventWindowScrollY=this.config.preventWindowScrollY&&this.controller.supportsTouchEvents,this.setUpWindowScrollDetection=t=>{nn(t),Wi(this.controller,this.stateKey,[["touchmove",this.preventScroll],["touchend",this.clean.bind(this)],["touchcancel",this.clean.bind(this)]],{passive:!1}),this.setTimeout(this.startDrag.bind(this),250,t)},this.setUpDelayedDragTrigger=t=>{this.state._dragDelayed=!0,nn(t),this.setTimeout(this.startDrag.bind(this),this.config.delay,t)},this.setStartState=t=>{const e=Ke(t,this.transform);this.updateSharedState(gt(t)),this.updateGestureState({...Wt(this,e,t),...Q(this,t,!0),_pointerId:this.getEventId(t)}),this.updateGestureState(this.getMovement(e))},this.onDragStart=t=>{wn(this.controller,t),!(!this.enabled||this.state._active)&&(this.setStartState(t),this.setPointerCapture(t),this.shouldPreventWindowScrollY?this.setUpWindowScrollDetection(t):this.config.delay>0?this.setUpDelayedDragTrigger(t):this.startDrag(t,!0))},this.onDragChange=t=>{if(this.state.canceled||!this.state._active||!this.isValidEvent(t)||this.state._lastEventType===t.type&&t.timeStamp===this.state.timeStamp)return;let e;if(document.pointerLockElement){const{movementX:u,movementY:d}=t;e=ue(this.transform([u,d]),this.state.values)}else e=Ke(t,this.transform);const s=this.getKinematics(e,t);if(!this.state._dragStarted){if(this.state._dragDelayed){this.startDrag(t);return}if(this.shouldPreventWindowScrollY)if(!this.state._dragPreventScroll&&s.axis)if(s.axis==="x")this.startDrag(t);else{this.state._active=!1;return}else return;else return}const i=gt(t);this.updateSharedState(i);const a=Q(this,t),o=Kt(s._movement);let{_dragIsTap:l}=this.state;l&&o>=Ji&&(l=!1),this.updateGestureState({...a,...s,_dragIsTap:l}),this.fireGestureHandler()},this.onDragEnd=t=>{if($n(this.controller,t),!this.isValidEvent(t)||(this.clean(),!this.state._active))return;this.state._active=!1;const e=this.state._dragIsTap,[s,i]=this.state.velocities,[a,o]=this.state.movement,[l,u]=this.state._intentional,[d,f]=this.config.swipeVelocity,[b,v]=this.config.swipeDistance,h=this.config.swipeDuration,m={...Q(this,t),...this.getMovement(this.state.values)},$=[0,0];m.elapsedTime<h&&(l!==!1&&Math.abs(s)>d&&Math.abs(a)>b&&($[0]=ce(s)),u!==!1&&Math.abs(i)>f&&Math.abs(o)>v&&($[1]=ce(i))),this.updateSharedState({buttons:0}),this.updateGestureState({...m,tap:e,swipe:$}),this.fireGestureHandler(this.config.filterTaps&&e===!0)},this.clean=()=>{super.clean(),this.state._dragStarted=!1,this.releasePointerCapture(),Vi(this.controller,this.stateKey)},this.onCancel=()=>{this.state.canceled||(this.updateGestureState({canceled:!0,_active:!1}),this.updateSharedState({buttons:0}),Yn(this.fireGestureHandler))},this.onClick=t=>{this.state._dragIsTap||t.stopPropagation()}}startDrag(t,e=!1){!this.state._active||this.state._dragStarted||(e||this.setStartState(t),this.updateGestureState({_dragStarted:!0,_dragPreventScroll:!0,cancel:this.onCancel}),this.clearTimeout(),this.fireGestureHandler())}addBindings(t){if(this.config.useTouch?(V(t,"onTouchStart",this.onDragStart),V(t,"onTouchMove",this.onDragChange),V(t,"onTouchEnd",this.onDragEnd),V(t,"onTouchCancel",this.onDragEnd)):(V(t,"onPointerDown",this.onDragStart),V(t,"onPointerMove",this.onDragChange),V(t,"onPointerUp",this.onDragEnd),V(t,"onPointerCancel",this.onDragEnd)),this.config.filterTaps){const e=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";V(t,e,this.onClick)}}}function ke(n,t){let e,s=[],i,a=!1;function o(...l){return a&&e===this&&t(l,s)||(i=n.apply(this,l),a=!0,e=this,s=l),i}return o}function ee(n,t){if(n===t)return!0;if(n&&t&&typeof n=="object"&&typeof t=="object"){if(n.constructor!==t.constructor)return!1;let e,s,i;if(Array.isArray(n)){if(e=n.length,e!==t.length)return!1;for(s=e;s--!==0;)if(!ee(n[s],t[s]))return!1;return!0}let a;if(typeof Map=="function"&&n instanceof Map&&t instanceof Map){if(n.size!==t.size)return!1;for(a=n.entries();!(s=a.next()).done;)if(!t.has(s.value[0]))return!1;for(a=n.entries();!(s=a.next()).done;)if(!ee(s.value[1],t.get(s.value[0])))return!1;return!0}if(typeof Set=="function"&&n instanceof Set&&t instanceof Set){if(n.size!==t.size)return!1;for(a=n.entries();!(s=a.next()).done;)if(!t.has(s.value[0]))return!1;return!0}if(n.constructor===RegExp)return n.source===t.source&&n.flags===t.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===t.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===t.toString();if(i=Object.keys(n),e=i.length,e!==Object.keys(t).length)return!1;for(s=e;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[s]))return!1;if(typeof Element<"u"&&n instanceof Element)return!1;for(s=e;s--!==0;)if(!(i[s]==="_owner"&&n.$$typeof)&&!ee(n[i[s]],t[i[s]]))return!1;return!0}return n!==n&&t!==t}function Ce(n,t){try{return ee(n,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}function qt(n={},t){const e={};for(const[s,i]of Object.entries(t))switch(typeof i){case"function":e[s]=i.call(e,n[s],s,n);break;case"object":e[s]=qt(n[s],i);break;case"boolean":i&&(e[s]=n[s]);break}return e}const to=180,eo=.15,no=.5,so=50,ao=250,En={threshold(n=0){return kt(n)},rubberband(n=0){switch(n){case!0:return kt(eo);case!1:return kt(0);default:return kt(n)}},enabled(n=!0){return n},triggerAllEvents(n=!1){return n},initial(n=0){return typeof n=="function"?n:kt(n)},transform:!0},Te={...En,axis:!0,lockDirection(n=!1){return n},bounds(n={}){if(typeof n=="function")return a=>Te.bounds(n(a));const{left:t=-1/0,right:e=1/0,top:s=-1/0,bottom:i=1/0}=n;return[[t,e],[s,i]]}},io=typeof window<"u"&&window.document&&window.document.createElement,oo={enabled(n=!0){return n},domTarget:!0,window(n=io?window:void 0){return n},eventOptions({passive:n=!0,capture:t=!1}={}){return{passive:n,capture:t}},transform:!0},ro={...En,bounds(n,t,{distanceBounds:e={},angleBounds:s={}}){const i=o=>{const l=Ze(le(e,o),{min:-1/0,max:1/0});return[l.min,l.max]},a=o=>{const l=Ze(le(s,o),{min:-1/0,max:1/0});return[l.min,l.max]};return typeof e!="function"&&typeof s!="function"?[i(),a()]:o=>[i(o),a(o)]}},lo={...Te,useTouch(n=!0){return n&&mn()},preventWindowScrollY(n=!1){return n},threshold(n,t,{filterTaps:e=!1,lockDirection:s=!1,axis:i=void 0}){const a=kt(n,e?3:s||i?1:0);return this.filterTaps=e,a},swipeVelocity(n=no){return kt(n)},swipeDistance(n=so){return kt(n)},swipeDuration(n=ao){return n},delay(n=0){switch(n){case!0:return to;case!1:return 0;default:return n}}};function Me(n){return qt(n,oo)}function uo(n={}){return qt(n,Te)}function co(n={}){return qt(n,ro)}function ho(n={}){return qt(n,lo)}function fo({domTarget:n,eventOptions:t,window:e,enabled:s,...i}){const a=Me({domTarget:n,eventOptions:t,window:e,enabled:s});return a.drag=ho(i),a}function vo({domTarget:n,eventOptions:t,window:e,enabled:s,...i}){const a=Me({domTarget:n,eventOptions:t,window:e,enabled:s});return a.pinch=co(i),a}function po({domTarget:n,eventOptions:t,window:e,enabled:s,...i}){const a=Me({domTarget:n,eventOptions:t,window:e,enabled:s});return a.wheel=uo(i),a}function Ee(n,t,e={}){const s=mo(n),i=new Hi(s);return i.config=t,i.handlers=n,i.nativeRefs=e,qn()&&!t.manual&&(Xn(i.bind),Zn(i.clean)),i}function mo(n){const t=new Set;return n.drag&&t.add(bt.get("drag")),n.wheel&&t.add(bt.get("wheel")),n.scroll&&t.add(bt.get("scroll")),n.move&&t.add(bt.get("move")),n.pinch&&t.add(bt.get("pinch")),n.hover&&t.add(bt.get("hover")),t}function go(n,t={}){bt.set("drag",Qi);const e=L();return e.value||(e.value=ke(fo,Ce)),Ee({drag:n},e.value(t))}class bo extends Tn{getInternalMovement(t,e){const s=e.values[1];let[i,a=s]=t,o=a-s,l=e.turns;return Math.abs(o)>270&&(l+=ce(o)),Se([i,a-360*l],e.initial)}getKinematics(t,e){const s=this.getMovement(t),i=(t[1]-s._movement[1]-this.state.initial[1])/360,a=e.timeStamp-this.state.timeStamp,{distance:o,velocity:l,...u}=Cn(s.movement,s.delta,a);return{turns:i,...s,...u}}mapStateValues(t){return{da:t.values,vdva:t.velocities}}}const _o=7,yo=260;class xo extends bo{constructor(){super(...arguments),this.ingKey="pinching",this.stateKey="pinch",this.onPinchStart=t=>{wn(this.controller,t);const e=this.controller.touchIds;if(!this.enabled||this.state._active&&this.state._pointerIds.every(o=>e.has(o))||e.size<2)return;const s=Array.from(e).slice(0,2),{values:i,origin:a}=je(t,s,this.transform);this.updateSharedState(gt(t)),this.updateGestureState({...Wt(this,i,t),...Q(this,t,!0),_pointerIds:s,cancel:this.onCancel,origin:a}),this.updateGestureState(this.getMovement(i)),this.fireGestureHandler()},this.onPinchChange=t=>{const{canceled:e,_active:s}=this.state;if(e||!s||t.timeStamp===this.state.timeStamp)return;const i=gt(t);this.updateSharedState(i);try{const{values:a,origin:o}=je(t,this.state._pointerIds,this.transform),l=this.getKinematics(a,t);this.updateGestureState({...Q(this,t),...l,origin:o}),this.fireGestureHandler()}catch{this.onPinchEnd(t)}},this.onPinchEnd=t=>{$n(this.controller,t);const e=$e(t);this.state._pointerIds.every(s=>!e.includes(s))||(this.clean(),this.state._active&&(this.updateGestureState({...Q(this,t),...this.getMovement(this.state.values),_active:!1}),this.fireGestureHandler()))},this.onCancel=()=>{this.state.canceled||(this.updateGestureState({_active:!1,canceled:!0}),this.fireGestureHandler())},this.onGestureStart=t=>{if(!this.enabled)return;t.preventDefault();const e=Xe(t,this.transform);this.updateSharedState(gt(t)),this.updateGestureState({...Wt(this,e,t),...Q(this,t,!0),origin:[t.clientX,t.clientY],cancel:this.onCancel}),this.updateGestureState(this.getMovement(e)),this.fireGestureHandler()},this.onGestureChange=t=>{const{canceled:e,_active:s}=this.state;if(e||!s)return;t.preventDefault();const i=gt(t);this.updateSharedState(i);const a=Xe(t,this.transform);a[0]=(a[0]-this.state.event.scale)*yo+this.state.values[0];const o=this.getKinematics(a,t);this.updateGestureState({...Q(this,t),...o,origin:[t.clientX,t.clientY]}),this.fireGestureHandler()},this.onGestureEnd=t=>{this.clean(),this.state._active&&(this.updateGestureState({...Q(this,t),...this.getMovement(this.state.values),_active:!1,origin:[t.clientX,t.clientY]}),this.fireGestureHandler())},this.wheelShouldRun=t=>this.enabled&&t.ctrlKey,this.getWheelValuesFromEvent=t=>{const[,e]=bn(t,this.transform),{values:[s,i]}=this.state;return{values:[s-e*_o,i!==void 0?i:0],origin:[t.clientX,t.clientY],delta:[0,e]}},this.onWheel=t=>{!this.wheelShouldRun(t)||(this.setTimeout(this.onWheelEnd),this.state._active?this.onWheelChange(t):this.onWheelStart(t))},this.onWheelStart=t=>{const{values:e,delta:s,origin:i}=this.getWheelValuesFromEvent(t);t.cancelable&&t.preventDefault(),this.updateSharedState(gt(t)),this.updateGestureState({...Wt(this,e,t),...Q(this,t,!0),initial:this.state.values,offset:e,delta:s,origin:i}),this.updateGestureState(this.getMovement(e)),this.fireGestureHandler()},this.onWheelChange=t=>{t.cancelable&&t.preventDefault(),this.updateSharedState(gt(t));const{values:e,origin:s,delta:i}=this.getWheelValuesFromEvent(t);this.updateGestureState({...Q(this,t),...this.getKinematics(e,t),origin:s,delta:i}),this.fireGestureHandler()},this.onWheelEnd=()=>{this.clean(),this.state._active&&(this.state._active=!1,this.updateGestureState(this.getMovement(this.state.values)),this.fireGestureHandler())}}addBindings(t){this.controller.config.domTarget&&!this.controller.supportsTouchEvents&&this.controller.supportsGestureEvents?(V(t,"onGestureStart",this.onGestureStart),V(t,"onGestureChange",this.onGestureChange),V(t,"onGestureEnd",this.onGestureEnd)):(V(t,"onTouchStart",this.onPinchStart),V(t,"onTouchMove",this.onPinchChange),V(t,"onTouchEnd",this.onPinchEnd),V(t,"onTouchCancel",this.onPinchEnd),V(t,"onWheel",this.onWheel))}}class wo extends Mn{constructor(){super(...arguments),this.ingKey="wheeling",this.stateKey="wheel",this.debounced=!0,this.handleEvent=t=>{if(t.ctrlKey&&"pinch"in this.controller.handlers||!this.enabled)return;this.setTimeout(this.onEnd),this.updateSharedState(gt(t));const e=ue(bn(t,this.transform),this.state.values);if(this.state._active)this.updateGestureState({...Q(this,t),...this.getKinematics(e,t)});else{this.updateGestureState({...Wt(this,e,t),...Q(this,t,!0),initial:this.state.values});const s=this.getMovement(e),i=Yi(s.delta);this.updateGestureState(s),this.updateGestureState(i)}this.fireGestureHandler()},this.onEnd=()=>{if(this.clean(),!this.state._active)return;const t=this.getMovement(this.state.values);this.updateGestureState(t),this.updateGestureState({_active:!1,velocities:[0,0],velocity:0}),this.fireGestureHandler()}}addBindings(t){V(t,"onWheel",this.handleEvent)}}function $o(n,t={}){bt.set("pinch",xo);const e=L();return e.value||(e.value=ke(vo,Ce)),Ee({pinch:n},e.value(t))}function So(n,t={}){bt.set("wheel",wo);const e=L();return e.value||(e.value=ke(po,Ce)),Ee({wheel:n},e.value(t))}const ko=(n,t)=>{const e=Jn(t),s=O(()=>{var v,h;return(h=(v=r(e))==null?void 0:v.enabled)!=null?h:!0}),i=L(!1),a=L([0,0]),o=L(1),l=O({set(v){return v>10?o.value=10:v<.1?o.value=.1:o.value=v,o.value},get(){return o.value}}),u=L([0,0]),d=O(()=>{var v;return(v=_e(n))==null?void 0:v.getBoundingClientRect()}),f=v=>(v=(v+1800)/1800,v<=0?.01:v),b=({wheeling:v,dragging:h,pinching:m,intentional:$,enabled:M,touches:S,metaKey:k,ctrlKey:C,altKey:I})=>{const y=!M||!$?!1:h&&(S===2||k||I)||m||v&&!C;return i.value?requestAnimationFrame(()=>i.value=y):i.value=y,y};return go(({wheeling:v,dragging:h,pinching:m,touches:$,intentional:M,delta:S,metaKey:k,ctrlKey:C,altKey:I})=>{!b({wheeling:v,dragging:h,pinching:m,intentional:M,enabled:s.value,metaKey:k,ctrlKey:C,altKey:I,touches:$})||(a.value[0]+=S[0],a.value[1]+=S[1])},{domTarget:n,filterTaps:!0}),So(({event:v,delta:h,wheeling:m,dragging:$,pinching:M,touches:S,intentional:k,metaKey:C,ctrlKey:I,altKey:y})=>{!b({dragging:$,pinching:M,wheeling:m,intentional:k,enabled:s.value,touches:S,metaKey:C,ctrlKey:I,altKey:y})||(v.preventDefault(),a.value[0]+=h[0],a.value[1]+=h[1])},{domTarget:n,eventOptions:{passive:!1}}),$o(({offset:[v],origin:h,pinching:m,dragging:$,wheeling:M,metaKey:S,ctrlKey:k,altKey:C,touches:I,intentional:y})=>{if(!b({dragging:$,pinching:m,wheeling:M,intentional:y,enabled:s.value,touches:I,metaKey:S,altKey:C,ctrlKey:k}))return;const p=l.value;l.value=f(v),d.value&&(h[0]-=d.value.x,h[1]-=d.value.y,a.value[0]-=(h[0]-d.value.width/2)*(l.value-p),a.value[1]-=(h[1]-d.value.height/2)*(l.value-p)),a.value[0]-=h[0]-u.value[0],a.value[1]-=h[1]-u.value[1],u.value=h},{domTarget:n,eventOptions:{passive:!1},distanceBounds:()=>({min:-1800,max:16200})}),{offset:O(()=>[a.value[0]+u.value[0],a.value[1]+u.value[1]]),zoom:l,transformOrigin:u,active:i}},In=zt(()=>ko(de())),Dn=zt(()=>{const n=L(""),t=L(0),e=L(0);return{src:n,width:t,height:e,processFiles:i=>{if(!((i==null?void 0:i[0])instanceof File))return;const a=new FileReader;a.addEventListener("load",o=>{var l;if((l=o.target)!=null&&l.result){const u=new Image;u.onload=()=>{n.value=u.src,t.value=u.width,e.value=u.height},u.src=o.target.result.toString()}}),a.readAsDataURL(i[0])}}}),Co={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},To=c("path",{fill:"currentColor",d:"M20 2v2h6.586L18 12.582L19.414 14L28 5.414V12h2V2H20zm-6 17.416L12.592 18L4 26.586V20H2v10h10v-2H5.414L14 19.416z"},null,-1),Mo=[To];function Eo(n,t){return w(),E("svg",Co,Mo)}const Io={name:"carbon-maximize",render:Eo},Do={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Ao=c("path",{fill:"currentColor",d:"M4 18v2h6.586L2 28.582L3.414 30L12 21.414V28h2V18H4zM30 3.416L28.592 2L20 10.586V4h-2v10h10v-2h-6.586L30 3.416z"},null,-1),Ro=[Ao];function Fo(n,t){return w(),E("svg",Do,Ro)}const zo={name:"carbon-minimize",render:Fo},Oo={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Lo=c("path",{fill:"currentColor",d:"M18 12h-4V8h-2v4H8v2h4v4h2v-4h4v-2z"},null,-1),Po=c("path",{fill:"currentColor",d:"M21.448 20A10.856 10.856 0 0 0 24 13a11 11 0 1 0-11 11a10.856 10.856 0 0 0 7-2.552L27.586 29L29 27.586ZM13 22a9 9 0 1 1 9-9a9.01 9.01 0 0 1-9 9Z"},null,-1),Bo=[Lo,Po];function Go(n,t){return w(),E("svg",Oo,Bo)}const No={name:"carbon-zoom-in",render:Go},Ho={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Uo=c("path",{fill:"currentColor",d:"M8 12h10v2H8z"},null,-1),Vo=c("path",{fill:"currentColor",d:"M21.448 20A10.856 10.856 0 0 0 24 13a11 11 0 1 0-11 11a10.856 10.856 0 0 0 7-2.552L27.586 29L29 27.586ZM13 22a9 9 0 1 1 9-9a9.01 9.01 0 0 1-9 9Z"},null,-1),Wo=[Uo,Vo];function Ko(n,t){return w(),E("svg",Ho,Wo)}const jo={name:"carbon-zoom-out",render:Ko},Yo={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},qo=c("path",{fill:"currentColor",d:"M4 20v2h4.586L2 28.586L3.414 30L10 23.414V28h2v-8H4zm15-6a3 3 0 1 0-3-3a3 3 0 0 0 3 3zm0-4a1 1 0 1 1-1 1a1 1 0 0 1 1-1z"},null,-1),Xo=c("path",{fill:"currentColor",d:"M26 4H6a2 2 0 0 0-2 2v10h2V6h20v15.17l-3.59-3.59a2 2 0 0 0-2.82 0L18 19.17L11.83 13l-1.414 1.415L14 18l2.59 2.59a2 2 0 0 0 2.82 0L21 19l5 5v2H16v2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Z"},null,-1),Zo=[qo,Xo];function Jo(n,t){return w(),E("svg",Yo,Zo)}const Qo={name:"carbon-image-reference",render:Jo},tr={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},er=c("path",{d:"M9 24a3.51 3.51 0 0 0-.88-1.86l9.53-16.58l-1.73-1l-9.57 16.56A3.06 3.06 0 0 0 5.5 21a3.5 3.5 0 1 0 3.15 5H28v-2zm-3.5 2A1.5 1.5 0 1 1 7 24.5A1.5 1.5 0 0 1 5.5 26z",fill:"currentColor"},null,-1),nr=c("path",{d:"M22 21h2a13 13 0 0 0-5.42-10.56l-1.16 1.62A11 11 0 0 1 22 21z",fill:"currentColor"},null,-1),sr=[er,nr];function ar(n,t){return w(),E("svg",tr,sr)}const ir={name:"carbon-angle",render:ar},or={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},rr=c("path",{fill:"currentColor",d:"M20 10H7.815l3.587-3.586L10 5l-6 6l6 6l1.402-1.415L7.818 12H20a6 6 0 0 1 0 12h-8v2h8a8 8 0 0 0 0-16Z"},null,-1),lr=[rr];function ur(n,t){return w(),E("svg",or,lr)}const cr={name:"carbon-undo",render:ur},dr={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},hr=c("path",{fill:"currentColor",d:"M12 10h12.185l-3.587-3.586L22 5l6 6l-6 6l-1.402-1.415L24.182 12H12a6 6 0 0 0 0 12h8v2h-8a8 8 0 0 1 0-16Z"},null,-1),fr=[hr];function vr(n,t){return w(),E("svg",dr,fr)}const pr={name:"carbon-redo",render:vr},mr={width:"1.2em",height:"1.2em",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor"},gr=c("path",{d:"M18.3 26a3.5 3.5 0 006.6-3.05 3 3 0 00-.7-.8l7.53-15.58-1.73-1-7.57 15.56a2.7 2.7 0 00-.8-.1 3.5 3.5 0 00-3.33 2.97h-17.973v2Zm3.4.1a1.5 1.5 0 111.5-1.5 1.5 1.5 0 01-1.5 1.5Z"},null,-1),br=c("path",{d:"M3.75 21.25a13.2 13.2 90 0120.25-10.56l-.87 1.44a11.75 11.75 90 00-17.6 9.13z"},null,-1),_r=[gr,br];function yr(n,t){return w(),E("svg",mr,_r)}const xr={name:"custom-angle-obtuse",render:yr},wr={class:"d-none md-d-inline-block"},$r={class:"d-none md-d-inline-block"},Sr={key:0},kr=st({__name:"BoardControls",props:{info:{type:Array,required:!0}},setup(n){const{t}=Rt(),{lines:e}=re(),s=we(e),{zoom:i,transformOrigin:a}=In(),o=he(),l=de(),u=O(()=>{const A=_e(l);return A?A.viewBox.baseVal:{x:0,y:0,width:0,height:0}}),d=()=>{a.value=[(u.value.width/2-(u.value.x+u.value.width/2)/2)*i.value,(u.value.height/2-(u.value.y+u.value.height/2)/2)*i.value]},f=()=>{d(),i.value+=.1},b=()=>{d(),i.value-=.1},{toggle:v,isFullscreen:h,isSupported:m}=Qn(o),{undo:$,redo:M,canUndo:S,canRedo:k}=re(),C=O(()=>`${t("board.nav.undo")} [ctrl\xA0+\xA0z][\u2318\xA0+\xA0z]`),I=O(()=>`${t("board.nav.redo")} [ctrl\xA0+\xA0shift\xA0+\xA0z][\u2318\xA0+ shift +\xA0z]`),y=L();j(s,A=>A===void 0?y.value=void 0:y.value=A>90?180-A:A);const p=O(()=>y.value?180-y.value:void 0),{processFiles:g}=Dn(),{files:z,open:B}=ts({multiple:!1,accept:"image/*"});return es(z,A=>{g(Array.from(A))}),on("f",v),(A,R)=>{const N=Gi,U=wi,H=Ft,Y=$a;return w(),E("div",{class:T([A.$style.bar,"pointer-none"])},[c("div",{class:T(["pointer-all bg-bg-transparent-inverse text-inverse whitespace-nowrap",A.$style["info-box"]]),onMousemoveCapture:R[0]||(R[0]=X(()=>{},["prevent","stop"]))},[F(N,{value:y.value},{default:G(()=>[F(r(ir))]),_:1},8,["value"]),F(N,{value:r(p)},{default:G(()=>[F(r(xr))]),_:1},8,["value"])],34),(w(!0),E(ot,null,Pt(n.info,K=>(w(),E("li",{key:K,class:T(["bg-bg-transparent-inverse text-inverse min-w-0",A.$style["info-box"]])},[c("small",null,P(K),1)],2))),128)),c("nav",{class:T(A.$style.nav)},[c("ul",{class:T(["pointer-all",A.$style.nav__btns])},[F(U),c("li",null,[F(H,{disabled:!r(S),tooltip:r(C),"tooltip-placement":"left",onClick:r($),onTouchstartCapture:X(r($),["prevent","stop"])},{default:G(()=>[F(r(cr))]),_:1},8,["disabled","tooltip","onClick","onTouchstartCapture"])]),c("li",null,[F(H,{disabled:!r(k),tooltip:r(I),"tooltip-placement":"left",onClick:r(M),onTouchstartCapture:X(r(M),["prevent","stop"])},{default:G(()=>[F(r(pr))]),_:1},8,["disabled","tooltip","onClick","onTouchstartCapture"])]),F(Y,{disabled:r(S)},null,8,["disabled"]),c("li",null,[F(H,{tooltip:r(t)("board.nav.upload_file"),"tooltip-placement":"left",onClick:R[1]||(R[1]=K=>r(B)()),onTouchstartCapture:R[2]||(R[2]=X(K=>r(B)(),["prevent","stop"]))},{default:G(()=>[F(r(Qo))]),_:1},8,["tooltip"])]),c("li",wr,[F(H,{disabled:!r(S),tooltip:`${r(t)("board.result.zoom_out")} [-]`,"tooltip-placement":"left",onClick:R[3]||(R[3]=K=>b()),onTouchstartCapture:R[4]||(R[4]=X(K=>b(),["prevent","stop"]))},{default:G(()=>[F(r(jo))]),_:1},8,["disabled","tooltip"])]),c("li",$r,[F(H,{disabled:!r(S),tooltip:`${r(t)("board.result.zoom_in")} [+]`,"tooltip-placement":"left",onClick:R[5]||(R[5]=K=>f()),onTouchstartCapture:R[6]||(R[6]=X(K=>f(),["prevent","stop"]))},{default:G(()=>[F(r(No))]),_:1},8,["disabled","tooltip"])]),r(m)?(w(),E("li",Sr,[F(H,{tooltip:`${r(t)("board.nav.toggle_fullscreen")} [f]`,"tooltip-placement":"left",onClick:r(v),onTouchstartCapture:X(r(v),["prevent","stop"])},{default:G(()=>[r(h)?(w(),tt(r(zo),{key:0})):(w(),tt(r(Io),{key:1}))]),_:1},8,["tooltip","onClick","onTouchstartCapture"])])):nt("v-if",!0)],2)],2)],2)}}}),Cr="f_j",Tr="f_k",Mr={bar:Cr,nav__btns:Tr,"info-box":"f_l"},Er={$style:Mr},Ir=Ct(kr,[["__cssModules",Er]]),Dr=["x1","y1","x2","y2"],Ar=st({__name:"Segment",props:{pointStart:{type:Array,default:void 0},pointStop:{type:Array,default:void 0}},setup(n){return(t,e)=>n.pointStart&&n.pointStop?(w(),E("line",{key:0,x1:n.pointStart[0],y1:n.pointStart[1],x2:n.pointStop[0],y2:n.pointStop[1]},null,8,Dr)):nt("v-if",!0)}}),Rr=ns((n,t,e,s)=>{if(!n||!t||!e||!s)return;n===e&&(n+=.1);const i=(t-s)/(n-e),a=s-e*i;return{slope:i,intercept:a}}),jt=n=>O(()=>Rr(...n.value[0]||[],...n.value[1]||[]));var D=globalThis&&globalThis.__classPrivateFieldSet||function(n,t,e){if(!t.has(n))throw new TypeError("attempted to set private field on non-instance");return t.set(n,e),e},_=globalThis&&globalThis.__classPrivateFieldGet||function(n,t){if(!t.has(n))throw new TypeError("attempted to get private field on non-instance");return t.get(n)},wt,Et,it,Ot,Ht,lt,ut,ct,dt,ht,ft,vt,pt,It,Lt,$t,ne,St;const Fr=function(n){var t=131,e=137,s=0;n+="x";var i=Math.floor(9007199254740991/e);for(let a=0;a<n.length;a++)s>i&&(s=Math.floor(s/e)),s=s*t+n.charCodeAt(a);return s},x="0123456789abcdef".split(""),zr=[-2147483648,8388608,32768,128],at=[24,16,8,0],Qt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],W=[];class Or{constructor(t=!1,e=!1){wt.set(this,void 0),Et.set(this,void 0),it.set(this,void 0),Ot.set(this,void 0),Ht.set(this,void 0),lt.set(this,void 0),ut.set(this,void 0),ct.set(this,void 0),dt.set(this,void 0),ht.set(this,void 0),ft.set(this,void 0),vt.set(this,void 0),pt.set(this,void 0),It.set(this,void 0),Lt.set(this,void 0),$t.set(this,void 0),ne.set(this,0),St.set(this,void 0),this.init(t,e)}init(t,e){e?(W[0]=W[16]=W[1]=W[2]=W[3]=W[4]=W[5]=W[6]=W[7]=W[8]=W[9]=W[10]=W[11]=W[12]=W[13]=W[14]=W[15]=0,D(this,Et,W)):D(this,Et,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),t?(D(this,lt,3238371032),D(this,ut,914150663),D(this,ct,812702999),D(this,dt,4144912697),D(this,ht,4290775857),D(this,ft,1750603025),D(this,vt,1694076839),D(this,pt,3204075428)):(D(this,lt,1779033703),D(this,ut,3144134277),D(this,ct,1013904242),D(this,dt,2773480762),D(this,ht,1359893119),D(this,ft,2600822924),D(this,vt,528734635),D(this,pt,1541459225)),D(this,wt,D(this,St,D(this,it,D(this,Lt,0)))),D(this,Ot,D(this,It,!1)),D(this,Ht,!0),D(this,$t,t)}update(t){if(_(this,Ot))return this;let e;t instanceof ArrayBuffer?e=new Uint8Array(t):e=t;let s=0;const i=e.length,a=_(this,Et);for(;s<i;){let o;if(_(this,It)&&(D(this,It,!1),a[0]=_(this,wt),a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),typeof e!="string")for(o=_(this,St);s<i&&o<64;++s)a[o>>2]|=e[s]<<at[o++&3];else for(o=_(this,St);s<i&&o<64;++s){let l=e.charCodeAt(s);l<128?a[o>>2]|=l<<at[o++&3]:l<2048?(a[o>>2]|=(192|l>>6)<<at[o++&3],a[o>>2]|=(128|l&63)<<at[o++&3]):l<55296||l>=57344?(a[o>>2]|=(224|l>>12)<<at[o++&3],a[o>>2]|=(128|l>>6&63)<<at[o++&3],a[o>>2]|=(128|l&63)<<at[o++&3]):(l=65536+((l&1023)<<10|e.charCodeAt(++s)&1023),a[o>>2]|=(240|l>>18)<<at[o++&3],a[o>>2]|=(128|l>>12&63)<<at[o++&3],a[o>>2]|=(128|l>>6&63)<<at[o++&3],a[o>>2]|=(128|l&63)<<at[o++&3])}D(this,ne,o),D(this,it,_(this,it)+(o-_(this,St))),o>=64?(D(this,wt,a[16]),D(this,St,o-64),this.hash(),D(this,It,!0)):D(this,St,o)}return _(this,it)>4294967295&&(D(this,Lt,_(this,Lt)+(_(this,it)/4294967296<<0)),D(this,it,_(this,it)%4294967296)),this}finalize(){if(_(this,Ot))return;D(this,Ot,!0);const t=_(this,Et),e=_(this,ne);t[16]=_(this,wt),t[e>>2]|=zr[e&3],D(this,wt,t[16]),e>=56&&(_(this,It)||this.hash(),t[0]=_(this,wt),t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=_(this,Lt)<<3|_(this,it)>>>29,t[15]=_(this,it)<<3,this.hash()}hash(){let t=_(this,lt),e=_(this,ut),s=_(this,ct),i=_(this,dt),a=_(this,ht),o=_(this,ft),l=_(this,vt),u=_(this,pt);const d=_(this,Et);let f,b,v,h,m,$,M,S,k,C;for(let I=16;I<64;++I)h=d[I-15],f=(h>>>7|h<<25)^(h>>>18|h<<14)^h>>>3,h=d[I-2],b=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10,d[I]=d[I-16]+f+d[I-7]+b<<0;C=e&s;for(let I=0;I<64;I+=4)_(this,Ht)?(_(this,$t)?(M=300032,h=d[0]-1413257819,u=h-150054599<<0,i=h+24177077<<0):(M=704751109,h=d[0]-210244248,u=h-1521486534<<0,i=h+143694565<<0),D(this,Ht,!1)):(f=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),b=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),M=t&e,v=M^t&s^C,$=a&o^~a&l,h=u+b+$+Qt[I]+d[I],m=f+v,u=i+h<<0,i=h+m<<0),f=(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10),b=(u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7),S=i&t,v=S^i&e^M,$=u&a^~u&o,h=l+b+$+Qt[I+1]+d[I+1],m=f+v,l=s+h<<0,s=h+m<<0,f=(s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10),b=(l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7),k=s&i,v=k^s&t^S,$=l&u^~l&a,h=o+b+$+Qt[I+2]+d[I+2],m=f+v,o=e+h<<0,e=h+m<<0,f=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),b=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),C=e&s,v=C^e&i^k,$=o&l^~o&u,h=a+b+$+Qt[I+3]+d[I+3],m=f+v,a=t+h<<0,t=h+m<<0;D(this,lt,_(this,lt)+t<<0),D(this,ut,_(this,ut)+e<<0),D(this,ct,_(this,ct)+s<<0),D(this,dt,_(this,dt)+i<<0),D(this,ht,_(this,ht)+a<<0),D(this,ft,_(this,ft)+o<<0),D(this,vt,_(this,vt)+l<<0),D(this,pt,_(this,pt)+u<<0)}hex(){this.finalize();const t=_(this,lt),e=_(this,ut),s=_(this,ct),i=_(this,dt),a=_(this,ht),o=_(this,ft),l=_(this,vt),u=_(this,pt);let d=x[t>>28&15]+x[t>>24&15]+x[t>>20&15]+x[t>>16&15]+x[t>>12&15]+x[t>>8&15]+x[t>>4&15]+x[t&15]+x[e>>28&15]+x[e>>24&15]+x[e>>20&15]+x[e>>16&15]+x[e>>12&15]+x[e>>8&15]+x[e>>4&15]+x[e&15]+x[s>>28&15]+x[s>>24&15]+x[s>>20&15]+x[s>>16&15]+x[s>>12&15]+x[s>>8&15]+x[s>>4&15]+x[s&15]+x[i>>28&15]+x[i>>24&15]+x[i>>20&15]+x[i>>16&15]+x[i>>12&15]+x[i>>8&15]+x[i>>4&15]+x[i&15]+x[a>>28&15]+x[a>>24&15]+x[a>>20&15]+x[a>>16&15]+x[a>>12&15]+x[a>>8&15]+x[a>>4&15]+x[a&15]+x[o>>28&15]+x[o>>24&15]+x[o>>20&15]+x[o>>16&15]+x[o>>12&15]+x[o>>8&15]+x[o>>4&15]+x[o&15]+x[l>>28&15]+x[l>>24&15]+x[l>>20&15]+x[l>>16&15]+x[l>>12&15]+x[l>>8&15]+x[l>>4&15]+x[l&15];return _(this,$t)||(d+=x[u>>28&15]+x[u>>24&15]+x[u>>20&15]+x[u>>16&15]+x[u>>12&15]+x[u>>8&15]+x[u>>4&15]+x[u&15]),d}toString(){return this.hex()}digest(){this.finalize();const t=_(this,lt),e=_(this,ut),s=_(this,ct),i=_(this,dt),a=_(this,ht),o=_(this,ft),l=_(this,vt),u=_(this,pt),d=[t>>24&255,t>>16&255,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255,s>>24&255,s>>16&255,s>>8&255,s&255,i>>24&255,i>>16&255,i>>8&255,i&255,a>>24&255,a>>16&255,a>>8&255,a&255,o>>24&255,o>>16&255,o>>8&255,o&255,l>>24&255,l>>16&255,l>>8&255,l&255];return _(this,$t)||d.push(u>>24&255,u>>16&255,u>>8&255,u&255),d}array(){return this.digest()}arrayBuffer(){this.finalize();const t=new ArrayBuffer(_(this,$t)?28:32),e=new DataView(t);return e.setUint32(0,_(this,lt)),e.setUint32(4,_(this,ut)),e.setUint32(8,_(this,ct)),e.setUint32(12,_(this,dt)),e.setUint32(16,_(this,ht)),e.setUint32(20,_(this,ft)),e.setUint32(24,_(this,vt)),_(this,$t)||e.setUint32(28,_(this,pt)),t}}wt=new WeakMap,Et=new WeakMap,it=new WeakMap,Ot=new WeakMap,Ht=new WeakMap,lt=new WeakMap,ut=new WeakMap,ct=new WeakMap,dt=new WeakMap,ht=new WeakMap,ft=new WeakMap,vt=new WeakMap,pt=new WeakMap,It=new WeakMap,Lt=new WeakMap,$t=new WeakMap,ne=new WeakMap,St=new WeakMap;function Lr(n){const t=new Or;return t.update(n),parseInt(t.hex().substring(0,8),16)}const Pr=function(n){var t="#";return n.forEach(function(e){e<16&&(t+=0),t+=e.toString(16)}),t},Br=function(n,t,e){n/=360;var s=e<.5?e*(1+t):e+t-e*t,i=2*e-s;return[n+1/3,n,n-1/3].map(function(a){return a<0&&a++,a>1&&a--,a<1/6?a=i+(s-i)*6*a:a<.5?a=s:a<2/3?a=i+(s-i)*6*(2/3-a):a=i,Math.round(a*255)})};class Gr{constructor(t={}){const[e,s]=[t.lightness,t.saturation].map(function(i){return i=i!==void 0?i:[.35,.5,.65],Array.isArray(i)?i.concat():[i]});this.L=e,this.S=s,typeof t.hue=="number"&&(t.hue={min:t.hue,max:t.hue}),typeof t.hue=="object"&&!Array.isArray(t.hue)&&(t.hue=[t.hue]),typeof t.hue>"u"&&(t.hue=[]),this.hueRanges=t.hue.map(function(i){return{min:typeof i.min>"u"?0:i.min,max:typeof i.max>"u"?360:i.max}}),this.hash=Lr,typeof t.hash=="function"&&(this.hash=t.hash),t.hash==="bkdr"&&(this.hash=Fr)}hsl(t){var e,s,i,a=this.hash(t),o=727;if(this.hueRanges.length){const l=this.hueRanges[a%this.hueRanges.length];e=a/this.hueRanges.length%o*(l.max-l.min)/o+l.min}else e=a%359;return a=Math.ceil(a/360),s=this.S[a%this.S.length],a=Math.ceil(a/this.S.length),i=this.L[a%this.L.length],[e,s,i]}rgb(t){var e=this.hsl(t);return Br.apply(this,e)}hex(t){var e=this.rgb(t);return Pr(e)}}const Nr=Array.from({length:550},(n,t)=>(t+401)/1e3),Hr=Array.from({length:551},(n,t)=>(t+50)/1e3),be=n=>O(()=>{const t=JSON.stringify(n.value),e=ve.value?Nr:Hr,[s,i,a]=new Gr({lightness:e}).hsl(t);return`hsl(${[s,`${ve.value&&a<.3||!ve.value&&a>.7?Math.min(i+.4,1)*100:i*100}%`,`${a*100}%`].join(",")})`}),An=st({__name:"Line",props:{points:{type:Array,default:()=>[]},pathWidth:{type:Number,default:1},svgSize:{type:Object,default:void 0},svgOffset:{type:Object,default:void 0}},setup(n){const t=n,e=jt(Le(t,"points")),s=be(Le(t,"points")),i=O(()=>{var v,h,m,$;const{svgSize:o,svgOffset:l}=t;if(!o||!l||!e.value||((v=t.points[0])==null?void 0:v[0])===((h=t.points[1])==null?void 0:h[0])&&((m=t.points[0])==null?void 0:m[1])===(($=t.points[1])==null?void 0:$[1]))return;const{slope:u,intercept:d}=e.value,f=l.x,b=o.width+l.x;return[[f,u*f+d],[b,u*b+d]]}),a=O(()=>`${t.pathWidth} ${2*t.pathWidth}`);return(o,l)=>{const u=Ar;return w(),E(ot,null,[r(i)?(w(),E(ot,{key:0},[F(u,Dt(o.$attrs,{"stroke-width":n.pathWidth*.8,stroke:"var(--background-color-transparent)","point-start":r(i)[0],"point-stop":r(i)[1],"stroke-dasharray":r(a),"stroke-linecap":"round",opacity:".2"}),null,16,["stroke-width","point-start","point-stop","stroke-dasharray"]),F(u,Dt({"stroke-width":n.pathWidth*.4,stroke:r(s)},o.$attrs,{"point-start":r(i)[0],"point-stop":r(i)[1],"stroke-dasharray":r(a),"stroke-linecap":"round"}),null,16,["stroke-width","stroke","point-start","point-stop","stroke-dasharray"])],64)):nt("v-if",!0),F(u,Dt(o.$attrs,{"stroke-width":n.pathWidth*1.2,stroke:"var(--background-color-transparent)","point-start":n.points[0],"point-stop":n.points[1],"stroke-linecap":"round",opacity:".3"}),null,16,["stroke-width","point-start","point-stop"]),F(u,Dt({stroke:r(s)},o.$attrs,{"stroke-linecap":"round","point-start":n.points[0],"point-stop":n.points[1]}),null,16,["stroke","point-start","point-stop"])],64)}}});var mt=(n=>(n[n.UP=0]="UP",n[n.DOWN=1]="DOWN",n[n.LEFT=2]="LEFT",n[n.RIGHT=3]="RIGHT",n))(mt||{});const Rn=zt(()=>{const n=L(!1);return{outOfBoundLabels:n,setOutBoundLabels(t,e,s){const i={x:30,y:4.5},a=t.find(({x:u,y:d})=>(u-=s.x,d-=s.y,u<i.x||u>e.width-i.x||d<i.y+3||d>e.height-i.y));if(!a)return n.value=!1;let{x:o,y:l}=a;return o-=s.x,l-=s.y,o<i.x?n.value={direction:2,y:l}:o>e.width-i.x?n.value={direction:3,y:l}:l<i.y+3?n.value={direction:0,x:o}:n.value={direction:1,x:o}}}}),Fn=(n,t)=>O(()=>{if(!n.value||!t.value)return;const{slope:e,intercept:s}=n.value,{slope:i,intercept:a}=t.value;let o;return e===i?o=a-s:o=(s-a)/(i-e),{x:o,y:e*o+s}}),zn=(n,t,e,s)=>O(()=>{if(!t.value||!e.value||!s.value||!n.value)return;const i=e.value,a=s.value;let o=Math.tan((Math.atan(i.slope)+Math.atan(a.slope))/2),l=-1/o,u=i.slope*t.value.x+i.intercept-o*t.value.x,d=i.slope*t.value.x+i.intercept-l*t.value.x;const f=pn([[[0,i.intercept],[t.value.x,i.slope*t.value.x+i.intercept]],[[0,u],[t.value.x,o*t.value.x+u]]])*2;return(f-1>n.value||f+1<n.value)&&([o,u,l,d]=[l,d,o,u]),{acute:{slope:o,intercept:u},obtuse:{slope:l,intercept:d}}}),On=(n,t,e)=>{const s=L([]);return ss([t,e,n],()=>{if(!t.value||!e.value||!n.value)return s.value=[];const{acute:{slope:i,intercept:a},obtuse:{slope:o,intercept:l}}=e.value,u=70,d=n.value,f=Math.cos(Math.atan(i))*(u+(90-d)*.4)+t.value.x,b=180-d,v=-Math.cos(Math.atan(o))*(u+(90-b)*.4)+t.value.x;s.value=[{x:f,y:i*f+a,value:d},{x:v,y:o*v+l,value:b}]},{throttle:20,immediate:!0}),s},sn=(n,t)=>O(()=>{if(!t.value||!n.value)return;const{slope:e,intercept:s}=n.value,{x1:i,x2:a}=t.value;return[[i,e*i+s],[a,e*a+s]]}),Ur={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Vr=c("path",{fill:"currentColor",d:"M24 19h-3v-3h-2v3h-3v2h3v3h2v-3h3v-2z"},null,-1),Wr=c("path",{fill:"currentColor",d:"m31 29.586l-4.689-4.688a8.028 8.028 0 1 0-1.414 1.414L29.586 31zM20 26a6 6 0 1 1 6-6a6.007 6.007 0 0 1-6 6zM4 8H2V4a2.002 2.002 0 0 1 2-2h4v2H4zm22 0h-2V4h-4V2h4a2.002 2.002 0 0 1 2 2zM12 2h4v2h-4zM8 26H4a2.002 2.002 0 0 1-2-2v-4h2v4h4zM2 12h2v4H2z"},null,-1),Kr=[Vr,Wr];function jr(n,t){return w(),E("svg",Ur,Kr)}const Yr={name:"carbon-zoom-in-area",render:jr},qr={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Xr=c("path",{fill:"currentColor",d:"M16 19h8v2h-8z"},null,-1),Zr=c("path",{fill:"currentColor",d:"m31 29.586l-4.689-4.688a8.028 8.028 0 1 0-1.414 1.414L29.586 31zM20 26a6 6 0 1 1 6-6a6.007 6.007 0 0 1-6 6zM4 8H2V4a2.002 2.002 0 0 1 2-2h4v2H4zm22 0h-2V4h-4V2h4a2.002 2.002 0 0 1 2 2zM12 2h4v2h-4zM8 26H4a2.002 2.002 0 0 1-2-2v-4h2v4h4zM2 12h2v4H2z"},null,-1),Jr=[Xr,Zr];function Qr(n,t){return w(),E("svg",qr,Jr)}const tl={name:"carbon-zoom-out-area",render:Qr},el=["viewBox"],nl=["transform"],sl=["x","y"],al=st({__name:"BoardResult",setup(n){const{t}=Rt(),e=L(!1),s=()=>{e.value&&(e.value=!1)},i=L();as(i,s),on("Escape",s);const{height:a,width:o}=ye(he()),l=O(()=>({width:300,height:300*a.value/o.value})),{outOfBoundLabels:u}=Rn(),d=O(()=>{const R=e.value?260:50;return{width:R,height:R}}),f=O(()=>({minY:d.value.height,maxY:a.value-d.value.height,minX:d.value.width,maxX:o.value-d.value.width})),b=O(()=>{const{minX:R,maxX:N,minY:U,maxY:H}=f.value,Y=Z=>Z>H?H:Z<U?U:Z,K=Z=>Z>N?N:Z<R?R:Z;if(!u.value)return;const rt={height:`${d.value.height}px`,width:`${d.value.width}px`};switch(u.value.direction){case mt.DOWN:return{...rt,bottom:"1rem",left:`${K(u.value.x)}px`,transform:"translateX(-50%)"};case mt.UP:return{...rt,top:"1rem",left:`${K(u.value.x)}px`,transform:"translateX(-50%)"};case mt.LEFT:return{...rt,top:`${Y(u.value.y)}px`,left:"1rem",transform:"translateY(-50%)"};case mt.RIGHT:return{...rt,top:`${Y(u.value.y)}px`,right:"1rem",transform:"translateY(-50%)"}}}),{lines:v}=re(),h=we(v),m=O(()=>v.value[0]||[]),$=O(()=>v.value[1]||[]),M=jt(m),S=jt($),k=Fn(M,S),C=zn(h,k,M,S),I=On(h,k,C),y=O(()=>k.value&&{x1:k.value.x-l.value.width,x2:k.value.x+l.value.width}),p=sn(M,y),g=sn(S,y),z=be(m),B=be($),A={[mt.UP]:"bottom",[mt.DOWN]:void 0,[mt.LEFT]:"right",[mt.RIGHT]:"left"};return(R,N)=>{const U=Ft,H=An;return r(M)&&r(S)&&r(k)&&r(u)?(w(),E("section",{key:0,ref_key:"el",ref:i,class:T(["bg-bg-transparent-inverse text-inverse",[R.$style.result,{[R.$style["result--open"]]:e.value}]]),style:te(r(b)),onMousemove:N[0]||(N[0]=X(()=>{},["prevent","stop"])),onClick:N[1]||(N[1]=Y=>e.value=!e.value)},[F(U,{class:T(R.$style.btn),tooltip:e.value?r(t)("board.result.zoom_out"):r(t)("board.result.zoom_in"),"tooltip-placement":e.value?"left":r(A)[r(u).direction]},{default:G(()=>[(w(),tt(is(e.value?r(tl):r(Yr))))]),_:1},8,["class","tooltip","tooltip-placement"]),(w(),E("svg",{viewBox:`${r(l).width*.1} ${r(l).height*.1} ${r(l).width*.8} ${r(l).height*.8}`,class:T(R.$style.svg)},[c("g",{transform:`translate(${-r(k).x+r(l).width*.5} ${-r(k).y+r(l).height*.5})`},[r(p)?(w(),tt(H,Dt({key:0,"stroke-width":"4","stroke-linecap":"round"},R.$attrs,{stroke:r(z),"path-width":4,points:r(p),"stroke-dasharray":"5 10",filter:"saturate(2.5)"}),null,16,["stroke","points"])):nt("v-if",!0),r(g)?(w(),tt(H,Dt({key:1,"stroke-width":"4","stroke-linecap":"round"},R.$attrs,{stroke:r(B),"path-width":4,points:r(g),"stroke-dasharray":"5 10",filter:"saturate(2.5)"}),null,16,["stroke","points"])):nt("v-if",!0),(w(!0),E(ot,null,Pt(r(I),Y=>(w(),E("text",{key:`${Y.x}|${Y.y}`,x:Y.x,y:Y.y,"text-anchor":"middle","dominant-baseline":"middle",stroke:"transparent"},P(Y.value.toFixed(3))+"\xB0",9,sl))),128))],8,nl)],10,el))],38)):nt("v-if",!0)}}}),il="f_m",ol="f_o",rl="f_p",ll={result:il,"result--open":"f_n",svg:ol,btn:rl},ul={$style:ll},cl=Ct(al,[["__cssModules",ul]]),dl=["viewBox","stroke-width","onTouchend","onMouseup"],hl=["cx","cy","r"],fl=["x","y","stroke-width"],vl=["x","y"],pl=st({__name:"BoardSvg",props:{width:{type:Number,default:0},height:{type:Number,default:0}},emits:["pressed"],setup(n,{emit:t}){const e=n,{width:s,height:i}=an(e),a=de(),o=L(!1),{ctrl:l,meta:u,option:d}=xe(),f=O(()=>{if(u.value)return"move"}),{offset:b,active:v,zoom:h,transformOrigin:m}=In(),$=O(()=>5/h.value),M=O(()=>({width:s.value/h.value,height:i.value/h.value})),S=O(()=>({x:-b.value[0]/h.value,y:-b.value[1]/h.value})),{elementX:k,elementY:C}=os(a,{handleOutside:!1}),I=O(()=>(k.value-b.value[0])/h.value),y=O(()=>(C.value-b.value[1])/h.value),{undo:p,redo:g}=se(k),{undo:z,redo:B}=se(C),{lines:A,predictNextPoint:R,drawNextPoint:N,step:U,registerOnRedo:H,registerOnUndo:Y}=re();H(()=>{g(),B()}),Y(()=>{p(),z()}),j([I,y],([yt,et])=>{U.value===2&&R(yt,et)});const K=we(A),rt=O(()=>A.value[0]||[]),Z=O(()=>A.value[1]||[]),Ie=jt(rt),De=jt(Z),Ae=Fn(Ie,De),Ln=zn(K,Ae,Ie,De),Re=On(K,Ae,Ln),{setOutBoundLabels:Pn}=Rn();j([Re,M,S],([yt,et,Tt])=>Pn(yt,et,Tt)),j([s,i],([yt,et],[Tt,J])=>{m.value=[m.value[0]+(yt-Tt)/2,m.value[1]+(et-J)/2]});const Fe=yt=>{v.value||(N(I.value,y.value),t("pressed"))};return(yt,et)=>{const Tt=An;return w(),E("svg",{ref_key:"svgRef",ref:a,viewBox:`${r(S).x} ${r(S).y} ${r(M).width} ${r(M).height}`,"stroke-width":r($),tabindex:"0",style:te({cursor:r(f)}),onTouchend:X(Fe,["prevent"]),onMouseup:X(Fe,["prevent"]),onMousedownOnce:et[0]||(et[0]=J=>o.value=!0),onMousemovePassiveOnce:et[1]||(et[1]=J=>o.value=!0),onTouchstartPassiveOnce:et[2]||(et[2]=J=>o.value=!0)},[Ut(yt.$slots,"default"),r(U)%2?xt((w(),E("circle",{key:0,cx:`${r(I)}px`,cy:`${r(y)}px`,r:r($),"stroke-width":1},null,8,hl)),[[rs,o.value&&!r(l)&&!r(u)&&!r(d)]]):(w(),tt(Tt,{key:1,points:[r(A)[Math.floor(r(U)/2)][0],[r(I),r(y)]],"svg-size":r(M),"svg-offset":r(S),"path-width":r($)},null,8,["points","svg-size","svg-offset","path-width"])),F(Tt,{points:r(A)[0],"svg-size":r(M),"svg-offset":r(S),"path-width":r($)},null,8,["points","svg-size","svg-offset","path-width"]),F(Tt,{points:r(A)[1],"svg-size":r(M),"svg-offset":r(S),"path-width":r($)},null,8,["points","svg-size","svg-offset","path-width"]),(w(!0),E(ot,null,Pt(r(Re),J=>(w(),E(ot,{key:`${J.x}|${J.y}`},[c("text",{x:J.x,y:J.y,"text-anchor":"middle","dominant-baseline":"middle",stroke:"var(--background-color-transparent)","stroke-width":r($),style:te(`font-size:${r($)/5}em`)},P(J.value.toFixed(3))+"\xB0",13,fl),c("text",{x:J.x,y:J.y,"text-anchor":"middle","dominant-baseline":"middle",stroke:"transparent",style:te(`font-size:${r($)/5}em`)},P(J.value.toFixed(3))+"\xB0",13,vl)],64))),128))],44,dl)}}}),ml=["href","x","y","height","width"],gl=st({__name:"Board",setup(n){const{t}=Rt(),e=L(!0),s=he(),{height:i,width:a}=ye(s),{src:o,width:l,height:u,processFiles:d}=Dn(),f=L(0),b=L(0);j(o,()=>{if(u&&l)if(l.value>a.value||u.value>i.value){const m=Math.min(a.value/l.value,i.value/u.value);f.value=u.value*m,b.value=l.value*m}else f.value=u.value,b.value=l.value});const{isOverDropZone:v}=ls(s,d),h=O(()=>v.value?[t("board.drop_file_here")]:[]);return(m,$)=>{const M=pl,S=cl,k=Ir;return w(),E("div",{ref_key:"boardRef",ref:s,class:T(m.$style.board)},[F(M,{class:T(m.$style.board__svg),width:r(a),height:r(i),onPressed:$[0]||($[0]=C=>e.value=!1)},{default:G(()=>[r(o)?(w(),E("image",{key:0,href:r(o),x:b.value/-2,y:f.value/-2,height:`${f.value}`,width:`${b.value}`},null,8,ml)):nt("v-if",!0)]),_:1},8,["class","width","height"]),e.value&&!r(o)?(w(),E("div",{key:0,class:T(m.$style.board__hint)},P(r(t)("board.click_this_button_or_drop")),3)):nt("v-if",!0),F(S),F(k,{class:T(m.$style.board__nav),info:r(h),"onUpdate:files":r(d)},null,8,["class","info","onUpdate:files"])],2)}}}),bl="f_f",_l="f_g",yl="f_h",xl="f_i",wl={board:bl,board__svg:_l,board__nav:yl,board__hint:xl},$l={$style:wl},Sl=Ct(gl,[["__cssModules",$l]]),kl={};function Cl(n,t){const e=Sl;return w(),tt(e,{ref:"boardRef",class:"flex-grow"},null,512)}const Ml=Ct(kl,[["render",Cl]]);export{Ml as default};
