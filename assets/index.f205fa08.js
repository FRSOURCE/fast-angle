import{d as ct,q as G,s as at,v as Xe,x as In,y as Dn,u as It,o as M,c as lt,b as L,w as tt,a as l,z as Mt,A as ot,j as V,B as Bt,n as R,l as st,k as r,T as An,m as ut,C as Dt,e as kt,E as At,h as N,F as Rn,G as On,i as z,H as jt,I as zn,J as $t,K as Ft,L as xt,M as Me,N as pt,O as Ot,P as le,Q as ge,r as Fn,R as Pn,S as Ln,U as Ee,V as Bn,W as Qt,X as Gn,Y as Nn,Z as Hn,$ as Un,a0 as Vn,a1 as Wn,a2 as te,a3 as Kn,a4 as Yn,a5 as Ze,a6 as jn,a7 as he,a8 as qn,a9 as Xn,aa as Zn,ab as Zt,ac as Jn,ad as Qn,ae as ts}from"./app.be15e93e.js";/*!
* tabbable 6.0.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Je=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],ee=Je.join(","),Qe=typeof Element>"u",Et=Qe?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ne=!Qe&&Element.prototype.getRootNode?function(e){return e.getRootNode()}:function(e){return e.ownerDocument},tn=function(t,n,s){var a=Array.prototype.slice.apply(t.querySelectorAll(ee));return n&&Et.call(t,ee)&&a.unshift(t),a=a.filter(s),a},en=function e(t,n,s){for(var a=[],o=Array.from(t);o.length;){var i=o.shift();if(i.tagName==="SLOT"){var u=i.assignedElements(),h=u.length?u:i.children,m=e(h,!0,s);s.flatten?a.push.apply(a,m):a.push({scope:i,candidates:m})}else{var p=Et.call(i,ee);p&&s.filter(i)&&(n||!t.includes(i))&&a.push(i);var g=i.shadowRoot||typeof s.getShadowRoot=="function"&&s.getShadowRoot(i),w=!s.shadowRootFilter||s.shadowRootFilter(i);if(g&&w){var k=e(g===!0?i.children:g.children,!0,s);s.flatten?a.push.apply(a,k):a.push({scope:i,candidates:k})}else o.unshift.apply(o,i.children)}}return a},nn=function(t,n){return t.tabIndex<0&&(n||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||t.isContentEditable)&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},es=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},sn=function(t){return t.tagName==="INPUT"},ns=function(t){return sn(t)&&t.type==="hidden"},ss=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(s){return s.tagName==="SUMMARY"});return n},as=function(t,n){for(var s=0;s<t.length;s++)if(t[s].checked&&t[s].form===n)return t[s]},os=function(t){if(!t.name)return!0;var n=t.form||ne(t),s=function(u){return n.querySelectorAll('input[type="radio"][name="'+u+'"]')},a;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")a=s(window.CSS.escape(t.name));else try{a=s(t.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var o=as(a,t.form);return!o||o===t},is=function(t){return sn(t)&&t.type==="radio"},rs=function(t){return is(t)&&!os(t)},ls=function(t){for(var n,s=ne(t).host,a=!!((n=s)!==null&&n!==void 0&&n.ownerDocument.contains(s)||t.ownerDocument.contains(t));!a&&s;){var o;s=ne(s).host,a=!!((o=s)!==null&&o!==void 0&&o.ownerDocument.contains(s))}return a},Ie=function(t){var n=t.getBoundingClientRect(),s=n.width,a=n.height;return s===0&&a===0},us=function(t,n){var s=n.displayCheck,a=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var o=Et.call(t,"details>summary:first-of-type"),i=o?t.parentElement:t;if(Et.call(i,"details:not([open]) *"))return!0;if(!s||s==="full"||s==="legacy-full"){if(typeof a=="function"){for(var u=t;t;){var h=t.parentElement,m=ne(t);if(h&&!h.shadowRoot&&a(h)===!0)return Ie(t);t.assignedSlot?t=t.assignedSlot:!h&&m!==t.ownerDocument?t=m.host:t=h}t=u}if(ls(t))return!t.getClientRects().length;if(s!=="legacy-full")return!0}else if(s==="non-zero-area")return Ie(t);return!1},cs=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var s=0;s<n.children.length;s++){var a=n.children.item(s);if(a.tagName==="LEGEND")return Et.call(n,"fieldset[disabled] *")?!0:!a.contains(t)}return!0}n=n.parentElement}return!1},se=function(t,n){return!(n.disabled||ns(n)||us(n,t)||ss(n)||cs(n))},pe=function(t,n){return!(rs(n)||nn(n)<0||!se(t,n))},ds=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},hs=function e(t){var n=[],s=[];return t.forEach(function(a,o){var i=!!a.scope,u=i?a.scope:a,h=nn(u,i),m=i?e(a.candidates):u;h===0?i?n.push.apply(n,m):n.push(u):s.push({documentOrder:o,tabIndex:h,item:a,isScope:i,content:m})}),s.sort(es).reduce(function(a,o){return o.isScope?a.push.apply(a,o.content):a.push(o.content),a},[]).concat(n)},fs=function(t,n){n=n||{};var s;return n.getShadowRoot?s=en([t],n.includeContainer,{filter:pe.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:ds}):s=tn(t,n.includeContainer,pe.bind(null,n)),hs(s)},vs=function(t,n){n=n||{};var s;return n.getShadowRoot?s=en([t],n.includeContainer,{filter:se.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):s=tn(t,n.includeContainer,se.bind(null,n)),s},qt=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return Et.call(t,ee)===!1?!1:pe(n,t)},ps=Je.concat("iframe").join(","),fe=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return Et.call(t,ps)===!1?!1:se(n,t)};/*!
* focus-trap 7.0.0
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?De(Object(n),!0).forEach(function(s){ms(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ms(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Re=function(){var e=[];return{activateTrap:function(n){if(e.length>0){var s=e[e.length-1];s!==n&&s.pause()}var a=e.indexOf(n);a===-1||e.splice(a,1),e.push(n)},deactivateTrap:function(n){var s=e.indexOf(n);s!==-1&&e.splice(s,1),e.length>0&&e[e.length-1].unpause()}}}(),gs=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},bs=function(t){return t.key==="Escape"||t.key==="Esc"||t.keyCode===27},_s=function(t){return t.key==="Tab"||t.keyCode===9},Oe=function(t){return setTimeout(t,0)},ze=function(t,n){var s=-1;return t.every(function(a,o){return n(a)?(s=o,!1):!0}),s},Pt=function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return typeof t=="function"?t.apply(void 0,s):t},Xt=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},ys=function(t,n){var s=(n==null?void 0:n.document)||document,a=Ae({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},n),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},i,u=function(_,y,F){return _&&_[y]!==void 0?_[y]:a[F||y]},h=function(_){return o.containerGroups.findIndex(function(y){var F=y.container,W=y.tabbableNodes;return F.contains(_)||W.find(function(B){return B===_})})},m=function(_){var y=a[_];if(typeof y=="function"){for(var F=arguments.length,W=new Array(F>1?F-1:0),B=1;B<F;B++)W[B-1]=arguments[B];y=y.apply(void 0,W)}if(y===!0&&(y=void 0),!y){if(y===void 0||y===!1)return y;throw new Error("`".concat(_,"` was specified but was not a node, or did not return a node"))}var v=y;if(typeof y=="string"&&(v=s.querySelector(y),!v))throw new Error("`".concat(_,"` as selector refers to no known node"));return v},p=function(){var _=m("initialFocus");if(_===!1)return!1;if(_===void 0)if(h(s.activeElement)>=0)_=s.activeElement;else{var y=o.tabbableGroups[0],F=y&&y.firstTabbableNode;_=F||m("fallbackFocus")}if(!_)throw new Error("Your focus-trap needs to have at least one focusable element");return _},g=function(){if(o.containerGroups=o.containers.map(function(_){var y=fs(_,a.tabbableOptions),F=vs(_,a.tabbableOptions);return{container:_,tabbableNodes:y,focusableNodes:F,firstTabbableNode:y.length>0?y[0]:null,lastTabbableNode:y.length>0?y[y.length-1]:null,nextTabbableNode:function(B){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,j=F.findIndex(function(H){return H===B});if(!(j<0))return v?F.slice(j+1).find(function(H){return qt(H,a.tabbableOptions)}):F.slice(0,j).reverse().find(function(H){return qt(H,a.tabbableOptions)})}}}),o.tabbableGroups=o.containerGroups.filter(function(_){return _.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!m("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},w=function T(_){if(_!==!1&&_!==s.activeElement){if(!_||!_.focus){T(p());return}_.focus({preventScroll:!!a.preventScroll}),o.mostRecentlyFocusedNode=_,gs(_)&&_.select()}},k=function(_){var y=m("setReturnFocus",_);return y||(y===!1?!1:_)},$=function(_){var y=Xt(_);if(!(h(y)>=0)){if(Pt(a.clickOutsideDeactivates,_)){i.deactivate({returnFocus:a.returnFocusOnDeactivate&&!fe(y,a.tabbableOptions)});return}Pt(a.allowOutsideClick,_)||_.preventDefault()}},A=function(_){var y=Xt(_),F=h(y)>=0;F||y instanceof Document?F&&(o.mostRecentlyFocusedNode=y):(_.stopImmediatePropagation(),w(o.mostRecentlyFocusedNode||p()))},O=function(_){var y=Xt(_);g();var F=null;if(o.tabbableGroups.length>0){var W=h(y),B=W>=0?o.containerGroups[W]:void 0;if(W<0)_.shiftKey?F=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:F=o.tabbableGroups[0].firstTabbableNode;else if(_.shiftKey){var v=ze(o.tabbableGroups,function(dt){var it=dt.firstTabbableNode;return y===it});if(v<0&&(B.container===y||fe(y,a.tabbableOptions)&&!qt(y,a.tabbableOptions)&&!B.nextTabbableNode(y,!1))&&(v=W),v>=0){var j=v===0?o.tabbableGroups.length-1:v-1,H=o.tabbableGroups[j];F=H.lastTabbableNode}}else{var Q=ze(o.tabbableGroups,function(dt){var it=dt.lastTabbableNode;return y===it});if(Q<0&&(B.container===y||fe(y,a.tabbableOptions)&&!qt(y,a.tabbableOptions)&&!B.nextTabbableNode(y))&&(Q=W),Q>=0){var Y=Q===o.tabbableGroups.length-1?0:Q+1,Z=o.tabbableGroups[Y];F=Z.firstTabbableNode}}}else F=m("fallbackFocus");F&&(_.preventDefault(),w(F))},I=function(_){if(bs(_)&&Pt(a.escapeDeactivates,_)!==!1){_.preventDefault(),i.deactivate();return}if(_s(_)){O(_);return}},D=function(_){var y=Xt(_);h(y)>=0||Pt(a.clickOutsideDeactivates,_)||Pt(a.allowOutsideClick,_)||(_.preventDefault(),_.stopImmediatePropagation())},x=function(){if(!!o.active)return Re.activateTrap(i),o.delayInitialFocusTimer=a.delayInitialFocus?Oe(function(){w(p())}):w(p()),s.addEventListener("focusin",A,!0),s.addEventListener("mousedown",$,{capture:!0,passive:!1}),s.addEventListener("touchstart",$,{capture:!0,passive:!1}),s.addEventListener("click",D,{capture:!0,passive:!1}),s.addEventListener("keydown",I,{capture:!0,passive:!1}),i},q=function(){if(!!o.active)return s.removeEventListener("focusin",A,!0),s.removeEventListener("mousedown",$,!0),s.removeEventListener("touchstart",$,!0),s.removeEventListener("click",D,!0),s.removeEventListener("keydown",I,!0),i};return i={get active(){return o.active},get paused(){return o.paused},activate:function(_){if(o.active)return this;var y=u(_,"onActivate"),F=u(_,"onPostActivate"),W=u(_,"checkCanFocusTrap");W||g(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=s.activeElement,y&&y();var B=function(){W&&g(),x(),F&&F()};return W?(W(o.containers.concat()).then(B,B),this):(B(),this)},deactivate:function(_){if(!o.active)return this;var y=Ae({onDeactivate:a.onDeactivate,onPostDeactivate:a.onPostDeactivate,checkCanReturnFocus:a.checkCanReturnFocus},_);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,q(),o.active=!1,o.paused=!1,Re.deactivateTrap(i);var F=u(y,"onDeactivate"),W=u(y,"onPostDeactivate"),B=u(y,"checkCanReturnFocus"),v=u(y,"returnFocus","returnFocusOnDeactivate");F&&F();var j=function(){Oe(function(){v&&w(k(o.nodeFocusedBeforeActivation)),W&&W()})};return v&&B?(B(k(o.nodeFocusedBeforeActivation)).then(j,j),this):(j(),this)},pause:function(){return o.paused||!o.active?this:(o.paused=!0,q(),this)},unpause:function(){return!o.paused||!o.active?this:(o.paused=!1,g(),x(),this)},updateContainerElements:function(_){var y=[].concat(_).filter(Boolean);return o.containers=y.map(function(F){return typeof F=="string"?s.querySelector(F):F}),o.active&&g(),this}},i.updateContainerElements(t),i};const ws=ct({name:"UseFocusTrap",props:["as","options"],setup(e,{slots:t}){let n;const s=G(),a=()=>n&&n.activate(),o=()=>n&&n.deactivate();return at(()=>Xe(s),i=>{!i||(n=ys(i,e.options||{}),a())},{flush:"post"}),In(()=>o()),()=>{if(t.default)return Dn(e.as||"div",{ref:s},t.default())}}}),$s=["textContent"],Ss={inheritAttrs:!1},ks=ct({...Ss,__name:"Modal",props:{heading:{type:String,required:!0},modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const{t:n}=It(),s=G(),a=()=>t("update:modelValue",!1);return at(s,o=>{o==null||o.showModal()}),(o,i)=>{const u=Dt;return e.modelValue?(M(),lt(An,{key:0,to:"body"},[L(r(ws),{options:{immediate:!0,initialFocus:!1}},{default:tt(()=>[l("dialog",{ref_key:"dialog",ref:s,"aria-modal":"",onClick:a,onClose:a},[l("article",Mt(o.$attrs,{onClick:i[0]||(i[0]=ot(()=>{},["stop"]))}),[l("h3",{textContent:V(e.heading)},null,8,$s),Bt(o.$slots,"default"),l("footer",{class:R(o.$style.footer)},[Bt(o.$slots,"footer-pre"),L(u,{class:"secondary",onClick:a},{default:tt(()=>[st(V(r(n)("main.close")),1)]),_:1}),Bt(o.$slots,"footer")],2)],16)],544)]),_:3})])):ut("v-if",!0)}}}),Cs="f_-",xs={footer:Cs},Ts={$style:xs},an=kt(ks,[["__cssModules",Ts]]),be=At(()=>G()),Ms=(e,t)=>{const n=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),s=document.createElement("a");s.setAttribute("download",t),s.setAttribute("href",e),s.setAttribute("target","_blank"),s.dispatchEvent(n)},Es=async(e,t)=>{const n=new XMLSerializer().serializeToString(e),s=new Blob([n],{type:"image/svg+xml;charset=utf-8"}),a=new Image,o=URL.createObjectURL(s);await new Promise((i,u)=>{a.onload=function(){t.drawImage(a,0,0),URL.revokeObjectURL(o),i()},a.onabort=a.onerror=()=>u(),a.src=o})},Gt={JPG:1,PNG:2},Is={[Gt.JPG]:{encoding:"image/jpeg",extension:"jpg"},[Gt.PNG]:{encoding:"image/png",extension:"png"}},Ds=e=>{var s;const t=e.cloneNode(!0),n=window.getComputedStyle(e);return(s=t.querySelector("circle"))==null||s.remove(),t.style.setProperty("--background-color-transparent",n.getPropertyValue("--background-color-transparent")),t.style.color=t.style.fill=n.getPropertyValue("--color"),t.style.stroke="#fff",t.style.fontFamily="Arial",t.style.fontSize="20px",t},on=At(()=>{const e=document.createElement("canvas"),t=e==null?void 0:e.getContext("2d"),n=be(),s=N(()=>n.value&&t);return{triggerDownload:async({filename:o,filetype:i,quality:u,width:h,height:m})=>{if(!s.value)return;e.width=h,e.height=m,await Es(Ds(n.value),t);const{encoding:p,extension:g}=Is[i],w=e.toDataURL(p,u);Ms(w,`${o}.${g}`)},isSupported:s}}),As=Rn({...On,xs:480}),yt={px:1,"%":2,in:3,mm:4},Rs=(e,t,n)=>{let s=e;switch(t){case yt["%"]:s=e*100/n;break;case yt.in:s=e/window.devicePixelRatio;break;case yt.mm:s=e*25.4/window.devicePixelRatio;break}return+s.toFixed(6)},Os=(e,t,n)=>{let s=e;switch(t){case yt["%"]:s=e/100*n;break;case yt.in:s=e*window.devicePixelRatio;break;case yt.mm:s=e*window.devicePixelRatio/25.4;break}return+s.toFixed(5)},Fe=(e,t,n)=>{const s=G(0),a=G(e.value-1),o=G(0);return at([e,t],([i,u],[,h])=>{(a.value!==i||u!==h)&&(a.value=i,s.value=Rs(i,u,n.value))},{immediate:!0}),at(o,i=>{s.value!==i&&(a.value=Os(i,t.value,n.value))}),at(s,i=>o.value=i,{immediate:!0}),o},zs={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Fs=l("path",{fill:"currentColor",d:"M24 14h-2V8a6 6 0 0 0-12 0v6H8a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V16a2 2 0 0 0-2-2ZM12 8a4 4 0 0 1 8 0v6h-8Zm12 20H8V16h16Z"},null,-1),Ps=[Fs];function Ls(e,t){return M(),z("svg",zs,Ps)}const Bs={name:"carbon-locked",render:Ls},Gs={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Ns=l("path",{fill:"currentColor",d:"M24 14H12V8a4 4 0 0 1 8 0h2a6 6 0 0 0-12 0v6H8a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V16a2 2 0 0 0-2-2Zm0 14H8V16h16Z"},null,-1),Hs=[Ns];function Us(e,t){return M(),z("svg",Gs,Hs)}const Vs={name:"carbon-unlocked",render:Us},Ws=["onSubmit"],Ks={class:"flex-grow"},Ys=["aria-invalid"],js=["value","textContent"],qs=["aria-invalid"],Xs=["aria-invalid"],Zs=["data-tooltip"],Js=["value","textContent"],Qs=["aria-invalid"],ta=ct({__name:"BoardControlsSvgDownloadModalContent",props:{boardWidth:{type:Number,required:!0},boardHeight:{type:Number,required:!0}},emits:["downloadFinish"],setup(e,{emit:t}){const n=e,{t:s}=It(),{triggerDownload:a}=on(),o=jt("FA_FILENAME","fast-angle-image"),{boardHeight:i,boardWidth:u}=zn(n),h=G(i.value),m=G(u.value),p=jt("FA_SIZE_UNIT",yt.px),g=G(!0),w=G(u.value/i.value);As.isGreaterOrEqual("xl")&&at([u,i],([D,x])=>{m.value=D,h.value=x,w.value=D/x});const k=Fe(h,p,i),$=Fe(m,p,u);at([$,k],([D,x])=>{g.value||(w.value=D/x)},{flush:"sync",immediate:!0}),at(k,()=>{k.value<0&&(k.value=1),g.value&&k.value!==+($.value/w.value).toFixed(3)&&($.value=+(k.value*w.value).toFixed(3))},{flush:"sync"}),at($,()=>{$.value<0&&($.value=1),g.value&&$.value!==+(k.value*w.value).toFixed(3)&&(k.value=+($.value/w.value).toFixed(3))},{flush:"sync"});const A=jt("FA_FILETYPE",Gt.PNG),O=jt("FA_QUALITY",100);at(O,()=>{O.value>100&&(O.value=100),O.value<0&&(O.value=0)});const I=async()=>{await a({filename:o.value,filetype:A.value,quality:O.value/100,width:m.value,height:h.value}).catch(()=>{}),t("downloadFinish")};return(D,x)=>{const q=Dt;return M(),z("form",{onSubmit:ot(I,["prevent"])},[l("div",{class:R(D.$style.name)},[l("label",Ks,[st(V(r(s)("board.nav.download_image.name_label"))+" ",1),$t(l("input",{"onUpdate:modelValue":x[0]||(x[0]=T=>xt(o)?o.value=T:null),type:"text",name:"name",required:"","aria-invalid":!r(o)},null,8,Ys),[[Ft,r(o)]])]),l("label",{class:R(D.$style["label--big"])},[st(V(r(s)("board.nav.download_image.format_label"))+" ",1),$t(l("select",{"onUpdate:modelValue":x[1]||(x[1]=T=>xt(A)?A.value=T:null),required:""},[(M(!0),z(pt,null,Ot(Object.keys(r(Gt)),T=>(M(),z("option",{key:T,value:r(Gt)[T],textContent:V(T)},null,8,js))),128))],512),[[Me,r(A)]])],2)],2),l("fieldset",{class:R(D.$style.sizing)},[l("legend",null,[l("small",null,V(r(s)("board.nav.download_image.sizing_label")),1)]),l("label",{class:R(D.$style.label)},[st(V(r(s)("board.nav.download_image.width_label"))+" ",1),$t(l("input",{"onUpdate:modelValue":x[2]||(x[2]=T=>xt($)?$.value=T:null),min:"1",type:"number",step:"0.000001",name:"width",required:"","aria-invalid":!r($)||r($)<1},null,8,qs),[[Ft,r($),void 0,{number:!0}]])],2),l("label",{class:R(D.$style.label)},[st(V(r(s)("board.nav.download_image.height_label"))+" ",1),$t(l("input",{"onUpdate:modelValue":x[3]||(x[3]=T=>xt(k)?k.value=T:null),min:"1",type:"number",step:"0.000001",name:"height",required:"","aria-invalid":!r(k)||r(k)<1},null,8,Xs),[[Ft,r(k),void 0,{number:!0}]])],2),l("label",null,[st(" \xA0 "),l("div",{class:R(D.$style["aspect-ratio"]),"data-tooltip":r(s)("board.nav.download_image.keep_aspect_ratio")},[L(q,{"aria-label":r(s)("board.nav.download_image.keep_aspect_ratio"),class:R([D.$style["aspect-ratio-btn"],{[D.$style["aspect-ratio-btn--inactive"]]:!g.value}]),onClick:x[4]||(x[4]=T=>g.value=!g.value)},{default:tt(()=>[g.value?(M(),lt(r(Bs),{key:0})):(M(),lt(r(Vs),{key:1}))]),_:1},8,["aria-label","class"])],10,Zs)]),l("label",{class:R([D.$style.label,D.$style["label--small"]])},[st(V(r(s)("board.nav.download_image.unit_label"))+" ",1),$t(l("select",{"onUpdate:modelValue":x[5]||(x[5]=T=>xt(p)?p.value=T:null),required:""},[(M(!0),z(pt,null,Ot(Object.keys(r(yt)),T=>(M(),z("option",{key:T,value:r(yt)[T],textContent:V(T)},null,8,Js))),128))],512),[[Me,r(p)]])],2)],2),l("label",null,[l("span",{class:R(D.$style.quality)},[st(V(r(s)("board.nav.download_image.quality_label"))+" ",1),$t(l("input",{"onUpdate:modelValue":x[6]||(x[6]=T=>xt(O)?O.value=T:null),type:"number",min:"1",max:"100",class:R(D.$style.quality__input),name:"quality","aria-invalid":!r(O)||r(O)>100||r(O)<1},null,10,Qs),[[Ft,r(O),void 0,{number:!0}]]),st(" % ")],2),$t(l("input",{"onUpdate:modelValue":x[7]||(x[7]=T=>xt(O)?O.value=T:null),type:"range",min:"1",max:"100",name:"quality"},null,512),[[Ft,r(O),void 0,{number:!0}]])])],40,Ws)}}}),ea="f_aa",na="f_ad",sa="f_ae",aa="f_ai",oa="f_aj",ia={label:ea,"label--big":"f_ab","label--small":"f_ac",sizing:na,name:sa,"aspect-ratio":"f_af","aspect-ratio-btn":"f_ag","aspect-ratio-btn--inactive":"f_ah",quality:aa,quality__input:oa},ra={$style:ia},la=kt(ta,[["__cssModules",ra]]),_e=At(()=>G()),ua={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},ca=l("path",{fill:"currentColor",d:"M26 24v4H6v-4H4v4a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2v-4zm0-10l-1.41-1.41L17 20.17V2h-2v18.17l-7.59-7.58L6 14l10 10l10-10z"},null,-1),da=[ca];function ha(e,t){return M(),z("svg",ua,da)}const fa={name:"carbon-download",render:ha},va={key:0},pa=ct({__name:"BoardControlsSvgDownload",props:{disabled:{type:Boolean,default:!1}},setup(e){const{t}=It(),{isSupported:n}=on(),s=_e(),{height:a,width:o}=le(s),i=G(!1),u=G(!1),h="board_svg_download_form";return ge({onEventFired(m){(m.ctrlKey||m.metaKey)&&m.key==="s"&&(m.preventDefault(),i.value=!0)},passive:!1}),(m,p)=>{const g=la,w=Dt,k=an;return r(n)?(M(),z("li",va,[L(w,{tooltip:`${r(t)("board.nav.download_image.action")} [ctrl + s][\u2318 + s]`,"tooltip-placement":"left",disabled:e.disabled?void 0:!0,onClick:p[3]||(p[3]=$=>i.value=!0),onTouchstart:p[4]||(p[4]=ot($=>i.value=!0,["stop","prevent"]))},{default:tt(()=>[L(r(fa)),L(k,{modelValue:i.value,"onUpdate:modelValue":p[2]||(p[2]=$=>i.value=$),heading:r(t)("board.nav.download_image.heading")},{footer:tt(()=>[L(w,{type:"submit",role:"button",form:h,disabled:u.value,"aria-busy":u.value},{default:tt(()=>[st(V(r(t)("board.nav.download_image.save")),1)]),_:1},8,["disabled","aria-busy"])]),default:tt(()=>[L(g,{id:h,"board-height":r(a),"board-width":r(o),onSubmit:p[0]||(p[0]=$=>u.value=!0),onDownloadFinish:p[1]||(p[1]=$=>(u.value=!1,i.value=!1))},null,8,["board-height","board-width"])]),_:1},8,["modelValue","heading"])]),_:1},8,["tooltip","disabled"])])):ut("v-if",!0)}}}),ma={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},ga=l("path",{fill:"currentColor",d:"M16 2a14 14 0 1 0 14 14A14 14 0 0 0 16 2Zm0 26a12 12 0 1 1 12-12a12 12 0 0 1-12 12Z"},null,-1),ba=l("circle",{cx:"16",cy:"23.5",r:"1.5",fill:"currentColor"},null,-1),_a=l("path",{fill:"currentColor",d:"M17 8h-1.5a4.49 4.49 0 0 0-4.5 4.5v.5h2v-.5a2.5 2.5 0 0 1 2.5-2.5H17a2.5 2.5 0 0 1 0 5h-2v4.5h2V17a4.5 4.5 0 0 0 0-9Z"},null,-1),ya=[ga,ba,_a];function wa(e,t){return M(),z("svg",ma,ya)}const $a={name:"carbon-help",render:wa},Sa={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},ka=l("path",{fill:"currentColor",d:"M22.5 4c-2 0-3.9.8-5.3 2.2L16 7.4l-1.1-1.1c-2.9-3-7.7-3-10.6-.1l-.1.1c-3 3-3 7.8 0 10.8L16 29l11.8-11.9c3-3 3-7.8 0-10.8C26.4 4.8 24.5 4 22.5 4z"},null,-1),Ca=[ka];function xa(e,t){return M(),z("svg",Sa,Ca)}const Pe={name:"carbon-favorite-filled",render:xa},Ta=l("hr",null,null,-1),Ma=["textContent"],Ea={rol:"grid"},Ia=l("th",{scope:"col",textContent:"Win"},null,-1),Da=l("th",{scope:"col",textContent:"Mac"},null,-1),Aa=["textContent"],Ra=l("kbd",null,"ctrl",-1),Oa=l("kbd",null,"z",-1),za=l("kbd",null,"\u2318",-1),Fa=l("kbd",null,"z",-1),Pa=["textContent"],La=l("kbd",null,"ctrl",-1),Ba=l("kbd",null,"shift",-1),Ga=l("kbd",null,"z",-1),Na=l("kbd",null,"\u2318",-1),Ha=l("kbd",null,"shift",-1),Ua=l("kbd",null,"z",-1),Va=["textContent"],Wa=l("kbd",null,"ctrl",-1),Ka=l("kbd",null,"s",-1),Ya=l("kbd",null,"\u2318",-1),ja=l("kbd",null,"s",-1),qa=["textContent"],Xa=l("kbd",null,"f",-1),Za=[Xa],Ja=l("kbd",null,"f",-1),Qa=[Ja],to=["textContent"],eo=["textContent"],no=["href","data-tooltip","title"],so={rel:"noreferrer",href:"https://github.com/FRSOURCE/fast-angle",target:"_blank",title:"GitHub"},ao={rel:"noreferrer",href:"https://www.frsource.org/blog/sponsoring",target:"_blank",title:"Sponsoring"},oo=l("hr",null,null,-1),io=["textContent"],ro=["textContent"],lo=ct({__name:"BoardControlsSvgHelp",setup(e){const{t,tm:n,rt:s}=It(),a=G(!1);return(o,i)=>{const u=Fn("RouterLink"),h=an,m=Dt;return M(),z("li",null,[L(m,{tooltip:r(t)("board.nav.help.action"),"tooltip-placement":"left",onClick:i[1]||(i[1]=p=>a.value=!0),onTouchstartCapture:i[2]||(i[2]=ot(p=>a.value=!0,["prevent","stop"]))},{default:tt(()=>[L(r($a)),L(h,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=p=>a.value=p),heading:r(t)("board.nav.help.heading"),class:R(o.$style.modal)},{"footer-pre":tt(()=>[l("a",{rel:"noreferrer",href:"https://github.com/FRSOURCE/fast-angle",target:"_blank",title:"GitHub",class:R(o.$style.donate)},[L(r(Pe)),l("small",null,V(r(t)("main.donate_us")),1)],2)]),default:tt(()=>[l("ul",null,[ut(" eslint-disable-next-line vue/first-attribute-linebreak "),(M(!0),z(pt,null,Ot(r(n)("board.nav.help.content"),p=>(M(),z("li",{key:r(s)(p)},V(r(s)(p)),1))),128))]),Ta,l("div",{class:R(o.$style["hide-mobile"])},[l("h4",{textContent:V(r(t)("board.nav.help.key_bindings.heading"))},null,8,Ma),l("table",Ea,[l("thead",null,[l("tr",null,[Ia,Da,l("th",{scope:"col",textContent:V(r(t)("board.nav.help.key_bindings.description"))},null,8,Aa)])]),l("tr",null,[l("td",{scope:"col",class:R(o.$style["binding-item-wrapper"])},[l("div",{class:R(o.$style["binding-item"])},[Ra,l("small",{class:R(o.$style["binding-item-plus"])},"+",2),Oa],2)],2),l("td",{scope:"col",class:R(o.$style["binding-item-wrapper"])},[l("div",{class:R(o.$style["binding-item"])},[za,l("small",{class:R(o.$style["binding-item-plus"])},"+",2),Fa],2)],2),l("td",{scope:"col",textContent:V(r(t)("board.nav.undo"))},null,8,Pa)]),l("tr",null,[l("td",{scope:"col",class:R(o.$style["binding-item-wrapper"])},[l("div",{class:R(o.$style["binding-item"])},[La,l("small",{class:R(o.$style["binding-item-plus"])},"+",2),Ba,l("small",{class:R(o.$style["binding-item-plus"])},"+",2),Ga],2)],2),l("td",{scope:"col",class:R(o.$style["binding-item-wrapper"])},[l("div",{class:R(o.$style["binding-item"])},[Na,l("small",{class:R(o.$style["binding-item-plus"])},"+",2),Ha,l("small",{class:R(o.$style["binding-item-plus"])},"+",2),Ua],2)],2),l("td",{scope:"col",textContent:V(r(t)("board.nav.download_image.action"))},null,8,Va)]),l("tr",null,[l("td",{scope:"col",class:R(o.$style["binding-item-wrapper"])},[l("div",{class:R(o.$style["binding-item"])},[Wa,l("small",{class:R(o.$style["binding-item-plus"])},"+",2),Ka],2)],2),l("td",{scope:"col",class:R(o.$style["binding-item-wrapper"])},[l("div",{class:R(o.$style["binding-item"])},[Ya,l("small",{class:R(o.$style["binding-item-plus"])},"+",2),ja],2)],2),l("td",{scope:"col",textContent:V(r(t)("board.nav.redo"))},null,8,qa)]),l("tr",null,[l("td",{scope:"col",class:R(o.$style["binding-item-wrapper"])},[l("div",{class:R(o.$style["binding-item"])},Za,2)],2),l("td",{scope:"col",class:R(o.$style["binding-item-wrapper"])},[l("div",{class:R(o.$style["binding-item"])},Qa,2)],2),l("td",{scope:"col",textContent:V(r(t)("board.nav.toggle_fullscreen"))},null,8,to)])])],2),l("h4",{textContent:V(r(t)("board.nav.help.heading_authors"))},null,8,eo),l("p",null,[st(V(r(t)("main.brought_to_you_by"))+" ",1),l("a",{href:`${r(Pn)}/`,"data-tooltip":r(t)("main.visit_our_website"),title:r(t)("main.visit_our_website")},"FRSOURCE",8,no)]),l("p",null,[l("a",so,[L(r(Ln)),st(" "+V(r(t)("main.star_us_on_github")),1)])]),l("p",null,[l("a",ao,[L(r(Pe)),st(" "+V(r(t)("main.donate_us")),1)])]),oo,l("p",{class:R(o.$style.terms)},[L(u,{to:{name:`lang-${r(Ee)}-terms`}},{default:tt(()=>[l("small",{textContent:V(r(t)("main.terms_and_conditions"))},null,8,io)]),_:1},8,["to"]),L(u,{to:{name:`lang-${r(Ee)}-privacy-policy`}},{default:tt(()=>[l("small",{textContent:V(r(t)("main.privacy_policy"))},null,8,ro)]),_:1},8,["to"])],2)]),_:1},8,["modelValue","heading","class"])]),_:1},8,["tooltip"])])}}}),uo="f_4",co="f_9",ho="f__",fo={modal:uo,"hide-mobile":"f_5","binding-item":"f_6","binding-item-plus":"f_7","list-item":"f_8",terms:co,donate:ho},vo={$style:fo},po=kt(lo,[["__cssModules",vo]]),mo={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},go=l("path",{fill:"currentColor",d:"M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"},null,-1),bo=l("path",{fill:"currentColor",d:"M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"},null,-1),_o=[go,bo];function yo(e,t){return M(),z("svg",mo,_o)}const wo={name:"carbon-copy",render:yo},$o={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},So=l("path",{fill:"currentColor",d:"m13 24l-9-9l1.414-1.414L13 21.171L26.586 7.586L28 9L13 24z"},null,-1),ko=[So];function Co(e,t){return M(),z("svg",$o,ko)}const xo={name:"carbon-checkmark",render:Co},To=ct({__name:"BoardSummaryItem",props:{value:{type:Number,default:0}},setup(e){const t=e,n=N(()=>t.value?t.value.toFixed(3):""),{copy:s,copied:a,isSupported:o}=Bn({source:n});return(i,u)=>{const h=Dt;return M(),z("small",{class:R(i.$style.item),onClick:u[0]||(u[0]=()=>r(s)())},[l("div",null,[Bt(i.$slots,"default"),l("span",{class:R(i.$style.text)},[r(n)?(M(),z(pt,{key:0},[st(V(r(n))+"\xB0",1)],64)):(M(),z(pt,{key:1},[st("?")],64))],2)]),r(o)&&r(n)?(M(),lt(h,{key:0,class:R(i.$style.btn),disabled:r(a)},{default:tt(()=>[r(a)?(M(),lt(r(xo),{key:0})):(M(),lt(r(wo),{key:1}))]),_:1},8,["class","disabled"])):ut("v-if",!0)],2)}}}),Mo="f_1",Eo="f_2",Io="f_3",Do={item:Mo,text:Eo,btn:Io},Ao={$style:Do},Ro=kt(To,[["__cssModules",Ao]]),ve=4,ae=At(()=>{const e=G([]),t=G([]),n=G(ve-1);let s=()=>{},a=()=>{};at(e,I=>{t.value=[...I]},{deep:!0,flush:"sync"});const o=(I,D)=>{++n.value>=ve&&(n.value=0,e.value=[]);const x=Math.floor(n.value/2);if(n.value%2){const q=e.value[x][0];if(!q)return;e.value[x]=[q,[I,D]]}else e.value[x]=[[I,D]]},i=(I,D)=>{const x=n.value+1>=ve?0:n.value+1,q=Math.floor(x/2);if(x%2){const T=t.value[q][0];if(!T)return;t.value[q]=[T,[I,D]]}else t.value[q]=[[I,D]]},{undo:u,redo:h,canUndo:m,canRedo:p}=Qt(n),{undo:g,redo:w,canUndo:k,canRedo:$}=Qt(e,{deep:!0}),A=()=>{g(),s(),u()},O=()=>{w(),a(),h()};return ge({onEventFired(I){(I.ctrlKey||I.metaKey)&&I.key==="z"&&(I.shiftKey?O():A())}}),{step:n,lines:t,drawNextPoint:o,predictNextPoint:i,undo:A,redo:O,canUndo:N(()=>m.value&&k.value),canRedo:N(()=>p.value&&$.value),registerOnUndo:I=>s=I,registerOnRedo:I=>a=I}}),rn=e=>{const[[[t,n],[s,a]],[[o,i],[u,h]]]=e,m=s-t,p=a-n,g=u-o,w=h-i,k=Math.atan2(m*w-p*g,m*g+p*w);return Math.abs(k)*(180/Math.PI)},ye=e=>N(()=>{var t,n;return(((t=e.value[0])==null?void 0:t.length)||0)<2||(((n=e.value[1])==null?void 0:n.length)||0)<2?0:rn(e.value)});function Oo(){try{return"constructor"in GestureEvent}catch{return!1}}function ln(){return typeof window<"u"&&"ontouchstart"in window}function un(e){return"pointerId"in e?null:e.type==="touchend"?e.changedTouches:e.targetTouches}function we(e){return Array.from(un(e)).map(t=>t.identifier)}function bt(e){const t="buttons"in e?e.buttons:0,{shiftKey:n,altKey:s,metaKey:a,ctrlKey:o}=e;return{buttons:t,shiftKey:n,altKey:s,metaKey:a,ctrlKey:o}}const ue=e=>e;function Le(e,t=ue){const n=un(e),{clientX:s,clientY:a}=n?n[0]:e;return t([s,a])}function Be(e,t,n=ue){const[s,a]=Array.from(e.touches).filter(k=>t.includes(k.identifier));if(!s||!a)throw Error("The event doesn't have two pointers matching the pointerIds");const o=a.clientX-s.clientX,i=a.clientY-s.clientY,u=(a.clientX+s.clientX)/2,h=(a.clientY+s.clientY)/2,m=Math.hypot(o,i),p=-(Math.atan2(o,i)*180)/Math.PI,g=n([m,p]),w=n([u,h]);return{values:g,origin:w}}const Ge=40,Ne=800;function cn(e,t=ue){let{deltaX:n,deltaY:s,deltaMode:a}=e;return a===1?(n*=Ge,s*=Ge):a===2&&(n*=Ne,s*=Ne),t([n,s])}function He(e,t=ue){return t([e.scale,e.rotation])}function dn(){}function hn(...e){return e.length===0?dn:e.length===1?e[0]:function(){var t;for(let n of e)t=n.apply(this,arguments)||t;return t}}function St(e,t){if(e===void 0){if(t===void 0)throw new Error("Must define fallback value if undefined is expected");e=t}return Array.isArray(e)?e:[e,e]}function Ue(e,t){return Object.assign({},t,e||{})}function oe(e,...t){return typeof e=="function"?e(...t):e}function Lt(e){return{_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,_dragStarted:!1,_dragPreventScroll:!1,_dragIsTap:!0,_dragDelayed:!1,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:dn,canceled:!1,memo:void 0,args:void 0,...e}}function fn(){const e={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1,locked:!1},t=Lt({_pointerId:void 0,axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,tap:!1,swipe:[0,0]}),n=Lt({_pointerIds:[],da:[0,0],vdva:[0,0],origin:void 0,turns:0}),s=Lt({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),a=Lt({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),o=Lt({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:e,drag:t,pinch:n,wheel:s,move:a,scroll:o}}class zo{constructor(t){this.classes=t,this.pointerIds=new Set,this.touchIds=new Set,this.supportsTouchEvents=ln(),this.supportsGestureEvents=Oo(),this.bind=(...n)=>{const s={};for(let a of this.classes)new a(this,n).addBindings(s);for(let a in this.nativeRefs)nt(s,a,o=>this.nativeRefs[a]({...this.state.shared,event:o,args:n}));return this.config.domTarget?Bo(this,s):Go(this,s)},this.clean=()=>{const{eventOptions:n,domTarget:s}=this.config,a=r(s);a&&Vt(a,mn(this.domListeners),n),Object.values(this.timeouts).forEach(clearTimeout),Fo(this)},this.classes=t,this.state=fn(),this.timeouts={},this.domListeners=[],this.windowListeners={}}}function vn(e,t){"pointerId"in t?e.pointerIds.add(t.pointerId):e.touchIds=new Set(we(t))}function pn(e,t){"pointerId"in t?e.pointerIds.delete(t.pointerId):we(t).forEach(n=>e.touchIds.delete(n))}function Fo(e){const{config:{window:t,eventOptions:n},windowListeners:s}=e,a=r(t);if(!!a){for(let o in s){const i=s[o];Vt(a,i,n)}e.windowListeners={}}}function Po({config:e,windowListeners:t},n,s=e.eventOptions){const a=r(e.window);!a||(Vt(a,t[n],s),delete t[n])}function Lo({config:e,windowListeners:t},n,s=[],a=e.eventOptions){const o=r(e.window);!o||(Vt(o,t[n],a),gn(o,t[n]=s,a))}function Bo({config:e,domListeners:t},n){const{eventOptions:s,domTarget:a}=e,o=r(a);if(!o)throw new Error("domTarget must be defined");Vt(o,mn(t),s);for(let[i,u]of Object.entries(n)){const h=i.slice(2).toLowerCase();t.push([h,hn(...u)])}gn(o,t,s)}function Go({config:e},t){const n={},s=e.eventOptions.capture?"Capture":"";for(let[a,o]of Object.entries(t)){const i=Array.isArray(o)?o:[o],u=a+s;n[u]=hn(...i)}return n}function mn(e=[]){return e.splice(0,e.length)}function nt(e,t,n){e[t]||(e[t]=[]),e[t].push(n)}function gn(e,t=[],n={}){if(!!e)for(let[s,a]of t)e.addEventListener(s,a,n)}function Vt(e,t=[],n={}){if(!!e)for(let[s,a]of t)e.removeEventListener(s,a,n)}function ie(e,t){return e.map((n,s)=>n+t[s])}function $e(e,t){return e.map((n,s)=>n-t[s])}function Ht(e){return Math.hypot(...e)}function No(e,t=e){const n=Ht(t),s=n===0?0:1/n,a=t.map(i=>s*i);return{distance:Ht(e),direction:a}}function bn(e,t,n){const s=Ht(t),a=s===0?0:1/s,o=n===0?0:1/n,i=o*s,u=t.map(p=>o*p),h=t.map(p=>a*p),m=Ht(e);return{velocities:u,velocity:i,distance:m,direction:h}}function re(e){return Math.sign?Math.sign(e):Number(e>0)-Number(e<0)||+e}function Ho(e,t,n){return Math.max(t,Math.min(e,n))}function Uo(e,t){return Math.pow(e,t*5)}function Ve(e,t,n){return t===0||Math.abs(t)===1/0?Uo(e,n):e*t*n/(t+n*e)}function We(e,t,n,s=.15){return s===0?Ho(e,t,n):e<t?-Ve(t-e,n-t,s)+t:e>n?+Ve(e-n,n-t,s)+n:e}const _t=new Map,Vo=e=>e;class _n{constructor(t,n=[]){this.controller=t,this.args=n,this.debounced=!0,this.setTimeout=(s,a=140,...o)=>{clearTimeout(this.controller.timeouts[this.stateKey]),this.controller.timeouts[this.stateKey]=window.setTimeout(s,a,...o)},this.clearTimeout=()=>{clearTimeout(this.controller.timeouts[this.stateKey])},this.fireGestureHandler=(s=!1)=>{if(this.state._blocked)return this.debounced||(this.state._active=!1,this.clean()),null;if(!s&&!this.state.intentional&&!this.config.triggerAllEvents)return null;if(this.state.intentional){const h=this.state.active,m=this.state._active;this.state.active=m,this.state.first=m&&!h,this.state.last=h&&!m,this.controller.state.shared[this.ingKey]=m}const a=this.controller.pointerIds.size||this.controller.touchIds.size,o=this.controller.state.shared.buttons>0||a>0,i={...this.controller.state.shared,...this.state,...this.mapStateValues(this.state),locked:!!document.pointerLockElement,touches:a,down:o},u=this.handler(i);return this.state.memo=u!==void 0?u:this.state.memo,i},this.controller=t,this.args=n}get config(){return this.controller.config[this.stateKey]}get enabled(){return this.controller.config.enabled&&this.config.enabled}get state(){return this.controller.state[this.stateKey]}get handler(){return this.controller.handlers[this.stateKey]}get transform(){return this.config.transform||this.controller.config.transform||Vo}updateSharedState(t){Object.assign(this.controller.state.shared,t)}updateGestureState(t){Object.assign(this.state,t)}checkIntentionality(t,n){return{_intentional:t,_blocked:!1}}getMovement(t){const{rubberband:n,threshold:s}=this.config,{_bounds:a,_initial:o,_active:i,_intentional:u,lastOffset:h,movement:m}=this.state,p=this.getInternalMovement(t,this.state),g=this.transform(s).map(Math.abs),w=u[0]===!1?Ke(p[0],g[0]):u[0],k=u[1]===!1?Ke(p[1],g[1]):u[1],$=this.checkIntentionality([w,k],p);if($._blocked)return{...$,_movement:p,delta:[0,0]};const A=$._intentional,O=p;let I=[A[0]!==!1?p[0]-A[0]:0,A[1]!==!1?p[1]-A[1]:0];const D=ie(I,h),x=i?n:[0,0];return I=Ye(a,ie(I,o),x),{...$,intentional:A[0]!==!1||A[1]!==!1,_initial:o,_movement:O,movement:I,values:t,offset:Ye(a,D,x),delta:$e(I,m)}}clean(){this.clearTimeout()}}function Ke(e,t){return Math.abs(e)>=t?re(e)*t:!1}function Ye(e,[t,n],[s,a]){const[[o,i],[u,h]]=e;return[We(t,o,i,s),We(n,u,h,a)]}function rt({state:e},t,n){const{timeStamp:s,type:a}=t,o=e.values,i=n?0:s-e.startTime;return{_lastEventType:a,event:t,timeStamp:s,elapsedTime:i,previous:o}}function Nt({state:e,config:t,stateKey:n,args:s},a,o){const i=e.offset,u=o.timeStamp,{initial:h,bounds:m}=t,p={...fn()[n],_active:!0,args:s,values:a,initial:a,offset:i,lastOffset:i,startTime:u};return{...p,_initial:oe(h,p),_bounds:oe(m,p)}}class yn extends _n{getInternalMovement(t,n){return $e(t,n.initial)}checkIntentionality(t,n){if(t[0]===!1&&t[1]===!1)return{_intentional:t,axis:this.state.axis};const[s,a]=n.map(Math.abs),o=this.state.axis||(s>a?"x":s<a?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:t,_blocked:!1,axis:o}:o?!!this.config.axis&&o!==this.config.axis?{_intentional:t,_blocked:!0,axis:o}:(t[o==="x"?1:0]=!1,{_intentional:t,_blocked:!1,axis:o}):{_intentional:[!1,!1],_blocked:!1,axis:o}}getKinematics(t,n){const s=this.getMovement(t);if(!s._blocked){const a=n.timeStamp-this.state.timeStamp;Object.assign(s,bn(s.movement,s.delta,a))}return s}mapStateValues(t){return{xy:t.values,vxvy:t.velocities}}}const Wo=3;function je(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}class Ko extends yn{constructor(){super(...arguments),this.ingKey="dragging",this.stateKey="drag",this.setPointerCapture=t=>{if(this.config.useTouch||document.pointerLockElement)return;const{target:n,pointerId:s}=t;n&&"setPointerCapture"in n&&n.setPointerCapture(s),this.updateGestureState({_dragTarget:n,_dragPointerId:s})},this.releasePointerCapture=()=>{if(this.config.useTouch||document.pointerLockElement)return;const{_dragTarget:t,_dragPointerId:n}=this.state;if(n&&t&&"releasePointerCapture"in t&&(!("hasPointerCapture"in t)||t.hasPointerCapture(n)))try{t.releasePointerCapture(n)}catch{}},this.preventScroll=t=>{this.state._dragPreventScroll&&t.cancelable&&t.preventDefault()},this.getEventId=t=>this.config.useTouch?t.changedTouches[0].identifier:t.pointerId,this.isValidEvent=t=>this.state._pointerId===this.getEventId(t),this.shouldPreventWindowScrollY=this.config.preventWindowScrollY&&this.controller.supportsTouchEvents,this.setUpWindowScrollDetection=t=>{je(t),Lo(this.controller,this.stateKey,[["touchmove",this.preventScroll],["touchend",this.clean.bind(this)],["touchcancel",this.clean.bind(this)]],{passive:!1}),this.setTimeout(this.startDrag.bind(this),250,t)},this.setUpDelayedDragTrigger=t=>{this.state._dragDelayed=!0,je(t),this.setTimeout(this.startDrag.bind(this),this.config.delay,t)},this.setStartState=t=>{const n=Le(t,this.transform);this.updateSharedState(bt(t)),this.updateGestureState({...Nt(this,n,t),...rt(this,t,!0),_pointerId:this.getEventId(t)}),this.updateGestureState(this.getMovement(n))},this.onDragStart=t=>{vn(this.controller,t),!(!this.enabled||this.state._active)&&(this.setStartState(t),this.setPointerCapture(t),this.shouldPreventWindowScrollY?this.setUpWindowScrollDetection(t):this.config.delay>0?this.setUpDelayedDragTrigger(t):this.startDrag(t,!0))},this.onDragChange=t=>{if(this.state.canceled||!this.state._active||!this.isValidEvent(t)||this.state._lastEventType===t.type&&t.timeStamp===this.state.timeStamp)return;let n;if(document.pointerLockElement){const{movementX:h,movementY:m}=t;n=ie(this.transform([h,m]),this.state.values)}else n=Le(t,this.transform);const s=this.getKinematics(n,t);if(!this.state._dragStarted){if(this.state._dragDelayed){this.startDrag(t);return}if(this.shouldPreventWindowScrollY)if(!this.state._dragPreventScroll&&s.axis)if(s.axis==="x")this.startDrag(t);else{this.state._active=!1;return}else return;else return}const a=bt(t);this.updateSharedState(a);const o=rt(this,t),i=Ht(s._movement);let{_dragIsTap:u}=this.state;u&&i>=Wo&&(u=!1),this.updateGestureState({...o,...s,_dragIsTap:u}),this.fireGestureHandler()},this.onDragEnd=t=>{if(pn(this.controller,t),!this.isValidEvent(t)||(this.clean(),!this.state._active))return;this.state._active=!1;const n=this.state._dragIsTap,[s,a]=this.state.velocities,[o,i]=this.state.movement,[u,h]=this.state._intentional,[m,p]=this.config.swipeVelocity,[g,w]=this.config.swipeDistance,k=this.config.swipeDuration,$={...rt(this,t),...this.getMovement(this.state.values)},A=[0,0];$.elapsedTime<k&&(u!==!1&&Math.abs(s)>m&&Math.abs(o)>g&&(A[0]=re(s)),h!==!1&&Math.abs(a)>p&&Math.abs(i)>w&&(A[1]=re(a))),this.updateSharedState({buttons:0}),this.updateGestureState({...$,tap:n,swipe:A}),this.fireGestureHandler(this.config.filterTaps&&n===!0)},this.clean=()=>{super.clean(),this.state._dragStarted=!1,this.releasePointerCapture(),Po(this.controller,this.stateKey)},this.onCancel=()=>{this.state.canceled||(this.updateGestureState({canceled:!0,_active:!1}),this.updateSharedState({buttons:0}),Gn(this.fireGestureHandler))},this.onClick=t=>{this.state._dragIsTap||t.stopPropagation()}}startDrag(t,n=!1){!this.state._active||this.state._dragStarted||(n||this.setStartState(t),this.updateGestureState({_dragStarted:!0,_dragPreventScroll:!0,cancel:this.onCancel}),this.clearTimeout(),this.fireGestureHandler())}addBindings(t){if(this.config.useTouch?(nt(t,"onTouchStart",this.onDragStart),nt(t,"onTouchMove",this.onDragChange),nt(t,"onTouchEnd",this.onDragEnd),nt(t,"onTouchCancel",this.onDragEnd)):(nt(t,"onPointerDown",this.onDragStart),nt(t,"onPointerMove",this.onDragChange),nt(t,"onPointerUp",this.onDragEnd),nt(t,"onPointerCancel",this.onDragEnd)),this.config.filterTaps){const n=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";nt(t,n,this.onClick)}}}function Se(e,t){let n,s=[],a,o=!1;function i(...u){return o&&n===this&&t(u,s)||(a=e.apply(this,u),o=!0,n=this,s=u),a}return i}function Jt(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;let n,s,a;if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!Jt(e[s],t[s]))return!1;return!0}let o;if(typeof Map=="function"&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o=e.entries();!(s=o.next()).done;)if(!t.has(s.value[0]))return!1;for(o=e.entries();!(s=o.next()).done;)if(!Jt(s.value[1],t.get(s.value[0])))return!1;return!0}if(typeof Set=="function"&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o=e.entries();!(s=o.next()).done;)if(!t.has(s.value[0]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[s]))return!1;if(typeof Element<"u"&&e instanceof Element)return!1;for(s=n;s--!==0;)if(!(a[s]==="_owner"&&e.$$typeof)&&!Jt(e[a[s]],t[a[s]]))return!1;return!0}return e!==e&&t!==t}function ke(e,t){try{return Jt(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}function Wt(e={},t){const n={};for(const[s,a]of Object.entries(t))switch(typeof a){case"function":n[s]=a.call(n,e[s],s,e);break;case"object":n[s]=Wt(e[s],a);break;case"boolean":a&&(n[s]=e[s]);break}return n}const Yo=180,jo=.15,qo=.5,Xo=50,Zo=250,wn={threshold(e=0){return St(e)},rubberband(e=0){switch(e){case!0:return St(jo);case!1:return St(0);default:return St(e)}},enabled(e=!0){return e},triggerAllEvents(e=!1){return e},initial(e=0){return typeof e=="function"?e:St(e)},transform:!0},Ce={...wn,axis:!0,lockDirection(e=!1){return e},bounds(e={}){if(typeof e=="function")return o=>Ce.bounds(e(o));const{left:t=-1/0,right:n=1/0,top:s=-1/0,bottom:a=1/0}=e;return[[t,n],[s,a]]}},Jo=typeof window<"u"&&window.document&&window.document.createElement,Qo={enabled(e=!0){return e},domTarget:!0,window(e=Jo?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform:!0},ti={...wn,bounds(e,t,{distanceBounds:n={},angleBounds:s={}}){const a=i=>{const u=Ue(oe(n,i),{min:-1/0,max:1/0});return[u.min,u.max]},o=i=>{const u=Ue(oe(s,i),{min:-1/0,max:1/0});return[u.min,u.max]};return typeof n!="function"&&typeof s!="function"?[a(),o()]:i=>[a(i),o(i)]}},ei={...Ce,useTouch(e=!0){return e&&ln()},preventWindowScrollY(e=!1){return e},threshold(e,t,{filterTaps:n=!1,lockDirection:s=!1,axis:a=void 0}){const o=St(e,n?3:s||a?1:0);return this.filterTaps=n,o},swipeVelocity(e=qo){return St(e)},swipeDistance(e=Xo){return St(e)},swipeDuration(e=Zo){return e},delay(e=0){switch(e){case!0:return Yo;case!1:return 0;default:return e}}};function xe(e){return Wt(e,Qo)}function ni(e={}){return Wt(e,Ce)}function si(e={}){return Wt(e,ti)}function ai(e={}){return Wt(e,ei)}function oi({domTarget:e,eventOptions:t,window:n,enabled:s,...a}){const o=xe({domTarget:e,eventOptions:t,window:n,enabled:s});return o.drag=ai(a),o}function ii({domTarget:e,eventOptions:t,window:n,enabled:s,...a}){const o=xe({domTarget:e,eventOptions:t,window:n,enabled:s});return o.pinch=si(a),o}function ri({domTarget:e,eventOptions:t,window:n,enabled:s,...a}){const o=xe({domTarget:e,eventOptions:t,window:n,enabled:s});return o.wheel=ni(a),o}function Te(e,t,n={}){const s=li(e),a=new zo(s);return a.config=t,a.handlers=e,a.nativeRefs=n,Nn()&&!t.manual&&(Hn(a.bind),Un(a.clean)),a}function li(e){const t=new Set;return e.drag&&t.add(_t.get("drag")),e.wheel&&t.add(_t.get("wheel")),e.scroll&&t.add(_t.get("scroll")),e.move&&t.add(_t.get("move")),e.pinch&&t.add(_t.get("pinch")),e.hover&&t.add(_t.get("hover")),t}function ui(e,t={}){_t.set("drag",Ko);const n=G();return n.value||(n.value=Se(oi,ke)),Te({drag:e},n.value(t))}class ci extends _n{getInternalMovement(t,n){const s=n.values[1];let[a,o=s]=t,i=o-s,u=n.turns;return Math.abs(i)>270&&(u+=re(i)),$e([a,o-360*u],n.initial)}getKinematics(t,n){const s=this.getMovement(t),a=(t[1]-s._movement[1]-this.state.initial[1])/360,o=n.timeStamp-this.state.timeStamp,{distance:i,velocity:u,...h}=bn(s.movement,s.delta,o);return{turns:a,...s,...h}}mapStateValues(t){return{da:t.values,vdva:t.velocities}}}const di=7,hi=260;class fi extends ci{constructor(){super(...arguments),this.ingKey="pinching",this.stateKey="pinch",this.onPinchStart=t=>{vn(this.controller,t);const n=this.controller.touchIds;if(!this.enabled||this.state._active&&this.state._pointerIds.every(i=>n.has(i))||n.size<2)return;const s=Array.from(n).slice(0,2),{values:a,origin:o}=Be(t,s,this.transform);this.updateSharedState(bt(t)),this.updateGestureState({...Nt(this,a,t),...rt(this,t,!0),_pointerIds:s,cancel:this.onCancel,origin:o}),this.updateGestureState(this.getMovement(a)),this.fireGestureHandler()},this.onPinchChange=t=>{const{canceled:n,_active:s}=this.state;if(n||!s||t.timeStamp===this.state.timeStamp)return;const a=bt(t);this.updateSharedState(a);try{const{values:o,origin:i}=Be(t,this.state._pointerIds,this.transform),u=this.getKinematics(o,t);this.updateGestureState({...rt(this,t),...u,origin:i}),this.fireGestureHandler()}catch{this.onPinchEnd(t)}},this.onPinchEnd=t=>{pn(this.controller,t);const n=we(t);this.state._pointerIds.every(s=>!n.includes(s))||(this.clean(),this.state._active&&(this.updateGestureState({...rt(this,t),...this.getMovement(this.state.values),_active:!1}),this.fireGestureHandler()))},this.onCancel=()=>{this.state.canceled||(this.updateGestureState({_active:!1,canceled:!0}),this.fireGestureHandler())},this.onGestureStart=t=>{if(!this.enabled)return;t.preventDefault();const n=He(t,this.transform);this.updateSharedState(bt(t)),this.updateGestureState({...Nt(this,n,t),...rt(this,t,!0),origin:[t.clientX,t.clientY],cancel:this.onCancel}),this.updateGestureState(this.getMovement(n)),this.fireGestureHandler()},this.onGestureChange=t=>{const{canceled:n,_active:s}=this.state;if(n||!s)return;t.preventDefault();const a=bt(t);this.updateSharedState(a);const o=He(t,this.transform);o[0]=(o[0]-this.state.event.scale)*hi+this.state.values[0];const i=this.getKinematics(o,t);this.updateGestureState({...rt(this,t),...i,origin:[t.clientX,t.clientY]}),this.fireGestureHandler()},this.onGestureEnd=t=>{this.clean(),this.state._active&&(this.updateGestureState({...rt(this,t),...this.getMovement(this.state.values),_active:!1,origin:[t.clientX,t.clientY]}),this.fireGestureHandler())},this.wheelShouldRun=t=>this.enabled&&t.ctrlKey,this.getWheelValuesFromEvent=t=>{const[,n]=cn(t,this.transform),{values:[s,a]}=this.state;return{values:[s-n*di,a!==void 0?a:0],origin:[t.clientX,t.clientY],delta:[0,n]}},this.onWheel=t=>{!this.wheelShouldRun(t)||(this.setTimeout(this.onWheelEnd),this.state._active?this.onWheelChange(t):this.onWheelStart(t))},this.onWheelStart=t=>{const{values:n,delta:s,origin:a}=this.getWheelValuesFromEvent(t);t.cancelable&&t.preventDefault(),this.updateSharedState(bt(t)),this.updateGestureState({...Nt(this,n,t),...rt(this,t,!0),initial:this.state.values,offset:n,delta:s,origin:a}),this.updateGestureState(this.getMovement(n)),this.fireGestureHandler()},this.onWheelChange=t=>{t.cancelable&&t.preventDefault(),this.updateSharedState(bt(t));const{values:n,origin:s,delta:a}=this.getWheelValuesFromEvent(t);this.updateGestureState({...rt(this,t),...this.getKinematics(n,t),origin:s,delta:a}),this.fireGestureHandler()},this.onWheelEnd=()=>{this.clean(),this.state._active&&(this.state._active=!1,this.updateGestureState(this.getMovement(this.state.values)),this.fireGestureHandler())}}addBindings(t){this.controller.config.domTarget&&!this.controller.supportsTouchEvents&&this.controller.supportsGestureEvents?(nt(t,"onGestureStart",this.onGestureStart),nt(t,"onGestureChange",this.onGestureChange),nt(t,"onGestureEnd",this.onGestureEnd)):(nt(t,"onTouchStart",this.onPinchStart),nt(t,"onTouchMove",this.onPinchChange),nt(t,"onTouchEnd",this.onPinchEnd),nt(t,"onTouchCancel",this.onPinchEnd),nt(t,"onWheel",this.onWheel))}}class vi extends yn{constructor(){super(...arguments),this.ingKey="wheeling",this.stateKey="wheel",this.debounced=!0,this.handleEvent=t=>{if(t.ctrlKey&&"pinch"in this.controller.handlers||!this.enabled)return;this.setTimeout(this.onEnd),this.updateSharedState(bt(t));const n=ie(cn(t,this.transform),this.state.values);if(this.state._active)this.updateGestureState({...rt(this,t),...this.getKinematics(n,t)});else{this.updateGestureState({...Nt(this,n,t),...rt(this,t,!0),initial:this.state.values});const s=this.getMovement(n),a=No(s.delta);this.updateGestureState(s),this.updateGestureState(a)}this.fireGestureHandler()},this.onEnd=()=>{if(this.clean(),!this.state._active)return;const t=this.getMovement(this.state.values);this.updateGestureState(t),this.updateGestureState({_active:!1,velocities:[0,0],velocity:0}),this.fireGestureHandler()}}addBindings(t){nt(t,"onWheel",this.handleEvent)}}function pi(e,t={}){_t.set("pinch",fi);const n=G();return n.value||(n.value=Se(ii,ke)),Te({pinch:e},n.value(t))}function mi(e,t={}){_t.set("wheel",vi);const n=G();return n.value||(n.value=Se(ri,ke)),Te({wheel:e},n.value(t))}const gi=(e,t)=>{const n=Vn(t),s=N(()=>{var g,w;return(w=(g=r(n))==null?void 0:g.enabled)!=null?w:!0}),a=G(!1),o=G([0,0]),i=G(1),u=G([0,0]),h=N(()=>{var g;return(g=Xe(e))==null?void 0:g.getBoundingClientRect()}),m=g=>(g=(g+2e3)/2e3,g<=0?.01:g),p=({wheeling:g,dragging:w,pinching:k,intentional:$,enabled:A,touches:O,metaKey:I,ctrlKey:D,altKey:x})=>{const q=!A||!$?!1:w&&(O===2||I||x)||k||g&&!D;return a.value?requestAnimationFrame(()=>a.value=q):a.value=q,q};return ui(({wheeling:g,dragging:w,pinching:k,touches:$,intentional:A,delta:O,metaKey:I,ctrlKey:D,altKey:x})=>{!p({wheeling:g,dragging:w,pinching:k,intentional:A,enabled:s.value,metaKey:I,ctrlKey:D,altKey:x,touches:$})||(o.value[0]+=O[0],o.value[1]+=O[1])},{domTarget:e,filterTaps:!0}),mi(({delta:g,wheeling:w,dragging:k,pinching:$,touches:A,intentional:O,metaKey:I,ctrlKey:D,altKey:x})=>{!p({dragging:k,pinching:$,wheeling:w,intentional:O,enabled:s.value,touches:A,metaKey:I,ctrlKey:D,altKey:x})||(o.value[0]+=g[0],o.value[1]+=g[1])},{domTarget:e}),pi(({offset:[g],origin:w,pinching:k,dragging:$,wheeling:A,metaKey:O,ctrlKey:I,altKey:D,touches:x,intentional:q})=>{!p({dragging:$,pinching:k,wheeling:A,intentional:q,enabled:s.value,touches:x,metaKey:O,altKey:D,ctrlKey:I})||(i.value=m(g),w[0]-=o.value[0],w[1]-=o.value[1],h.value&&(w[0]-=h.value.x,w[1]-=h.value.y),u.value=w)},{domTarget:e,eventOptions:{passive:!1}}),{offset:N(()=>[o.value[0]+(1-i.value)*u.value[0],o.value[1]+(1-i.value)*u.value[1]]),zoom:i,zoomOrigin:u,active:a}},$n=At(()=>gi(be())),Sn=At(()=>{const e=G(""),t=G(0),n=G(0);return{src:e,width:t,height:n,processFiles:a=>{if(!((a==null?void 0:a[0])instanceof File))return;const o=new FileReader;o.addEventListener("load",i=>{var u;if((u=i.target)!=null&&u.result){const h=new Image;h.onload=()=>{e.value=h.src,t.value=h.width,n.value=h.height},h.src=i.target.result.toString()}}),o.readAsDataURL(a[0])}}}),bi={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},_i=l("path",{fill:"currentColor",d:"M20 2v2h6.586L18 12.582L19.414 14L28 5.414V12h2V2H20zm-6 17.416L12.592 18L4 26.586V20H2v10h10v-2H5.414L14 19.416z"},null,-1),yi=[_i];function wi(e,t){return M(),z("svg",bi,yi)}const $i={name:"carbon-maximize",render:wi},Si={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},ki=l("path",{fill:"currentColor",d:"M4 18v2h6.586L2 28.582L3.414 30L12 21.414V28h2V18H4zM30 3.416L28.592 2L20 10.586V4h-2v10h10v-2h-6.586L30 3.416z"},null,-1),Ci=[ki];function xi(e,t){return M(),z("svg",Si,Ci)}const Ti={name:"carbon-minimize",render:xi},Mi={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Ei=l("path",{fill:"currentColor",d:"M18 12h-4V8h-2v4H8v2h4v4h2v-4h4v-2z"},null,-1),Ii=l("path",{fill:"currentColor",d:"M21.448 20A10.856 10.856 0 0 0 24 13a11 11 0 1 0-11 11a10.856 10.856 0 0 0 7-2.552L27.586 29L29 27.586ZM13 22a9 9 0 1 1 9-9a9.01 9.01 0 0 1-9 9Z"},null,-1),Di=[Ei,Ii];function Ai(e,t){return M(),z("svg",Mi,Di)}const Ri={name:"carbon-zoom-in",render:Ai},Oi={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},zi=l("path",{fill:"currentColor",d:"M8 12h10v2H8z"},null,-1),Fi=l("path",{fill:"currentColor",d:"M21.448 20A10.856 10.856 0 0 0 24 13a11 11 0 1 0-11 11a10.856 10.856 0 0 0 7-2.552L27.586 29L29 27.586ZM13 22a9 9 0 1 1 9-9a9.01 9.01 0 0 1-9 9Z"},null,-1),Pi=[zi,Fi];function Li(e,t){return M(),z("svg",Oi,Pi)}const Bi={name:"carbon-zoom-out",render:Li},Gi={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Ni=l("path",{fill:"currentColor",d:"M4 20v2h4.586L2 28.586L3.414 30L10 23.414V28h2v-8H4zm15-6a3 3 0 1 0-3-3a3 3 0 0 0 3 3zm0-4a1 1 0 1 1-1 1a1 1 0 0 1 1-1z"},null,-1),Hi=l("path",{fill:"currentColor",d:"M26 4H6a2 2 0 0 0-2 2v10h2V6h20v15.17l-3.59-3.59a2 2 0 0 0-2.82 0L18 19.17L11.83 13l-1.414 1.415L14 18l2.59 2.59a2 2 0 0 0 2.82 0L21 19l5 5v2H16v2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Z"},null,-1),Ui=[Ni,Hi];function Vi(e,t){return M(),z("svg",Gi,Ui)}const Wi={name:"carbon-image-reference",render:Vi},Ki={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Yi=l("path",{d:"M9 24a3.51 3.51 0 0 0-.88-1.86l9.53-16.58l-1.73-1l-9.57 16.56A3.06 3.06 0 0 0 5.5 21a3.5 3.5 0 1 0 3.15 5H28v-2zm-3.5 2A1.5 1.5 0 1 1 7 24.5A1.5 1.5 0 0 1 5.5 26z",fill:"currentColor"},null,-1),ji=l("path",{d:"M22 21h2a13 13 0 0 0-5.42-10.56l-1.16 1.62A11 11 0 0 1 22 21z",fill:"currentColor"},null,-1),qi=[Yi,ji];function Xi(e,t){return M(),z("svg",Ki,qi)}const Zi={name:"carbon-angle",render:Xi},Ji={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Qi=l("path",{fill:"currentColor",d:"M20 10H7.815l3.587-3.586L10 5l-6 6l6 6l1.402-1.415L7.818 12H20a6 6 0 0 1 0 12h-8v2h8a8 8 0 0 0 0-16Z"},null,-1),tr=[Qi];function er(e,t){return M(),z("svg",Ji,tr)}const nr={name:"carbon-undo",render:er},sr={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},ar=l("path",{fill:"currentColor",d:"M12 10h12.185l-3.587-3.586L22 5l6 6l-6 6l-1.402-1.415L24.182 12H12a6 6 0 0 0 0 12h8v2h-8a8 8 0 0 1 0-16Z"},null,-1),or=[ar];function ir(e,t){return M(),z("svg",sr,or)}const rr={name:"carbon-redo",render:ir},lr={width:"1.2em",height:"1.2em",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor"},ur=l("path",{d:"M18.3 26a3.5 3.5 0 006.6-3.05 3 3 0 00-.7-.8l7.53-15.58-1.73-1-7.57 15.56a2.7 2.7 0 00-.8-.1 3.5 3.5 0 00-3.33 2.97h-17.973v2Zm3.4.1a1.5 1.5 0 111.5-1.5 1.5 1.5 0 01-1.5 1.5Z"},null,-1),cr=l("path",{d:"M3.75 21.25a13.2 13.2 90 0120.25-10.56l-.87 1.44a11.75 11.75 90 00-17.6 9.13z"},null,-1),dr=[ur,cr];function hr(e,t){return M(),z("svg",lr,dr)}const fr={name:"custom-angle-obtuse",render:hr},vr={class:"d-none md-d-list-item"},pr={class:"d-none md-d-list-item"},mr={key:0},gr=ct({__name:"BoardControls",props:{boardRef:{type:Object,default:void 0},info:{type:Array,required:!0}},setup(e){const t=e,{t:n}=It(),{lines:s}=ae(),a=ye(s),{zoom:o,zoomOrigin:i}=$n(),u=_e(),{height:h,width:m}=le(u),p=()=>{o.value+=.1,i.value=[m.value/2,h.value/2]},g=()=>{o.value>=.5&&(o.value-=.1,i.value=[m.value/2,h.value/2])},{toggle:w,isFullscreen:k,isSupported:$}=Wn(te(t,"boardRef")),{undo:A,redo:O,canUndo:I,canRedo:D}=ae(),x=N(()=>`${n("board.nav.undo")} [ctrl\xA0+\xA0z][\u2318\xA0+\xA0z]`),q=N(()=>`${n("board.nav.redo")} [ctrl\xA0+\xA0shift\xA0+\xA0z][\u2318\xA0+ shift +\xA0z]`),T=G();at(a,B=>B===void 0?T.value=void 0:T.value=B>90?180-B:B);const _=N(()=>T.value?180-T.value:void 0),{processFiles:y}=Sn(),{files:F,open:W}=Kn({multiple:!1,accept:"image/*"});return Yn(F,B=>{y(Array.from(B))}),Ze("f",w),(B,v)=>{const j=Ro,H=po,Q=Dt,Y=pa;return M(),z("div",{class:R([B.$style.bar,"pointer-none"])},[l("div",{class:R(["pointer-all bg-bg-transparent-inverse text-inverse whitespace-nowrap",B.$style["info-box"]]),onMousemoveCapture:v[0]||(v[0]=ot(()=>{},["prevent","stop"]))},[L(j,{value:T.value},{default:tt(()=>[L(r(Zi))]),_:1},8,["value"]),L(j,{value:r(_)},{default:tt(()=>[L(r(fr))]),_:1},8,["value"])],34),(M(!0),z(pt,null,Ot(e.info,Z=>(M(),z("li",{key:Z,class:R(["bg-bg-transparent-inverse text-inverse min-w-0",B.$style["info-box"]])},[l("small",null,V(Z),1)],2))),128)),l("nav",{class:R(B.$style.nav)},[l("ul",{class:R(["pointer-all",B.$style.nav__btns])},[L(H),l("li",null,[L(Q,{disabled:!r(I),tooltip:r(x),"tooltip-placement":"left",onClick:r(A),onTouchstartCapture:ot(r(A),["prevent","stop"])},{default:tt(()=>[L(r(nr))]),_:1},8,["disabled","tooltip","onClick","onTouchstartCapture"])]),l("li",null,[L(Q,{disabled:!r(D),tooltip:r(q),"tooltip-placement":"left",onClick:r(O),onTouchstartCapture:ot(r(O),["prevent","stop"])},{default:tt(()=>[L(r(rr))]),_:1},8,["disabled","tooltip","onClick","onTouchstartCapture"])]),L(Y,{disabled:r(I)},null,8,["disabled"]),l("li",null,[L(Q,{tooltip:r(n)("board.nav.upload_file"),"tooltip-placement":"left",onClick:v[1]||(v[1]=Z=>r(W)()),onTouchstartCapture:v[2]||(v[2]=ot(Z=>r(W)(),["prevent","stop"]))},{default:tt(()=>[L(r(Wi))]),_:1},8,["tooltip"])]),l("li",vr,[L(Q,{tooltip:`${r(n)("board.result.zoom_out")} [-]`,"tooltip-placement":"left",onClick:v[3]||(v[3]=Z=>g()),onTouchstartCapture:v[4]||(v[4]=ot(Z=>g(),["prevent","stop"]))},{default:tt(()=>[L(r(Bi))]),_:1},8,["tooltip"])]),l("li",pr,[L(Q,{tooltip:`${r(n)("board.result.zoom_in")} [+]`,"tooltip-placement":"left",onClick:v[5]||(v[5]=Z=>p()),onTouchstartCapture:v[6]||(v[6]=ot(Z=>p(),["prevent","stop"]))},{default:tt(()=>[L(r(Ri))]),_:1},8,["tooltip"])]),r($)?(M(),z("li",mr,[L(Q,{tooltip:`${r(n)("board.nav.toggle_fullscreen")} [f]`,"tooltip-placement":"left",onClick:r(w),onTouchstartCapture:ot(r(w),["prevent","stop"])},{default:tt(()=>[r(k)?(M(),lt(r(Ti),{key:0})):(M(),lt(r($i),{key:1}))]),_:1},8,["tooltip","onClick","onTouchstartCapture"])])):ut("v-if",!0)],2)],2)],2)}}}),br="f_t",_r="f_u",yr={bar:br,nav__btns:_r,"info-box":"f_v"},wr={$style:yr},$r=kt(gr,[["__cssModules",wr]]),Sr=["x1","y1","x2","y2"],kr=ct({__name:"Segment",props:{pointStart:{type:Array,default:void 0},pointStop:{type:Array,default:void 0}},setup(e){return(t,n)=>e.pointStart&&e.pointStop?(M(),z("line",{key:0,x1:e.pointStart[0],y1:e.pointStart[1],x2:e.pointStop[0],y2:e.pointStop[1]},null,8,Sr)):ut("v-if",!0)}}),Cr=jn((e,t,n,s)=>{if(!e||!t||!n||!s)return;e===n&&++e;const a=(t-s)/(e-n),o=s-n*a;return{slope:a,intercept:o}}),Ut=e=>N(()=>Cr(...e.value[0]||[],...e.value[1]||[]));var Rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var kn={};(function(e){var t=Rt&&Rt.__extends||function(){var P=function(c,f){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,C){S.__proto__=C}||function(S,C){for(var d in C)Object.prototype.hasOwnProperty.call(C,d)&&(S[d]=C[d])},P(c,f)};return function(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");P(c,f);function S(){this.constructor=c}c.prototype=f===null?Object.create(f):(S.prototype=f.prototype,new S)}}(),n=Rt&&Rt.__classPrivateFieldSet||function(P,c,f){if(!c.has(P))throw new TypeError("attempted to set private field on non-instance");return c.set(P,f),f},s=Rt&&Rt.__classPrivateFieldGet||function(P,c){if(!c.has(P))throw new TypeError("attempted to get private field on non-instance");return c.get(P)},a,o,i,u,h,m,p,g,w,k,$,A,O,I,D,x,q,T,_,y,F,W;e.__esModule=!0,e.default=void 0;var B=function(P){var c=131,f=137,S=0;P+="x";for(var C=Math.floor(9007199254740991/f),d=0;d<P.length;d++)S>C&&(S=Math.floor(S/f)),S=S*c+P.charCodeAt(d);return S},v="0123456789abcdef".split(""),j=[-2147483648,8388608,32768,128],H=[24,16,8,0],Q=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Y=[],Z=function(){function P(c,f){c===void 0&&(c=!1),f===void 0&&(f=!1),a.set(this,void 0),o.set(this,void 0),i.set(this,void 0),u.set(this,void 0),h.set(this,void 0),m.set(this,void 0),p.set(this,void 0),g.set(this,void 0),w.set(this,void 0),k.set(this,void 0),$.set(this,void 0),A.set(this,void 0),O.set(this,void 0),I.set(this,void 0),D.set(this,void 0),x.set(this,void 0),q.set(this,0),T.set(this,void 0),this.init(c,f)}return P.prototype.init=function(c,f){f?(Y[0]=Y[16]=Y[1]=Y[2]=Y[3]=Y[4]=Y[5]=Y[6]=Y[7]=Y[8]=Y[9]=Y[10]=Y[11]=Y[12]=Y[13]=Y[14]=Y[15]=0,n(this,o,Y)):n(this,o,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),c?(n(this,m,3238371032),n(this,p,914150663),n(this,g,812702999),n(this,w,4144912697),n(this,k,4290775857),n(this,$,1750603025),n(this,A,1694076839),n(this,O,3204075428)):(n(this,m,1779033703),n(this,p,3144134277),n(this,g,1013904242),n(this,w,2773480762),n(this,k,1359893119),n(this,$,2600822924),n(this,A,528734635),n(this,O,1541459225)),n(this,a,n(this,T,n(this,i,n(this,D,0)))),n(this,u,n(this,I,!1)),n(this,h,!0),n(this,x,c)},P.prototype.update=function(c){if(s(this,u))return this;var f;c instanceof ArrayBuffer?f=new Uint8Array(c):f=c;for(var S=0,C=f.length,d=s(this,o);S<C;){var b=void 0;if(s(this,I)&&(n(this,I,!1),d[0]=s(this,a),d[16]=d[1]=d[2]=d[3]=d[4]=d[5]=d[6]=d[7]=d[8]=d[9]=d[10]=d[11]=d[12]=d[13]=d[14]=d[15]=0),typeof f!="string")for(b=s(this,T);S<C&&b<64;++S)d[b>>2]|=f[S]<<H[b++&3];else for(b=s(this,T);S<C&&b<64;++S){var E=f.charCodeAt(S);E<128?d[b>>2]|=E<<H[b++&3]:E<2048?(d[b>>2]|=(192|E>>6)<<H[b++&3],d[b>>2]|=(128|E&63)<<H[b++&3]):E<55296||E>=57344?(d[b>>2]|=(224|E>>12)<<H[b++&3],d[b>>2]|=(128|E>>6&63)<<H[b++&3],d[b>>2]|=(128|E&63)<<H[b++&3]):(E=65536+((E&1023)<<10|f.charCodeAt(++S)&1023),d[b>>2]|=(240|E>>18)<<H[b++&3],d[b>>2]|=(128|E>>12&63)<<H[b++&3],d[b>>2]|=(128|E>>6&63)<<H[b++&3],d[b>>2]|=(128|E&63)<<H[b++&3])}n(this,q,b),n(this,i,s(this,i)+(b-s(this,T))),b>=64?(n(this,a,d[16]),n(this,T,b-64),this.hash(),n(this,I,!0)):n(this,T,b)}return s(this,i)>4294967295&&(n(this,D,s(this,D)+(s(this,i)/4294967296<<0)),n(this,i,s(this,i)%4294967296)),this},P.prototype.finalize=function(){if(!s(this,u)){n(this,u,!0);var c=s(this,o),f=s(this,q);c[16]=s(this,a),c[f>>2]|=j[f&3],n(this,a,c[16]),f>=56&&(s(this,I)||this.hash(),c[0]=s(this,a),c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),c[14]=s(this,D)<<3|s(this,i)>>>29,c[15]=s(this,i)<<3,this.hash()}},P.prototype.hash=function(){for(var c=s(this,m),f=s(this,p),S=s(this,g),C=s(this,w),d=s(this,k),b=s(this,$),E=s(this,A),K=s(this,O),X=s(this,o),et,J,ft,U,vt,wt,zt,ce,de,Yt,Ct=16;Ct<64;++Ct)U=X[Ct-15],et=(U>>>7|U<<25)^(U>>>18|U<<14)^U>>>3,U=X[Ct-2],J=(U>>>17|U<<15)^(U>>>19|U<<13)^U>>>10,X[Ct]=X[Ct-16]+et+X[Ct-7]+J<<0;Yt=f&S;for(var mt=0;mt<64;mt+=4)s(this,h)?(s(this,x)?(zt=300032,U=X[0]-1413257819,K=U-150054599<<0,C=U+24177077<<0):(zt=704751109,U=X[0]-210244248,K=U-1521486534<<0,C=U+143694565<<0),n(this,h,!1)):(et=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),J=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),zt=c&f,ft=zt^c&S^Yt,wt=d&b^~d&E,U=K+J+wt+Q[mt]+X[mt],vt=et+ft,K=C+U<<0,C=U+vt<<0),et=(C>>>2|C<<30)^(C>>>13|C<<19)^(C>>>22|C<<10),J=(K>>>6|K<<26)^(K>>>11|K<<21)^(K>>>25|K<<7),ce=C&c,ft=ce^C&f^zt,wt=K&d^~K&b,U=E+J+wt+Q[mt+1]+X[mt+1],vt=et+ft,E=S+U<<0,S=U+vt<<0,et=(S>>>2|S<<30)^(S>>>13|S<<19)^(S>>>22|S<<10),J=(E>>>6|E<<26)^(E>>>11|E<<21)^(E>>>25|E<<7),de=S&C,ft=de^S&c^ce,wt=E&K^~E&d,U=b+J+wt+Q[mt+2]+X[mt+2],vt=et+ft,b=f+U<<0,f=U+vt<<0,et=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),J=(b>>>6|b<<26)^(b>>>11|b<<21)^(b>>>25|b<<7),Yt=f&S,ft=Yt^f&C^de,wt=b&E^~b&K,U=d+J+wt+Q[mt+3]+X[mt+3],vt=et+ft,d=c+U<<0,c=U+vt<<0;n(this,m,s(this,m)+c<<0),n(this,p,s(this,p)+f<<0),n(this,g,s(this,g)+S<<0),n(this,w,s(this,w)+C<<0),n(this,k,s(this,k)+d<<0),n(this,$,s(this,$)+b<<0),n(this,A,s(this,A)+E<<0),n(this,O,s(this,O)+K<<0)},P.prototype.hex=function(){this.finalize();var c=s(this,m),f=s(this,p),S=s(this,g),C=s(this,w),d=s(this,k),b=s(this,$),E=s(this,A),K=s(this,O),X=v[c>>28&15]+v[c>>24&15]+v[c>>20&15]+v[c>>16&15]+v[c>>12&15]+v[c>>8&15]+v[c>>4&15]+v[c&15]+v[f>>28&15]+v[f>>24&15]+v[f>>20&15]+v[f>>16&15]+v[f>>12&15]+v[f>>8&15]+v[f>>4&15]+v[f&15]+v[S>>28&15]+v[S>>24&15]+v[S>>20&15]+v[S>>16&15]+v[S>>12&15]+v[S>>8&15]+v[S>>4&15]+v[S&15]+v[C>>28&15]+v[C>>24&15]+v[C>>20&15]+v[C>>16&15]+v[C>>12&15]+v[C>>8&15]+v[C>>4&15]+v[C&15]+v[d>>28&15]+v[d>>24&15]+v[d>>20&15]+v[d>>16&15]+v[d>>12&15]+v[d>>8&15]+v[d>>4&15]+v[d&15]+v[b>>28&15]+v[b>>24&15]+v[b>>20&15]+v[b>>16&15]+v[b>>12&15]+v[b>>8&15]+v[b>>4&15]+v[b&15]+v[E>>28&15]+v[E>>24&15]+v[E>>20&15]+v[E>>16&15]+v[E>>12&15]+v[E>>8&15]+v[E>>4&15]+v[E&15];return s(this,x)||(X+=v[K>>28&15]+v[K>>24&15]+v[K>>20&15]+v[K>>16&15]+v[K>>12&15]+v[K>>8&15]+v[K>>4&15]+v[K&15]),X},P.prototype.toString=function(){return this.hex()},P.prototype.digest=function(){this.finalize();var c=s(this,m),f=s(this,p),S=s(this,g),C=s(this,w),d=s(this,k),b=s(this,$),E=s(this,A),K=s(this,O),X=[c>>24&255,c>>16&255,c>>8&255,c&255,f>>24&255,f>>16&255,f>>8&255,f&255,S>>24&255,S>>16&255,S>>8&255,S&255,C>>24&255,C>>16&255,C>>8&255,C&255,d>>24&255,d>>16&255,d>>8&255,d&255,b>>24&255,b>>16&255,b>>8&255,b&255,E>>24&255,E>>16&255,E>>8&255,E&255];return s(this,x)||X.push(K>>24&255,K>>16&255,K>>8&255,K&255),X},P.prototype.array=function(){return this.digest()},P.prototype.arrayBuffer=function(){this.finalize();var c=new ArrayBuffer(s(this,x)?28:32),f=new DataView(c);return f.setUint32(0,s(this,m)),f.setUint32(4,s(this,p)),f.setUint32(8,s(this,g)),f.setUint32(12,s(this,w)),f.setUint32(16,s(this,k)),f.setUint32(20,s(this,$)),f.setUint32(24,s(this,A)),s(this,x)||f.setUint32(28,s(this,O)),c},P}();a=new WeakMap,o=new WeakMap,i=new WeakMap,u=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,g=new WeakMap,w=new WeakMap,k=new WeakMap,$=new WeakMap,A=new WeakMap,O=new WeakMap,I=new WeakMap,D=new WeakMap,x=new WeakMap,q=new WeakMap,T=new WeakMap,function(P){t(c,P);function c(f,S,C){S===void 0&&(S=!1),C===void 0&&(C=!1);var d=P.call(this,S,C)||this;_.set(d,void 0),y.set(d,void 0),F.set(d,void 0),W.set(d,void 0);var b;if(typeof f=="string"){for(var E=[],K=f.length,X=0,et=0;et<K;++et){var J=f.charCodeAt(et);J<128?E[X++]=J:J<2048?(E[X++]=192|J>>6,E[X++]=128|J&63):J<55296||J>=57344?(E[X++]=224|J>>12,E[X++]=128|J>>6&63,E[X++]=128|J&63):(J=65536+((J&1023)<<10|f.charCodeAt(++et)&1023),E[X++]=240|J>>18,E[X++]=128|J>>12&63,E[X++]=128|J>>6&63,E[X++]=128|J&63)}b=E}else f instanceof ArrayBuffer?b=new Uint8Array(f):b=f;b.length>64&&(b=new Z(S,!0).update(b).array());for(var ft=[],U=[],et=0;et<64;++et){var vt=b[et]||0;ft[et]=92^vt,U[et]=54^vt}return d.update(U),n(d,F,ft),n(d,_,!0),n(d,y,S),n(d,W,C),d}return c.prototype.finalize=function(){if(P.prototype.finalize.call(this),s(this,_)){n(this,_,!1);var f=this.array();P.prototype.init.call(this,s(this,y),s(this,W)),this.update(s(this,F)),this.update(f),P.prototype.finalize.call(this)}},c}(Z),_=new WeakMap,y=new WeakMap,F=new WeakMap,W=new WeakMap;function dt(P){var c=new Z;return c.update(P),parseInt(c.hex().substring(0,8),16)}var it=function(P){var c="#";return P.forEach(function(f){f<16&&(c+=0),c+=f.toString(16)}),c},ht=function(P,c,f){P/=360;var S=f<.5?f*(1+c):f+c-f*c,C=2*f-S;return[P+1/3,P,P-1/3].map(function(d){return d<0&&d++,d>1&&d--,d<1/6?d=C+(S-C)*6*d:d<.5?d=S:d<2/3?d=C+(S-C)*6*(2/3-d):d=C,Math.round(d*255)})},Kt=function(){function P(c){c===void 0&&(c={});var f=[c.lightness,c.saturation].map(function(d){return d=d!==void 0?d:[.35,.5,.65],Array.isArray(d)?d.concat():[d]}),S=f[0],C=f[1];this.L=S,this.S=C,typeof c.hue=="number"&&(c.hue={min:c.hue,max:c.hue}),typeof c.hue=="object"&&!Array.isArray(c.hue)&&(c.hue=[c.hue]),typeof c.hue>"u"&&(c.hue=[]),this.hueRanges=c.hue.map(function(d){return{min:typeof d.min>"u"?0:d.min,max:typeof d.max>"u"?360:d.max}}),this.hash=dt,typeof c.hash=="function"&&(this.hash=c.hash),c.hash==="bkdr"&&(this.hash=B)}return P.prototype.hsl=function(c){var f,S,C,d=this.hash(c),b=727;if(this.hueRanges.length){var E=this.hueRanges[d%this.hueRanges.length];f=d/this.hueRanges.length%b*(E.max-E.min)/b+E.min}else f=d%359;return d=Math.ceil(d/360),S=this.S[d%this.S.length],d=Math.ceil(d/this.S.length),C=this.L[d%this.L.length],[f,S,C]},P.prototype.rgb=function(c){var f=this.hsl(c);return ht.apply(this,f)},P.prototype.hex=function(c){var f=this.rgb(c);return it(f)},P}();e.default=Kt})(kn);const Tr=xr(kn),Mr=Array.from({length:550},(e,t)=>(t+401)/1e3),Er=Array.from({length:551},(e,t)=>(t+50)/1e3),me=e=>N(()=>{const t=JSON.stringify(e.value),n=he.value?Mr:Er,[s,a,o]=new Tr({lightness:n}).hsl(t);return`hsl(${[s,`${he.value&&o<.3||!he.value&&o>.7?Math.min(a+.4,1)*100:a*100}%`,`${o*100}%`].join(",")})`}),Cn=ct({__name:"Line",props:{points:{type:Array,default:()=>[]},pathWidth:{type:Number,default:1},svgSize:{type:Object,default:void 0},svgOffset:{type:Object,default:void 0}},setup(e){const t=e,n=Ut(te(t,"points")),s=me(te(t,"points")),a=N(()=>{var w,k,$,A;const{svgSize:i,svgOffset:u}=t;if(!i||!u||!n.value||((w=t.points[0])==null?void 0:w[0])===((k=t.points[1])==null?void 0:k[0])&&(($=t.points[0])==null?void 0:$[1])===((A=t.points[1])==null?void 0:A[1]))return;const{slope:h,intercept:m}=n.value,p=u.x,g=i.width+u.x;return[[p,h*p+m],[g,h*g+m]]}),o=N(()=>`${t.pathWidth} ${2*t.pathWidth}`);return(i,u)=>{const h=kr;return M(),z(pt,null,[r(a)?(M(),z(pt,{key:0},[L(h,Mt(i.$attrs,{"stroke-width":e.pathWidth*.8,stroke:"var(--background-color-transparent)","point-start":r(a)[0],"point-stop":r(a)[1],"stroke-dasharray":r(o),"stroke-linecap":"round",opacity:".2"}),null,16,["stroke-width","point-start","point-stop","stroke-dasharray"]),L(h,Mt({"stroke-width":e.pathWidth*.4,stroke:r(s)},i.$attrs,{"point-start":r(a)[0],"point-stop":r(a)[1],"stroke-dasharray":r(o),"stroke-linecap":"round"}),null,16,["stroke-width","stroke","point-start","point-stop","stroke-dasharray"])],64)):ut("v-if",!0),L(h,Mt(i.$attrs,{"stroke-width":e.pathWidth*1.2,stroke:"var(--background-color-transparent)","point-start":e.points[0],"point-stop":e.points[1],"stroke-linecap":"round",opacity:".3"}),null,16,["stroke-width","point-start","point-stop"]),L(h,Mt({stroke:r(s)},i.$attrs,{"stroke-linecap":"round","point-start":e.points[0],"point-stop":e.points[1]}),null,16,["stroke","point-start","point-stop"])],64)}}});var gt=(e=>(e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT",e))(gt||{});const Tt={x:30,y:4.5},xn=At(()=>{const e=G(!1);return{outOfBoundLabels:e,setOutBoundLabels(t,n){const s=t.find(({x:i,y:u})=>i<Tt.x||i>n.width-Tt.x||u<Tt.y+3||u>n.height-Tt.y);if(!s)return e.value=!1;const{x:a,y:o}=s;return a<Tt.x?e.value={direction:2,y:o}:a>n.width-Tt.x?e.value={direction:3,y:o}:o<Tt.y+3?e.value={direction:0,x:a}:e.value={direction:1,x:a}}}}),Tn=(e,t)=>N(()=>{if(!e.value||!t.value)return;const{slope:n,intercept:s}=e.value,{slope:a,intercept:o}=t.value;let i;return n===a?i=o-s:i=(s-o)/(a-n),{x:i,y:n*i+s}}),Mn=(e,t,n,s)=>N(()=>{if(!t.value||!n.value||!s.value||!e.value)return;const a=n.value,o=s.value;let i=Math.tan((Math.atan(a.slope)+Math.atan(o.slope))/2),u=-1/i,h=a.slope*t.value.x+a.intercept-i*t.value.x,m=a.slope*t.value.x+a.intercept-u*t.value.x;const p=rn([[[0,a.intercept],[t.value.x,a.slope*t.value.x+a.intercept]],[[0,h],[t.value.x,i*t.value.x+h]]])*2;return(p-1>e.value||p+1<e.value)&&([i,h,u,m]=[u,m,i,h]),{acute:{slope:i,intercept:h},obtuse:{slope:u,intercept:m}}}),En=(e,t,n)=>{const s=G([]);return qn([t,n,e],()=>{if(!t.value||!n.value||!e.value)return s.value=[];const{acute:{slope:a,intercept:o},obtuse:{slope:i,intercept:u}}=n.value,h=70,m=e.value,p=Math.cos(Math.atan(a))*(h+(90-m)*.4)+t.value.x,g=180-m,w=-Math.cos(Math.atan(i))*(h+(90-g)*.4)+t.value.x;s.value=[{x:p,y:a*p+o,value:m},{x:w,y:i*w+u,value:g}]},{throttle:20,immediate:!0}),s},qe=(e,t)=>N(()=>{if(!t.value||!e.value)return;const{slope:n,intercept:s}=e.value,{x1:a,x2:o}=t.value;return[[a,n*a+s],[o,n*o+s]]}),Ir={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Dr=l("path",{fill:"currentColor",d:"M24 19h-3v-3h-2v3h-3v2h3v3h2v-3h3v-2z"},null,-1),Ar=l("path",{fill:"currentColor",d:"m31 29.586l-4.689-4.688a8.028 8.028 0 1 0-1.414 1.414L29.586 31zM20 26a6 6 0 1 1 6-6a6.007 6.007 0 0 1-6 6zM4 8H2V4a2.002 2.002 0 0 1 2-2h4v2H4zm22 0h-2V4h-4V2h4a2.002 2.002 0 0 1 2 2zM12 2h4v2h-4zM8 26H4a2.002 2.002 0 0 1-2-2v-4h2v4h4zM2 12h2v4H2z"},null,-1),Rr=[Dr,Ar];function Or(e,t){return M(),z("svg",Ir,Rr)}const zr={name:"carbon-zoom-in-area",render:Or},Fr={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},Pr=l("path",{fill:"currentColor",d:"M16 19h8v2h-8z"},null,-1),Lr=l("path",{fill:"currentColor",d:"m31 29.586l-4.689-4.688a8.028 8.028 0 1 0-1.414 1.414L29.586 31zM20 26a6 6 0 1 1 6-6a6.007 6.007 0 0 1-6 6zM4 8H2V4a2.002 2.002 0 0 1 2-2h4v2H4zm22 0h-2V4h-4V2h4a2.002 2.002 0 0 1 2 2zM12 2h4v2h-4zM8 26H4a2.002 2.002 0 0 1-2-2v-4h2v4h4zM2 12h2v4H2z"},null,-1),Br=[Pr,Lr];function Gr(e,t){return M(),z("svg",Fr,Br)}const Nr={name:"carbon-zoom-out-area",render:Gr},Hr=["viewBox"],Ur=["transform"],Vr=["x","y"],Wr=ct({__name:"BoardResult",props:{boardRef:{type:Object,default:void 0}},setup(e){const t=e,{t:n}=It(),s=G(!1),a=()=>{s.value&&(s.value=!1)},o=G();Xn(o,a),Ze("Escape",a);const{height:i,width:u}=le(te(t,"boardRef")),h=N(()=>({width:300,height:300*i.value/u.value})),{outOfBoundLabels:m}=xn(),p=N(()=>{const j=s.value?260:50;return{width:j,height:j}}),g=N(()=>({minY:p.value.height,maxY:i.value-p.value.height,minX:p.value.width,maxX:u.value-p.value.width})),w=N(()=>{const{minX:j,maxX:H,minY:Q,maxY:Y}=g.value,Z=ht=>ht>Y?Y:ht<Q?Q:ht,dt=ht=>ht>H?H:ht<j?j:ht;if(!m.value)return;const it={height:`${p.value.height}px`,width:`${p.value.width}px`};switch(m.value.direction){case gt.DOWN:return{...it,bottom:"1rem",left:`${dt(m.value.x)}px`,transform:"translateX(-50%)"};case gt.UP:return{...it,top:"1rem",left:`${dt(m.value.x)}px`,transform:"translateX(-50%)"};case gt.LEFT:return{...it,top:`${Z(m.value.y)}px`,left:"1rem",transform:"translateY(-50%)"};case gt.RIGHT:return{...it,top:`${Z(m.value.y)}px`,right:"1rem",transform:"translateY(-50%)"}}}),{lines:k}=ae(),$=ye(k),A=N(()=>k.value[0]||[]),O=N(()=>k.value[1]||[]),I=Ut(A),D=Ut(O),x=Tn(I,D),q=Mn($,x,I,D),T=En($,x,q),_=N(()=>x.value&&{x1:x.value.x-h.value.width,x2:x.value.x+h.value.width}),y=qe(I,_),F=qe(D,_),W=me(A),B=me(O),v={[gt.UP]:"bottom",[gt.DOWN]:void 0,[gt.LEFT]:"right",[gt.RIGHT]:"left"};return(j,H)=>{const Q=Dt,Y=Cn;return r(I)&&r(D)&&r(x)&&r(m)?(M(),z("section",{key:0,ref_key:"el",ref:o,class:R(["bg-bg-transparent-inverse text-inverse",[j.$style.result,{[j.$style["result--open"]]:s.value}]]),style:Zt(r(w)),onMousemove:H[0]||(H[0]=ot(()=>{},["prevent","stop"])),onClick:H[1]||(H[1]=Z=>s.value=!s.value)},[L(Q,{class:R(j.$style.btn),tooltip:s.value?r(n)("board.result.zoom_out"):r(n)("board.result.zoom_in"),"tooltip-placement":s.value?"left":r(v)[r(m).direction]},{default:tt(()=>[(M(),lt(Zn(s.value?r(Nr):r(zr))))]),_:1},8,["class","tooltip","tooltip-placement"]),(M(),z("svg",{viewBox:`${r(h).width*.1} ${r(h).height*.1} ${r(h).width*.8} ${r(h).height*.8}`,class:R(j.$style.svg)},[l("g",{transform:`translate(${-r(x).x+r(h).width*.5} ${-r(x).y+r(h).height*.5})`},[r(y)?(M(),lt(Y,Mt({key:0,"stroke-width":"4","stroke-linecap":"round"},j.$attrs,{stroke:r(W),"path-width":4,points:r(y),"stroke-dasharray":"5 10",filter:"saturate(2.5)"}),null,16,["stroke","points"])):ut("v-if",!0),r(F)?(M(),lt(Y,Mt({key:1,"stroke-width":"4","stroke-linecap":"round"},j.$attrs,{stroke:r(B),"path-width":4,points:r(F),"stroke-dasharray":"5 10",filter:"saturate(2.5)"}),null,16,["stroke","points"])):ut("v-if",!0),(M(!0),z(pt,null,Ot(r(T),Z=>(M(),z("text",{key:`${Z.x}|${Z.y}`,x:Z.x,y:Z.y,"text-anchor":"middle","dominant-baseline":"middle",stroke:"transparent"},V(Z.value.toFixed(3))+"\xB0",9,Vr))),128))],8,Ur)],10,Hr))],38)):ut("v-if",!0)}}}),Kr="f_w",Yr="f_y",jr="f_z",qr={result:Kr,"result--open":"f_x",svg:Yr,btn:jr},Xr={$style:qr},Zr=kt(Wr,[["__cssModules",Xr]]),Jr=["viewBox","stroke-width","onTouchend","onMouseup"],Qr={"transform-origin":"0 0"},tl=["cx","cy","r"],el=["x","y","stroke-width"],nl=["x","y"],sl=ct({__name:"BoardSvg",props:{width:{type:Number,default:0},height:{type:Number,default:0}},emits:["pressed"],setup(e,{emit:t}){const n=e,s=be(),a=G(!1),{ctrl:o,meta:i,option:u}=ge(),h=N(()=>{if(i.value)return"move"}),{offset:m,active:p,zoom:g}=$n(),w=N(()=>5/g.value),k=N(()=>({width:n.width/g.value,height:n.height/g.value})),$=N(()=>({x:m.value[0]/-g.value,y:m.value[1]/-g.value})),{elementX:A,elementY:O}=Jn(s,{handleOutside:!1}),I=N(()=>(A.value-m.value[0])/g.value),D=N(()=>(O.value-m.value[1])/g.value),{undo:x,redo:q}=Qt(A),{undo:T,redo:_}=Qt(O),{lines:y,predictNextPoint:F,drawNextPoint:W,step:B,registerOnRedo:v,registerOnUndo:j}=ae();v(()=>{q(),_()}),j(()=>{x(),T()}),at([I,D],([S,C])=>{B.value===2&&F(S,C)});const H=ye(y),Q=N(()=>y.value[0]||[]),Y=N(()=>y.value[1]||[]),Z=Ut(Q),dt=Ut(Y),it=Tn(Z,dt),ht=Mn(H,it,Z,dt),Kt=En(H,it,ht),{outOfBoundLabels:P,setOutBoundLabels:c}=xn();at([Kt,k],([S,C])=>{c(S,C)});const f=S=>{p.value||(W(I.value,D.value),t("pressed"))};return(S,C)=>{const d=Cn;return M(),z("svg",{ref_key:"svgRef",ref:s,viewBox:`${r($).x} ${r($).y} ${r(k).width} ${r(k).height}`,"stroke-width":r(w),tabindex:"0",style:Zt({cursor:r(h)}),onTouchend:ot(f,["prevent"]),onMouseup:ot(f,["prevent"]),onMousedownOnce:C[0]||(C[0]=b=>a.value=!0),onMousemovePassiveOnce:C[1]||(C[1]=b=>a.value=!0),onTouchstartPassiveOnce:C[2]||(C[2]=b=>a.value=!0)},[l("g",Qr,[Bt(S.$slots,"default"),r(B)%2?$t((M(),z("circle",{key:0,cx:`${r(I)}px`,cy:`${r(D)}px`,r:r(w),"stroke-width":1},null,8,tl)),[[Qn,a.value&&!r(o)&&!r(i)&&!r(u)]]):(M(),lt(d,{key:1,points:[r(y)[Math.floor(r(B)/2)][0],[r(I),r(D)]],"svg-size":r(k),"svg-offset":r($),"path-width":r(w)},null,8,["points","svg-size","svg-offset","path-width"])),L(d,{points:r(y)[0],"svg-size":r(k),"svg-offset":r($),"path-width":r(w)},null,8,["points","svg-size","svg-offset","path-width"]),L(d,{points:r(y)[1],"svg-size":r(k),"svg-offset":r($),"path-width":r(w)},null,8,["points","svg-size","svg-offset","path-width"]),(M(!0),z(pt,null,Ot(r(Kt),b=>(M(),z(pt,{key:`${b.x}|${b.y}`},[l("text",{x:b.x,y:b.y,"text-anchor":"middle","dominant-baseline":"middle",stroke:"var(--background-color-transparent)","stroke-width":r(w),style:Zt(`font-size:${r(w)/5}em`)},V(b.value.toFixed(3))+"\xB0",13,el),l("text",{x:b.x,y:b.y,"text-anchor":"middle","dominant-baseline":"middle",stroke:"transparent",style:Zt(`font-size:${r(w)/5}em`)},V(b.value.toFixed(3))+"\xB0",13,nl)],64))),128))])],44,Jr)}}}),al=["href","height","width"],ol=ct({__name:"Board",setup(e){const{t}=It(),n=G(!0),s=_e(),{height:a,width:o}=le(s),{src:i,width:u,height:h,processFiles:m}=Sn(),p=G(0),g=G(0);at(i,()=>{if(h&&u)if(u.value>o.value||h.value>a.value){const $=Math.min(o.value/u.value,a.value/h.value);p.value=h.value*$,g.value=u.value*$}else p.value=h.value,g.value=u.value});const{isOverDropZone:w}=ts(s,m),k=N(()=>w.value?[t("board.drop_file_here")]:[]);return($,A)=>{const O=sl,I=Zr,D=$r;return M(),z("div",{ref_key:"boardRef",ref:s,class:R($.$style.board)},[L(O,{class:R($.$style.board__svg),width:r(o),height:r(a),onPressed:A[0]||(A[0]=x=>n.value=!1)},{default:tt(()=>[r(i)?(M(),z("image",{key:0,href:r(i),height:`${p.value}`,width:`${g.value}`},null,8,al)):ut("v-if",!0)]),_:1},8,["class","width","height"]),n.value&&!r(i)?(M(),z("div",{key:0,class:R($.$style.board__hint)},V(r(t)("board.click_this_button_or_drop")),3)):ut("v-if",!0),L(I,{"board-ref":r(s)},null,8,["board-ref"]),L(D,{class:R($.$style.board__nav),"board-ref":r(s),info:r(k),"onUpdate:files":r(m)},null,8,["class","board-ref","info","onUpdate:files"])],2)}}}),il="f_f",rl="f_g",ll="f_h",ul="f_i",cl={board:il,board__svg:rl,board__nav:ll,board__hint:ul},dl={$style:cl},hl=kt(ol,[["__cssModules",dl]]),fl={};function vl(e,t){const n=hl;return M(),lt(n,{ref:"boardRef",class:"flex-grow"},null,512)}const ml=kt(fl,[["render",vl]]);export{ml as default};
